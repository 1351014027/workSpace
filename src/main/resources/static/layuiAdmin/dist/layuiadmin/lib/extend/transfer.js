/** dms1.0-v1.0.0 ISC License By  */
 ;"use strict";layui.define(["table","form"],function(t){function a(t){var a=g.data,i=a[0].id.indexOf(l)>=0?a[0].data:a[1].data,d=a[0].id.indexOf(r)>=0?a[0].data:a[1].data,n=[];if(i.length>0&&0==t){var s=[];i.reverse();for(var o=0;o<i.length;o++)i[o].LAY_CHECKED===!0?(delete i[o].LAY_CHECKED,delete i[o].LAY_TABLE_INDEX,d.unshift(i[o])):(delete i[o].LAY_TABLE_INDEX,s.push(i[o]));d=e(d),n.push(s,d)}else if(d.length>0&&1==t){for(var u=[],o=0;o<d.length;o++)d[o].LAY_CHECKED&&d[o].LAY_CHECKED===!0?(delete d[o].LAY_CHECKED,d[o].LAY_TABLE_INDEX&&delete d[o].LAY_TABLE_INDEX,i.push(d[o])):(delete d[o].LAY_TABLE_INDEX,u.push(d[o]));n.push(i,u)}var c=g.options;c.data=n,g.render(c)}function e(t){for(var a=[],e=[],i=t.length,d=0;d<i;d++){for(var n=d+1;n<i;n++)t[d].oneid===t[n].oneid&&t[d].twoid===t[n].twoid&&(d++,n=d);a.push(t[d]),e.push(d)}return a}var i=layui.$,d=layui.table,n=layui.form,l="left-table-",r="right-table-",s="left-btn-",o="right-btn-",u="test",c="layui-btn-disabled",h="button",f="btn",p="layui-col-md5",v="layui-col-md2",g={index:layui.transfer?layui.transfer+1e3:0,idData:[],data:[],options:[],update:function(t,a){if(""==a&&t&&t.length>0){var e=[];return i.each(t,function(t,a){a.LAY_TABLE_INDEX&&delete a.LAY_TABLE_INDEX,a.LAY_CHECKED&&delete a.LAY_CHECKED,e.push(a)}),e}return a&&t&&t.length>0?(e="",i.each(t,function(t,i){e+=0===t?i[a]:","+i[a]}),e):[]},get:function(t,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=t.index,d=g.data;if(!i)return[];if("all"===a){for(var n=[],s=[],o=[],u=d.length-1;u>=0;u--)d[u].id==l+i?s=d[u].data:d[u].id==r+i&&(o=d[u].data);return n.push({left:s}),n.push({right:o}),n}if("left"===a||"l"===a){for(var u=d.length-1;u>=0;u--)if(d[u].id==l+i)return this.update(d[u].data,e)}else if("right"===a||"r"===a)for(var u=d.length-1;u>=0;u--)if(d[u].id==r+i)return this.update(d[u].data,e)}},x=function(){var t=this;return{index:t.index}},y=function(t){var a=this;a.index=g.index?g.index:++g.index,a.config=t,g.options=t,a.createHTMLDocument(),a.render()};y.prototype.createHTMLDocument=function(){var t=this,a=t.config.elem,e=t.index,d='<div >                    <div class="layui-row">                      <div class="'+p+'">                        <table class="layui-hide" id="'+l+e+'" lay-filter="'+u+'"></table>                      </div>                      <div class="'+v+'" style="text-align: center;">                        <div id="'+s+e+'"  style="margin-bottom: 10px;"><button data-type="0" data-index="'+e+'" class="layui-btn  '+c+" "+f+'"> <i class="layui-icon">&#xe602;</i></button></div>                        <div id="'+o+e+'" ><button data-type="1" data-index="'+e+'" class="layui-btn '+c+" "+f+'"> <i class="layui-icon">&#xe603;</i></button></div>                      </div>                      <div class="'+p+'">                        <table class="layui-hide" id="'+r+e+'" lay-filter="'+u+'"></table>                      </div>                    </div>                  </div>';i(a).html(d)},y.prototype.render=function(){var t=this,a=t.config;g.idData.push(t.index),g.data=[];var e={elem:"#"+l+t.index,url:a.url,cols:[a.cols],id:l+t.index,method:"post",request:{pageName:"pageNum",limitName:"pageSize"},parseData:function(t){return{code:t.status,msg:t.msg,count:t.data.total,data:t.data.list}},done:function(a,e,i){g.data.length<2?g.data.push({id:l+t.index,data:a.data?a.data:[]}):g.data[0].id.indexOf(l)>=0&&(g.data[0].data=a.data)}},s={elem:"#"+r+t.index,cols:[a.cols],data:a.data[1]?a.data[1]:[],id:r+t.index,done:function(e,i,d){g.data.push({id:r+t.index,data:a.data[1]?a.data[1]:[]})}};a.tabConfig&&(e=i.extend(e,a.tabConfig),s=i.extend(s,a.tabConfig)),g.idData.push(t.index),g.data=[],g.data.push({id:l+t.index,data:a.data[0]?a.data[0]:[]}),g.data.push({id:r+t.index,data:a.data[1]?a.data[1]:[]}),d.render(e),d.render(s),n.on("select(city_select)",function(t){var a=i(t.elem),e=a.closest("td"),n=e.closest("tr"),l=n.closest(".layui-table-view");d.cache[l.attr("lay-id")][n.data("index")][e.data("field")]=t.value}),t.move()},y.prototype.move=function(){var t=this,a=i("#"+l+t.index),e=a.parent().height();e=e/2-44,a.parents(".layui-row").find("."+v).css("padding-top",e+"px")},i(document).on("click","."+f,function(){if(!i(this).hasClass(c)){var t=i(this),e=t.data("type");a(e)}}),y.prototype.shiftData=function(t,a,e,d){var n=[];i.each(t,function(t,a){a.LAY_CHECKED||n.push(a)}),i.each(e,function(t,e){a.unshift(e)});var l=[];0==d?(l.push(n),l.push(a),i("#"+s+this.index).children(h).addClass(c)):1==d&&(l.push(a),l.push(n),i("#"+o+this.index).children(h).addClass(c)),this.config.data=l},d.on("checkbox("+u+")",function(t){var a=g.idData,e=a.length;if(e>0)for(var n=0;n<=e-1;n++){var u=d.checkStatus(l+a[n]),f=u.data,p=d.checkStatus(r+a[n]),v=p.data;f.length>0?i("#"+s+a[n]).children(h).removeClass(c):i("#"+s+a[n]).children(h).addClass(c),v.length>0?i("#"+o+a[n]).children(h).removeClass(c):i("#"+o+a[n]).children(h).addClass(c)}}),g.render=function(t){var a=new y(t);return x.call(a)},t("transfer",g)});