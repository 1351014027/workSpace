/** dms1.0-v1.0.0 ISC License By  */
 ;"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}layui.define(["form","jquery"],function(exports){var jQuery=layui.jquery,$=jQuery,form=layui.form,_MOD="treeSelect",trss={},TreeSelect=function(){this.v="1.0.4"};!function(r){var J,K,L,M,N,O,v,t={},w={},x={},P={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{isParent:"isParent",children:"children",name:"name",title:"",url:"url",icon:"icon"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",headers:{},xhrFields:{},url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},y=[function(e){var t=e.treeObj,n=g.event;t.bind(n.NODECREATED,function(t,n,o){h.apply(e.callback.onNodeCreated,[t,n,o])}),t.bind(n.CLICK,function(t,n,o,r,a){h.apply(e.callback.onClick,[n,o,r,a])}),t.bind(n.EXPAND,function(t,n,o){h.apply(e.callback.onExpand,[t,n,o])}),t.bind(n.COLLAPSE,function(t,n,o){h.apply(e.callback.onCollapse,[t,n,o])}),t.bind(n.ASYNC_SUCCESS,function(t,n,o,r){h.apply(e.callback.onAsyncSuccess,[t,n,o,r])}),t.bind(n.ASYNC_ERROR,function(t,n,o,r,a,i){h.apply(e.callback.onAsyncError,[t,n,o,r,a,i])}),t.bind(n.REMOVE,function(t,n,o){h.apply(e.callback.onRemove,[t,n,o])}),t.bind(n.SELECTED,function(t,n,o){h.apply(e.callback.onSelected,[n,o])}),t.bind(n.UNSELECTED,function(t,n,o){h.apply(e.callback.onUnSelected,[n,o])})}],z=[function(e){var t=g.event;e.treeObj.unbind(t.NODECREATED).unbind(t.CLICK).unbind(t.EXPAND).unbind(t.COLLAPSE).unbind(t.ASYNC_SUCCESS).unbind(t.ASYNC_ERROR).unbind(t.REMOVE).unbind(t.SELECTED).unbind(t.UNSELECTED)}],A=[function(t){var n=e.getCache(t);n||(n={},e.setCache(t,n)),n.nodes=[],n.doms=[]}],B=[function(t,n,o,r,a,i){if(o){var d=e.getRoot(t),l=e.nodeChildren(t,o);o.level=n,o.tId=t.treeId+"_"+ ++d.zId,o.parentTId=r?r.tId:null,o.open="string"==typeof o.open?h.eqs(o.open,"true"):!!o.open,n=e.nodeIsParent(t,o),h.isArray(l)&&!(n===!1||"string"==typeof n&&h.eqs(n,"false"))?(e.nodeIsParent(t,o,!0),o.zAsync=!0):(n=e.nodeIsParent(t,o,n),o.open=!(!n||t.async.enable)&&o.open,o.zAsync=!n),o.isFirstNode=a,o.isLastNode=i,o.getParentNode=function(){return e.getNodeCache(t,o.parentTId)},o.getPreNode=function(){return e.getPreNode(t,o)},o.getNextNode=function(){return e.getNextNode(t,o)},o.getIndex=function(){return e.getNodeIndex(t,o)},o.getPath=function(){return e.getNodePath(t,o)},o.isAjaxing=!1,e.fixPIdKeyValue(t,o)}}],u=[function(t){var n=t.target,o=e.getSetting(t.data.treeId),r="",a=null,i="",d="",l=null,s=null,c=null;if(h.eqs(t.type,"mousedown")?d="mousedown":h.eqs(t.type,"mouseup")?d="mouseup":h.eqs(t.type,"contextmenu")?d="contextmenu":h.eqs(t.type,"click")?h.eqs(n.tagName,"span")&&null!==n.getAttribute("treeNode"+g.id.SWITCH)?(r=h.getNodeMainDom(n).id,i="switchNode"):(c=h.getMDom(o,n,[{tagName:"a",attrName:"treeNode"+g.id.A}]))&&(r=h.getNodeMainDom(c).id,i="clickNode"):h.eqs(t.type,"dblclick")&&(d="dblclick",c=h.getMDom(o,n,[{tagName:"a",attrName:"treeNode"+g.id.A}]))&&(r=h.getNodeMainDom(c).id,i="switchNode"),d.length>0&&0==r.length&&(c=h.getMDom(o,n,[{tagName:"a",attrName:"treeNode"+g.id.A}]))&&(r=h.getNodeMainDom(c).id),r.length>0)switch(a=e.getNodeCache(o,r),i){case"switchNode":e.nodeIsParent(o,a)&&(h.eqs(t.type,"click")||h.eqs(t.type,"dblclick")&&h.apply(o.view.dblClickExpand,[o.treeId,a],o.view.dblClickExpand))?l=J:i="";break;case"clickNode":l=K}switch(d){case"mousedown":s=L;break;case"mouseup":s=M;break;case"dblclick":s=N;break;case"contextmenu":s=O}return{stop:!1,node:a,nodeEventType:i,nodeEventCallback:l,treeEventType:d,treeEventCallback:s}}],C=[function(t){var n=e.getRoot(t);n||(n={},e.setRoot(t,n)),e.nodeChildren(t,n,[]),n.expandTriggerFlag=!1,n.curSelectedList=[],n.noSelection=!0,n.createdNodes=[],n.zId=0,n._ver=(new Date).getTime()}],D=[],E=[],F=[],G=[],H=[],e={addNodeCache:function(t,n){e.getCache(t).nodes[e.getNodeCacheId(n.tId)]=n},getNodeCacheId:function(e){return e.substring(e.lastIndexOf("_")+1)},addAfterA:function(e){E.push(e)},addBeforeA:function(e){D.push(e)},addInnerAfterA:function(e){G.push(e)},addInnerBeforeA:function(e){F.push(e)},addInitBind:function(e){y.push(e)},addInitUnBind:function(e){z.push(e)},addInitCache:function(e){A.push(e)},addInitNode:function(e){B.push(e)},addInitProxy:function(e,t){t?u.splice(0,0,e):u.push(e)},addInitRoot:function(e){C.push(e)},addNodesData:function(t,n,o,r){var a=e.nodeChildren(t,n);a?o>=a.length&&(o=-1):(a=e.nodeChildren(t,n,[]),o=-1),a.length>0&&0===o?(a[0].isFirstNode=!1,j.setNodeLineIcos(t,a[0])):a.length>0&&o<0&&(a[a.length-1].isLastNode=!1,j.setNodeLineIcos(t,a[a.length-1])),e.nodeIsParent(t,n,!0),o<0?e.nodeChildren(t,n,a.concat(r)):(t=[o,0].concat(r),a.splice.apply(a,t))},addSelectedNode:function(t,n){var o=e.getRoot(t);e.isSelectedNode(t,n)||o.curSelectedList.push(n)},addCreatedNode:function(t,n){(t.callback.onNodeCreated||t.view.addDiyDom)&&e.getRoot(t).createdNodes.push(n)},addZTreeTools:function(e){H.push(e)},exSetting:function(e){r.extend(!0,P,e)},fixPIdKeyValue:function(e,t){e.data.simpleData.enable&&(t[e.data.simpleData.pIdKey]=t.parentTId?t.getParentNode()[e.data.simpleData.idKey]:e.data.simpleData.rootPId)},getAfterA:function(e,t,n){for(var o=0,r=E.length;o<r;o++)E[o].apply(this,arguments)},getBeforeA:function(e,t,n){for(var o=0,r=D.length;o<r;o++)D[o].apply(this,arguments)},getInnerAfterA:function(e,t,n){for(var o=0,r=G.length;o<r;o++)G[o].apply(this,arguments)},getInnerBeforeA:function(e,t,n){for(var o=0,r=F.length;o<r;o++)F[o].apply(this,arguments)},getCache:function(e){return x[e.treeId]},getNodeIndex:function(t,n){if(!n)return null;for(var o=n.parentTId?n.getParentNode():e.getRoot(t),o=e.nodeChildren(t,o),r=0,a=o.length-1;r<=a;r++)if(o[r]===n)return r;return-1},getNextNode:function(t,n){if(!n)return null;for(var o=n.parentTId?n.getParentNode():e.getRoot(t),o=e.nodeChildren(t,o),r=0,a=o.length-1;r<=a;r++)if(o[r]===n)return r==a?null:o[r+1];return null},getNodeByParam:function(t,n,o,r){if(!n||!o)return null;for(var a=0,i=n.length;a<i;a++){var d=n[a];if(d[o]==r)return n[a];if(d=e.nodeChildren(t,d),d=e.getNodeByParam(t,d,o,r))return d}return null},getNodeCache:function(t,n){if(!n)return null;var o=x[t.treeId].nodes[e.getNodeCacheId(n)];return o?o:null},getNodePath:function(e,t){if(!t)return null;var n;return(n=t.parentTId?t.getParentNode().getPath():[])&&n.push(t),n},getNodes:function(t){return e.nodeChildren(t,e.getRoot(t))},getNodesByParam:function(t,n,o,r){if(!n||!o)return[];for(var a=[],i=0,d=n.length;i<d;i++){var l=n[i];l[o]==r&&a.push(l),l=e.nodeChildren(t,l),a=a.concat(e.getNodesByParam(t,l,o,r))}return a},getNodesByParamFuzzy:function(t,n,o,r){if(!n||!o)return[];for(var a=[],r=r.toLowerCase(),i=0,d=n.length;i<d;i++){var l=n[i];"string"==typeof l[o]&&n[i][o].toLowerCase().indexOf(r)>-1&&a.push(l),l=e.nodeChildren(t,l),a=a.concat(e.getNodesByParamFuzzy(t,l,o,r))}return a},getNodesByFilter:function(t,n,o,r,a){if(!n)return r?null:[];for(var i=r?null:[],d=0,l=n.length;d<l;d++){var s=n[d];if(h.apply(o,[s,a],!1)){if(r)return s;i.push(s)}if(s=e.nodeChildren(t,s),s=e.getNodesByFilter(t,s,o,r,a),r&&s)return s;i=r?s:i.concat(s)}return i},getPreNode:function(t,n){if(!n)return null;for(var o=n.parentTId?n.getParentNode():e.getRoot(t),o=e.nodeChildren(t,o),r=0,a=o.length;r<a;r++)if(o[r]===n)return 0==r?null:o[r-1];return null},getRoot:function(e){return e?w[e.treeId]:null},getRoots:function(){return w},getSetting:function(e){return t[e]},getSettings:function(){return t},getZTreeTools:function(e){return(e=this.getRoot(this.getSetting(e)))?e.treeTools:null},initCache:function(e){for(var t=0,n=A.length;t<n;t++)A[t].apply(this,arguments)},initNode:function(e,t,n,o,r,a){for(var i=0,d=B.length;i<d;i++)B[i].apply(this,arguments)},initRoot:function(e){for(var t=0,n=C.length;t<n;t++)C[t].apply(this,arguments)},isSelectedNode:function(t,n){for(var o=e.getRoot(t),r=0,a=o.curSelectedList.length;r<a;r++)if(n===o.curSelectedList[r])return!0;return!1},nodeChildren:function(e,t,n){return t?(e=e.data.key.children,"undefined"!=typeof n&&(t[e]=n),t[e]):null},nodeIsParent:function(e,t,n){return!!t&&(e=e.data.key.isParent,"undefined"!=typeof n&&("string"==typeof n&&(n=h.eqs(n,"true")),t[e]=!!n),t[e])},nodeName:function(e,t,n){return e=e.data.key.name,"undefined"!=typeof n&&(t[e]=n),""+t[e]},nodeTitle:function(e,t){return""+t[""===e.data.key.title?e.data.key.name:e.data.key.title]},removeNodeCache:function(t,n){var o=e.nodeChildren(t,n);if(o)for(var r=0,a=o.length;r<a;r++)e.removeNodeCache(t,o[r]);e.getCache(t).nodes[e.getNodeCacheId(n.tId)]=null},removeSelectedNode:function(t,n){for(var o=e.getRoot(t),r=0,a=o.curSelectedList.length;r<a;r++)n!==o.curSelectedList[r]&&e.getNodeCache(t,o.curSelectedList[r].tId)||(o.curSelectedList.splice(r,1),t.treeObj.trigger(g.event.UNSELECTED,[t.treeId,n]),r--,a--)},setCache:function(e,t){x[e.treeId]=t},setRoot:function(e,t){w[e.treeId]=t},setZTreeTools:function(e,t){for(var n=0,o=H.length;n<o;n++)H[n].apply(this,arguments)},transformToArrayFormat:function(t,n){function o(n){r.push(n),(n=e.nodeChildren(t,n))&&(r=r.concat(e.transformToArrayFormat(t,n)))}if(!n)return[];var r=[];if(h.isArray(n))for(var a=0,i=n.length;a<i;a++)o(n[a]);else o(n);return r},transformTozTreeFormat:function(t,n){var o,r,a=t.data.simpleData.idKey,i=t.data.simpleData.pIdKey;if(!a||""==a||!n)return[];if(h.isArray(n)){var d=[],l={};for(o=0,r=n.length;o<r;o++)l[n[o][a]]=n[o];for(o=0,r=n.length;o<r;o++){var s=l[n[o][i]];if(s&&n[o][a]!=n[o][i]){var c=e.nodeChildren(t,s);c||(c=e.nodeChildren(t,s,[])),c.push(n[o])}else d.push(n[o])}return d}return[n]}},n={bindEvent:function(e){for(var t=0,n=y.length;t<n;t++)y[t].apply(this,arguments)},unbindEvent:function(e){for(var t=0,n=z.length;t<n;t++)z[t].apply(this,arguments)},bindTree:function(e){var t={treeId:e.treeId},o=e.treeObj;e.view.txtSelectedEnable||o.bind("selectstart",v).css({"-moz-user-select":"-moz-none"}),o.bind("click",t,n.proxy),o.bind("dblclick",t,n.proxy),o.bind("mouseover",t,n.proxy),o.bind("mouseout",t,n.proxy),o.bind("mousedown",t,n.proxy),o.bind("mouseup",t,n.proxy),o.bind("contextmenu",t,n.proxy)},unbindTree:function(e){e.treeObj.unbind("selectstart",v).unbind("click",n.proxy).unbind("dblclick",n.proxy).unbind("mouseover",n.proxy).unbind("mouseout",n.proxy).unbind("mousedown",n.proxy).unbind("mouseup",n.proxy).unbind("contextmenu",n.proxy)},doProxy:function(e){for(var t=[],n=0,o=u.length;n<o;n++){var r=u[n].apply(this,arguments);if(t.push(r),r.stop)break}return t},proxy:function(t){var o=e.getSetting(t.data.treeId);if(!h.uCanDo(o,t))return!0;for(var o=n.doProxy(t),r=!0,a=0,i=o.length;a<i;a++){var d=o[a];d.nodeEventCallback&&(r=d.nodeEventCallback.apply(d,[t,d.node])&&r),d.treeEventCallback&&(r=d.treeEventCallback.apply(d,[t,d.node])&&r)}return r}};J=function(t,n){var o=e.getSetting(t.data.treeId);if(n.open){if(0==h.apply(o.callback.beforeCollapse,[o.treeId,n],!0))return!0}else if(0==h.apply(o.callback.beforeExpand,[o.treeId,n],!0))return!0;return e.getRoot(o).expandTriggerFlag=!0,j.switchNode(o,n),!0},K=function(t,n){var o=e.getSetting(t.data.treeId),r=o.view.autoCancelSelected&&(t.ctrlKey||t.metaKey)&&e.isSelectedNode(o,n)?0:o.view.autoCancelSelected&&(t.ctrlKey||t.metaKey)&&o.view.selectedMulti?2:1;return 0==h.apply(o.callback.beforeClick,[o.treeId,n,r],!0)||(0===r?j.cancelPreSelectedNode(o,n):j.selectNode(o,n,2===r),o.treeObj.trigger(g.event.CLICK,[t,o.treeId,n,r]),!0)},L=function(t,n){var o=e.getSetting(t.data.treeId);return h.apply(o.callback.beforeMouseDown,[o.treeId,n],!0)&&h.apply(o.callback.onMouseDown,[t,o.treeId,n]),!0},M=function(t,n){var o=e.getSetting(t.data.treeId);return h.apply(o.callback.beforeMouseUp,[o.treeId,n],!0)&&h.apply(o.callback.onMouseUp,[t,o.treeId,n]),!0},N=function(t,n){var o=e.getSetting(t.data.treeId);return h.apply(o.callback.beforeDblClick,[o.treeId,n],!0)&&h.apply(o.callback.onDblClick,[t,o.treeId,n]),!0},O=function(t,n){var o=e.getSetting(t.data.treeId);return h.apply(o.callback.beforeRightClick,[o.treeId,n],!0)&&h.apply(o.callback.onRightClick,[t,o.treeId,n]),"function"!=typeof o.callback.onRightClick},v=function(e){return e=e.originalEvent.srcElement.nodeName.toLowerCase(),"input"===e||"textarea"===e};var h={apply:function(e,t,n){return"function"==typeof e?e.apply(Q,t?t:[]):n},canAsync:function(t,n){var o=e.nodeChildren(t,n),r=e.nodeIsParent(t,n);return t.async.enable&&n&&r&&!(n.zAsync||o&&o.length>0)},clone:function(e){if(null===e)return null;var t,n=h.isArray(e)?[]:{};for(t in e)n[t]=e[t]instanceof Date?new Date(e[t].getTime()):"object"===_typeof(e[t])?h.clone(e[t]):e[t];return n},eqs:function(e,t){return e.toLowerCase()===t.toLowerCase()},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},isElement:function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement))?e instanceof HTMLElement:e&&"object"===_typeof(e)&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},$:function(e,t,n){return t&&"string"!=typeof t&&(n=t,t=""),"string"==typeof e?r(e,n?n.treeObj.get(0).ownerDocument:null):r("#"+e.tId+t,n?n.treeObj:null)},getMDom:function(e,t,n){if(!t)return null;for(;t&&t.id!==e.treeId;){for(var o=0,r=n.length;t.tagName&&o<r;o++)if(h.eqs(t.tagName,n[o].tagName)&&null!==t.getAttribute(n[o].attrName))return t;t=t.parentNode}return null},getNodeMainDom:function(e){return r(e).parent("li").get(0)||r(e).parentsUntil("li").parent().get(0)},isChildOrSelf:function(e,t){return r(e).closest("#"+t).length>0},uCanDo:function(){return!0}},j={addNodes:function(t,n,o,r,a){var i=e.nodeIsParent(t,n);if(!t.data.keep.leaf||!n||i)if(h.isArray(r)||(r=[r]),t.data.simpleData.enable&&(r=e.transformTozTreeFormat(t,r)),n){var i=l(n,g.id.SWITCH,t),d=l(n,g.id.ICON,t),s=l(n,g.id.UL,t);n.open||(j.replaceSwitchClass(n,i,g.folder.CLOSE),j.replaceIcoClass(n,d,g.folder.CLOSE),n.open=!1,s.css({display:"none"})),e.addNodesData(t,n,o,r),j.createNodes(t,n.level+1,r,n,o),a||j.expandCollapseParentNode(t,n,!0)}else e.addNodesData(t,e.getRoot(t),o,r),j.createNodes(t,0,r,null,o)},appendNodes:function(t,n,o,r,a,i,d){if(!o)return[];var l,s,c=[],u=r?r:e.getRoot(t),u=e.nodeChildren(t,u);(!u||a>=u.length-o.length)&&(a=-1);for(var p=0,h=o.length;p<h;p++){var g=o[p];i&&(l=(0===a||u.length==o.length)&&0==p,s=a<0&&p==o.length-1,e.initNode(t,n,g,r,l,s,d),e.addNodeCache(t,g)),l=e.nodeIsParent(t,g),s=[];var f=e.nodeChildren(t,g);f&&f.length>0&&(s=j.appendNodes(t,n+1,f,g,-1,i,d&&g.open)),d&&(j.makeDOMNodeMainBefore(c,t,g),j.makeDOMNodeLine(c,t,g),e.getBeforeA(t,g,c),j.makeDOMNodeNameBefore(c,t,g),e.getInnerBeforeA(t,g,c),j.makeDOMNodeIcon(c,t,g),e.getInnerAfterA(t,g,c),j.makeDOMNodeNameAfter(c,t,g),e.getAfterA(t,g,c),l&&g.open&&j.makeUlHtml(t,g,c,s.join("")),j.makeDOMNodeMainAfter(c,t,g),e.addCreatedNode(t,g))}return c},appendParentULDom:function(t,n){var o=[],r=l(n,t);!r.get(0)&&n.parentTId&&(j.appendParentULDom(t,n.getParentNode()),r=l(n,t));var a=l(n,g.id.UL,t);a.get(0)&&a.remove(),a=e.nodeChildren(t,n),a=j.appendNodes(t,n.level+1,a,n,-1,!1,!0),j.makeUlHtml(t,n,o,a.join("")),r.append(o.join(""))},asyncNode:function asyncNode(a,b,c,d){var f,i;if(f=e.nodeIsParent(a,b),b&&!f)return h.apply(d),!1;if(b&&b.isAjaxing)return!1;if(0==h.apply(a.callback.beforeAsync,[a.treeId,b],!0))return h.apply(d),!1;b&&(b.isAjaxing=!0,l(b,g.id.ICON,a).attr({style:"","class":g.className.BUTTON+" "+g.className.ICO_LOADING}));var m={},k=h.apply(a.async.autoParam,[a.treeId,b],a.async.autoParam);for(f=0,i=k.length;b&&f<i;f++){var q=k[f].split("="),o=q;q.length>1&&(o=q[1],q=q[0]),m[o]=b[q]}if(k=h.apply(a.async.otherParam,[a.treeId,b],a.async.otherParam),h.isArray(k))for(f=0,i=k.length;f<i;f+=2)m[k[f]]=k[f+1];else for(var n in k)m[n]=k[n];var s=e.getRoot(a)._ver;return r.ajax({contentType:a.async.contentType,cache:!1,type:a.async.type,url:h.apply(a.async.url,[a.treeId,b],a.async.url),data:a.async.contentType.indexOf("application/json")>-1?JSON.stringify(m):m,dataType:a.async.dataType,headers:a.async.headers,xhrFields:a.async.xhrFields,success:function success(i){if(s==e.getRoot(a)._ver){var f=[];try{f=i&&0!=i.length?"string"==typeof i?eval("("+i+")"):i:[]}catch(k){f=i}b&&(b.isAjaxing=null,b.zAsync=!0),j.setNodeLineIcos(a,b),f&&""!==f?(f=h.apply(a.async.dataFilter,[a.treeId,b,f],f),j.addNodes(a,b,-1,f?h.clone(f):[],!!c)):j.addNodes(a,b,-1,[],!!c),a.treeObj.trigger(g.event.ASYNC_SUCCESS,[a.treeId,b,i]),h.apply(d)}},error:function(t,n,o){s==e.getRoot(a)._ver&&(b&&(b.isAjaxing=null),j.setNodeLineIcos(a,b),a.treeObj.trigger(g.event.ASYNC_ERROR,[a.treeId,b,t,n,o]))}}),!0},cancelPreSelectedNode:function(t,n,o){var r,a,i=e.getRoot(t).curSelectedList;for(r=i.length-1;r>=0;r--)if(a=i[r],n===a||!n&&(!o||o!==a)){if(l(a,g.id.A,t).removeClass(g.node.CURSELECTED),n){e.removeSelectedNode(t,n);break}i.splice(r,1),t.treeObj.trigger(g.event.UNSELECTED,[t.treeId,a])}},createNodeCallback:function(t){if(t.callback.onNodeCreated||t.view.addDiyDom)for(var n=e.getRoot(t);n.createdNodes.length>0;){var o=n.createdNodes.shift();h.apply(t.view.addDiyDom,[t.treeId,o]),t.callback.onNodeCreated&&t.treeObj.trigger(g.event.NODECREATED,[t.treeId,o])}},createNodes:function(t,n,o,a,i){if(o&&0!=o.length){var d=e.getRoot(t),s=!a||a.open||!!l(e.nodeChildren(t,a)[0],t).get(0);d.createdNodes=[];var c,u,n=j.appendNodes(t,n,o,a,i,!0,s);a?(a=l(a,g.id.UL,t),a.get(0)&&(c=a)):c=t.treeObj,c&&(i>=0&&(u=c.children()[i]),i>=0&&u?r(u).before(n.join("")):c.append(n.join(""))),j.createNodeCallback(t)}},destroy:function(o){o&&(e.initCache(o),e.initRoot(o),n.unbindTree(o),n.unbindEvent(o),o.treeObj.empty(),delete t[o.treeId])},expandCollapseNode:function(t,n,o,r,a){var i,d=e.getRoot(t);if(n){var s=e.nodeChildren(t,n),c=e.nodeIsParent(t,n);if(d.expandTriggerFlag&&(i=a,a=function(){i&&i(),n.open?t.treeObj.trigger(g.event.EXPAND,[t.treeId,n]):t.treeObj.trigger(g.event.COLLAPSE,[t.treeId,n])},d.expandTriggerFlag=!1),!n.open&&c&&(!l(n,g.id.UL,t).get(0)||s&&s.length>0&&!l(s[0],t).get(0))&&(j.appendParentULDom(t,n),j.createNodeCallback(t)),n.open==o)h.apply(a,[]);else{var o=l(n,g.id.UL,t),d=l(n,g.id.SWITCH,t),u=l(n,g.id.ICON,t);c?(n.open=!n.open,n.iconOpen&&n.iconClose&&u.attr("style",j.makeNodeIcoStyle(t,n)),n.open?(j.replaceSwitchClass(n,d,g.folder.OPEN),j.replaceIcoClass(n,u,g.folder.OPEN),0==r||""==t.view.expandSpeed?(o.show(),h.apply(a,[])):s&&s.length>0?o.slideDown(t.view.expandSpeed,a):(o.show(),h.apply(a,[]))):(j.replaceSwitchClass(n,d,g.folder.CLOSE),j.replaceIcoClass(n,u,g.folder.CLOSE),0!=r&&""!=t.view.expandSpeed&&s&&s.length>0?o.slideUp(t.view.expandSpeed,a):(o.hide(),h.apply(a,[])))):h.apply(a,[])}}else h.apply(a,[])},expandCollapseParentNode:function(e,t,n,o,r){t&&(t.parentTId?(j.expandCollapseNode(e,t,n,o),t.parentTId&&j.expandCollapseParentNode(e,t.getParentNode(),n,o,r)):j.expandCollapseNode(e,t,n,o,r))},expandCollapseSonNode:function(t,n,o,r,a){var i=e.getRoot(t),i=n?e.nodeChildren(t,n):e.nodeChildren(t,i),d=!n&&r,l=e.getRoot(t).expandTriggerFlag;if(e.getRoot(t).expandTriggerFlag=!1,i)for(var s=0,c=i.length;s<c;s++)i[s]&&j.expandCollapseSonNode(t,i[s],o,d);e.getRoot(t).expandTriggerFlag=l,j.expandCollapseNode(t,n,o,r,a)},isSelectedNode:function(t,n){if(!n)return!1;var o,r=e.getRoot(t).curSelectedList;for(o=r.length-1;o>=0;o--)if(n===r[o])return!0;return!1},makeDOMNodeIcon:function(t,n,o){var r=e.nodeName(n,o),r=n.view.nameIsHTML?r:r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");t.push("<span id='",o.tId,g.id.ICON,"' title='' treeNode",g.id.ICON," class='",j.makeNodeIcoClass(n,o),"' style='",j.makeNodeIcoStyle(n,o),"'></span><span id='",o.tId,g.id.SPAN,"' class='",g.className.NAME,"'>",r,"</span>")},makeDOMNodeLine:function(e,t,n){e.push("<span id='",n.tId,g.id.SWITCH,"' title='' class='",j.makeNodeLineClass(t,n),"' treeNode",g.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(e){e.push("</li>")},makeDOMNodeMainBefore:function(e,t,n){e.push("<li id='",n.tId,"' class='",g.className.LEVEL,n.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(e){e.push("</a>")},makeDOMNodeNameBefore:function(t,n,o){var r,a=e.nodeTitle(n,o),i=j.makeNodeUrl(n,o),d=j.makeNodeFontCss(n,o),l=[];for(r in d)l.push(r,":",d[r],";");t.push("<a id='",o.tId,g.id.A,"' class='",g.className.LEVEL,o.level,"' treeNode",g.id.A,' onclick="',o.click||"",'" ',null!=i&&i.length>0?"href='"+i+"'":""," target='",j.makeNodeTarget(o),"' style='",l.join(""),"'"),h.apply(n.view.showTitle,[n.treeId,o],n.view.showTitle)&&a&&t.push("title='",a.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'"),t.push(">")},makeNodeFontCss:function(e,t){var n=h.apply(e.view.fontCss,[e.treeId,t],e.view.fontCss);return n&&"function"!=typeof n?n:{}},makeNodeIcoClass:function(t,n){var o=["ico"];if(!n.isAjaxing){var r=e.nodeIsParent(t,n);o[0]=(n.iconSkin?n.iconSkin+"_":"")+o[0],r?o.push(n.open?g.folder.OPEN:g.folder.CLOSE):o.push(g.folder.DOCU)}return g.className.BUTTON+" "+o.join("_")},makeNodeIcoStyle:function(t,n){var o=[];if(!n.isAjaxing){var r=e.nodeIsParent(t,n)&&n.iconOpen&&n.iconClose?n.open?n.iconOpen:n.iconClose:n[t.data.key.icon];r&&o.push("background:url(",r,") 0 0 no-repeat;"),(0==t.view.showIcon||!h.apply(t.view.showIcon,[t.treeId,n],!0))&&o.push("width:0px;height:0px;")}return o.join("")},makeNodeLineClass:function(t,n){var o=[];return t.view.showLine?0==n.level&&n.isFirstNode&&n.isLastNode?o.push(g.line.ROOT):0==n.level&&n.isFirstNode?o.push(g.line.ROOTS):n.isLastNode?o.push(g.line.BOTTOM):o.push(g.line.CENTER):o.push(g.line.NOLINE),e.nodeIsParent(t,n)?o.push(n.open?g.folder.OPEN:g.folder.CLOSE):o.push(g.folder.DOCU),j.makeNodeLineClassEx(n)+o.join("_")},makeNodeLineClassEx:function(e){return g.className.BUTTON+" "+g.className.LEVEL+e.level+" "+g.className.SWITCH+" "},makeNodeTarget:function(e){return e.target||"_blank"},makeNodeUrl:function(e,t){var n=e.data.key.url;return t[n]?t[n]:null},makeUlHtml:function(e,t,n,o){n.push("<ul id='",t.tId,g.id.UL,"' class='",g.className.LEVEL,t.level," ",j.makeUlLineClass(e,t),"' style='display:",t.open?"block":"none","'>"),n.push(o),n.push("</ul>")},makeUlLineClass:function(e,t){return e.view.showLine&&!t.isLastNode?g.line.LINE:""},removeChildNodes:function(t,n){if(n){var o=e.nodeChildren(t,n);if(o){for(var r=0,a=o.length;r<a;r++)e.removeNodeCache(t,o[r]);e.removeSelectedNode(t),delete n[t.data.key.children],t.data.keep.parent?l(n,g.id.UL,t).empty():(e.nodeIsParent(t,n,!1),n.open=!1,o=l(n,g.id.SWITCH,t),r=l(n,g.id.ICON,t),j.replaceSwitchClass(n,o,g.folder.DOCU),j.replaceIcoClass(n,r,g.folder.DOCU),l(n,g.id.UL,t).remove())}}},scrollIntoView:function(e,t){if(t)if("undefined"==typeof Element){var n=e.treeObj.get(0).getBoundingClientRect(),o=t.getBoundingClientRect();(o.top<n.top||o.bottom>n.bottom||o.right>n.right||o.left<n.left)&&t.scrollIntoView()}else Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){function t(e,t){return{start:e,length:t,end:e+t}}function n(t,n){return!1===e||n.start<t.end&&t.start<n.end?Math.max(t.end-n.length,Math.min(n.start,t.start)):(t.start+t.end-n.length)/2}function o(e,t){return{x:e,y:t,translate:function(n,r){return o(e+n,t+r)}}}function r(e,t){for(;e;)t=t.translate(e.offsetLeft,e.offsetTop),e=e.offsetParent;return t}for(var a,i=r(this,o(0,0)),d=o(this.offsetWidth,this.offsetHeight),l=this.parentNode;l instanceof HTMLElement;)a=r(l,o(l.clientLeft,l.clientTop)),l.scrollLeft=n(t(i.x-a.x,d.x),t(l.scrollLeft,l.clientWidth)),l.scrollTop=n(t(i.y-a.y,d.y),t(l.scrollTop,l.clientHeight)),i=i.translate(-l.scrollLeft,-l.scrollTop),l=l.parentNode}),t.scrollIntoViewIfNeeded()},setFirstNode:function(t,n){var o=e.nodeChildren(t,n);o.length>0&&(o[0].isFirstNode=!0)},setLastNode:function(t,n){var o=e.nodeChildren(t,n);o.length>0&&(o[o.length-1].isLastNode=!0)},removeNode:function(t,n){var o=e.getRoot(t),r=n.parentTId?n.getParentNode():o;if(n.isFirstNode=!1,n.isLastNode=!1,n.getPreNode=function(){return null},n.getNextNode=function(){return null},e.getNodeCache(t,n.tId)){l(n,t).remove(),e.removeNodeCache(t,n),e.removeSelectedNode(t,n);for(var a=e.nodeChildren(t,r),i=0,d=a.length;i<d;i++)if(a[i].tId==n.tId){a.splice(i,1);break}j.setFirstNode(t,r),j.setLastNode(t,r);var s,i=a.length;if(t.data.keep.parent||0!=i){if(t.view.showLine&&i>0){var c=a[i-1],i=l(c,g.id.UL,t),d=l(c,g.id.SWITCH,t);s=l(c,g.id.ICON,t),r==o?1==a.length?j.replaceSwitchClass(c,d,g.line.ROOT):(o=l(a[0],g.id.SWITCH,t),j.replaceSwitchClass(a[0],o,g.line.ROOTS),j.replaceSwitchClass(c,d,g.line.BOTTOM)):j.replaceSwitchClass(c,d,g.line.BOTTOM),i.removeClass(g.line.LINE)}}else e.nodeIsParent(t,r,!1),r.open=!1,delete r[t.data.key.children],i=l(r,g.id.UL,t),d=l(r,g.id.SWITCH,t),s=l(r,g.id.ICON,t),j.replaceSwitchClass(r,d,g.folder.DOCU),j.replaceIcoClass(r,s,g.folder.DOCU),i.css("display","none")}},replaceIcoClass:function(e,t,n){if(t&&!e.isAjaxing&&(e=t.attr("class"),void 0!=e)){switch(e=e.split("_"),n){case g.folder.OPEN:case g.folder.CLOSE:case g.folder.DOCU:e[e.length-1]=n}t.attr("class",e.join("_"))}},replaceSwitchClass:function(e,t,n){if(t){var o=t.attr("class");if(void 0!=o){switch(o=o.split("_"),n){case g.line.ROOT:case g.line.ROOTS:case g.line.CENTER:case g.line.BOTTOM:case g.line.NOLINE:o[0]=j.makeNodeLineClassEx(e)+n;break;case g.folder.OPEN:case g.folder.CLOSE:case g.folder.DOCU:o[1]=n}t.attr("class",o.join("_")),n!==g.folder.DOCU?t.removeAttr("disabled"):t.attr("disabled","disabled")}}},selectNode:function(t,n,o){o||j.cancelPreSelectedNode(t,null,n),l(n,g.id.A,t).addClass(g.node.CURSELECTED),e.addSelectedNode(t,n),t.treeObj.trigger(g.event.SELECTED,[t.treeId,n])},setNodeFontCss:function(e,t){var n=l(t,g.id.A,e),o=j.makeNodeFontCss(e,t);o&&n.css(o)},setNodeLineIcos:function(t,n){if(n){var o=l(n,g.id.SWITCH,t),r=l(n,g.id.UL,t),a=l(n,g.id.ICON,t),i=j.makeUlLineClass(t,n);0==i.length?r.removeClass(g.line.LINE):r.addClass(i),o.attr("class",j.makeNodeLineClass(t,n)),e.nodeIsParent(t,n)?o.removeAttr("disabled"):o.attr("disabled","disabled"),a.removeAttr("style"),a.attr("style",j.makeNodeIcoStyle(t,n)),a.attr("class",j.makeNodeIcoClass(t,n))}},setNodeName:function(t,n){var o=e.nodeTitle(t,n),r=l(n,g.id.SPAN,t);r.empty(),t.view.nameIsHTML?r.html(e.nodeName(t,n)):r.text(e.nodeName(t,n)),h.apply(t.view.showTitle,[t.treeId,n],t.view.showTitle)&&l(n,g.id.A,t).attr("title",o?o:"")},setNodeTarget:function(e,t){l(t,g.id.A,e).attr("target",j.makeNodeTarget(t))},setNodeUrl:function(e,t){var n=l(t,g.id.A,e),o=j.makeNodeUrl(e,t);null==o||0==o.length?n.removeAttr("href"):n.attr("href",o)},switchNode:function(e,t){t.open||!h.canAsync(e,t)?j.expandCollapseNode(e,t,!t.open):e.async.enable?j.asyncNode(e,t)||j.expandCollapseNode(e,t,!t.open):t&&j.expandCollapseNode(e,t,!t.open)}};r.fn.zTree={consts:{className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch",NAME:"node_name"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove",SELECTED:"ztree_selected",UNSELECTED:"ztree_unselected"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_z:{tools:h,view:j,event:n,data:e},getZTreeObj:function(t){return(t=e.getZTreeTools(t))?t:null},destroy:function(n){if(n&&n.length>0)j.destroy(e.getSetting(n));else for(var o in t)j.destroy(t[o])},init:function(o,a,i){var d=h.clone(P);r.extend(!0,d,a),d.treeId=o.attr("id"),d.treeObj=o,d.treeObj.empty(),t[d.treeId]=d,"undefined"==typeof document.body.style.maxHeight&&(d.view.expandSpeed=""),e.initRoot(d),o=e.getRoot(d),i=i?h.clone(h.isArray(i)?i:[i]):[],d.data.simpleData.enable?e.nodeChildren(d,o,e.transformTozTreeFormat(d,i)):e.nodeChildren(d,o,i),e.initCache(d),n.unbindTree(d),n.bindTree(d),n.unbindEvent(d),n.bindEvent(d);var s={setting:d,addNodes:function(t,n,o,r){function a(){j.addNodes(d,t,n,l,1==r)}t||(t=null);var i=e.nodeIsParent(d,t);if(t&&!i&&d.data.keep.leaf)return null;if(i=parseInt(n,10),isNaN(i)?(r=!!o,o=n,n=-1):n=i,!o)return null;var l=h.clone(h.isArray(o)?o:[o]);return h.canAsync(d,t)?j.asyncNode(d,t,r,a):a(),l},cancelSelectedNode:function(e){j.cancelPreSelectedNode(d,e)},destroy:function(){j.destroy(d)},expandAll:function(e){return e=!!e,j.expandCollapseSonNode(d,null,e,!0),e},expandNode:function(t,n,o,r,a){function i(){var e=l(t,d).get(0);e&&r!==!1&&j.scrollIntoView(d,e)}return t&&e.nodeIsParent(d,t)?(n!==!0&&n!==!1&&(n=!t.open),(a=!!a)&&n&&0==h.apply(d.callback.beforeExpand,[d.treeId,t],!0)?null:a&&!n&&0==h.apply(d.callback.beforeCollapse,[d.treeId,t],!0)?null:(n&&t.parentTId&&j.expandCollapseParentNode(d,t.getParentNode(),n,!1),n!==t.open||o?(e.getRoot(d).expandTriggerFlag=a,!h.canAsync(d,t)&&o?j.expandCollapseSonNode(d,t,n,!0,i):(t.open=!n,j.switchNode(this.setting,t),i()),n):null)):null},getNodes:function(){return e.getNodes(d)},getNodeByParam:function(t,n,o){return t?e.getNodeByParam(d,o?e.nodeChildren(d,o):e.getNodes(d),t,n):null},getNodeByTId:function(t){return e.getNodeCache(d,t)},getNodesByParam:function(t,n,o){return t?e.getNodesByParam(d,o?e.nodeChildren(d,o):e.getNodes(d),t,n):null},getNodesByParamFuzzy:function(t,n,o){return t?e.getNodesByParamFuzzy(d,o?e.nodeChildren(d,o):e.getNodes(d),t,n):null},getNodesByFilter:function(t,n,o,r){return n=!!n,t&&"function"==typeof t?e.getNodesByFilter(d,o?e.nodeChildren(d,o):e.getNodes(d),t,n,r):n?null:[]},getNodeIndex:function(t){if(!t)return null;for(var n=t.parentTId?t.getParentNode():e.getRoot(d),n=e.nodeChildren(d,n),o=0,r=n.length;o<r;o++)if(n[o]==t)return o;return-1},getSelectedNodes:function(){for(var t=[],n=e.getRoot(d).curSelectedList,o=0,r=n.length;o<r;o++)t.push(n[o]);return t},isSelectedNode:function(t){return e.isSelectedNode(d,t)},reAsyncChildNodesPromise:function(e,t,n){return new Promise(function(o,r){try{s.reAsyncChildNodes(e,t,n,function(){o(e)})}catch(a){r(a)}})},reAsyncChildNodes:function(t,n,o,r){if(this.setting.async.enable){var a=!t;if(a&&(t=e.getRoot(d)),"refresh"==n){for(var n=e.nodeChildren(d,t),i=0,s=n?n.length:0;i<s;i++)e.removeNodeCache(d,n[i]);e.removeSelectedNode(d),e.nodeChildren(d,t,[]),a?this.setting.treeObj.empty():l(t,g.id.UL,d).empty()}j.asyncNode(this.setting,a?null:t,!!o,r)}},refresh:function(){this.setting.treeObj.empty();var t=e.getRoot(d),n=e.nodeChildren(d,t);e.initRoot(d),e.nodeChildren(d,t,n),e.initCache(d),j.createNodes(d,0,e.nodeChildren(d,t),null,-1)},removeChildNodes:function(t){if(!t)return null;var n=e.nodeChildren(d,t);return j.removeChildNodes(d,t),n?n:null},removeNode:function(e,t){e&&(t=!!t,t&&0==h.apply(d.callback.beforeRemove,[d.treeId,e],!0)||(j.removeNode(d,e),t&&this.setting.treeObj.trigger(g.event.REMOVE,[d.treeId,e])))},selectNode:function(e,t,n){function o(){if(!n){var t=l(e,d).get(0);j.scrollIntoView(d,t)}}if(e&&h.uCanDo(d)){if(t=d.view.selectedMulti&&t,e.parentTId)j.expandCollapseParentNode(d,e.getParentNode(),!0,!1,o);else if(!n)try{l(e,d).focus().blur()}catch(r){}j.selectNode(d,e,t)}},transformTozTreeNodes:function(t){return e.transformTozTreeFormat(d,t)},transformToArray:function(t){return e.transformToArrayFormat(d,t)},updateNode:function(e){e&&l(e,d).get(0)&&h.uCanDo(d)&&(j.setNodeName(d,e),j.setNodeTarget(d,e),j.setNodeUrl(d,e),j.setNodeLineIcos(d,e),j.setNodeFontCss(d,e));
}};return o.treeTools=s,e.setZTreeTools(d,s),(i=e.nodeChildren(d,o))&&i.length>0?j.createNodes(d,0,i,null,-1):d.async.enable&&d.async.url&&""!==d.async.url&&j.asyncNode(d),s}};var Q=r.fn.zTree,l=h.$,g=Q.consts}(jQuery),function(e){var t,n,o,r={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},a={check:{enable:!1,autoCheckTrigger:!1,chkStyle:r.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:r.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}};t=function(e,t){if(t.chkDisabled===!0)return!1;var n=s.getSetting(e.data.treeId);if(0==i.apply(n.callback.beforeCheck,[n.treeId,t],!0))return!0;var o=s.nodeChecked(n,t);return s.nodeChecked(n,t,!o),l.checkNodeRelation(n,t),o=c(t,d.id.CHECK,n),l.setChkClass(n,o,t),l.repairParentChkClassWithSelf(n,t),n.treeObj.trigger(d.event.CHECK,[e,n.treeId,t]),!0},n=function(e,t){if(t.chkDisabled===!0)return!1;var n=s.getSetting(e.data.treeId),o=c(t,d.id.CHECK,n);return t.check_Focus=!0,l.setChkClass(n,o,t),!0},o=function(e,t){if(t.chkDisabled===!0)return!1;var n=s.getSetting(e.data.treeId),o=c(t,d.id.CHECK,n);return t.check_Focus=!1,l.setChkClass(n,o,t),!0},e.extend(!0,e.fn.zTree.consts,r),e.extend(!0,e.fn.zTree._z,{tools:{},view:{checkNodeRelation:function(e,t){var n,o,r;if(o=d.radio,n=s.nodeChecked(e,t),e.check.chkStyle==o.STYLE){var a=s.getRadioCheckedList(e);if(n)if(e.check.radioType==o.TYPE_ALL){for(o=a.length-1;o>=0;o--){n=a[o];var i=s.nodeChecked(e,n);i&&n!=t&&(s.nodeChecked(e,n,!1),a.splice(o,1),l.setChkClass(e,c(n,d.id.CHECK,e),n),n.parentTId!=t.parentTId&&l.repairParentChkClassWithSelf(e,n))}a.push(t)}else for(a=t.parentTId?t.getParentNode():s.getRoot(e),a=s.nodeChildren(e,a),o=0,r=a.length;o<r;o++)n=a[o],(i=s.nodeChecked(e,n))&&n!=t&&(s.nodeChecked(e,n,!1),l.setChkClass(e,c(n,d.id.CHECK,e),n));else if(e.check.radioType==o.TYPE_ALL)for(o=0,r=a.length;o<r;o++)if(t==a[o]){a.splice(o,1);break}}else a=s.nodeChildren(e,t),n&&(!a||0==a.length||e.check.chkboxType.Y.indexOf("s")>-1)&&l.setSonNodeCheckBox(e,t,!0),!n&&(!a||0==a.length||e.check.chkboxType.N.indexOf("s")>-1)&&l.setSonNodeCheckBox(e,t,!1),n&&e.check.chkboxType.Y.indexOf("p")>-1&&l.setParentNodeCheckBox(e,t,!0),!n&&e.check.chkboxType.N.indexOf("p")>-1&&l.setParentNodeCheckBox(e,t,!1)},makeChkClass:function(e,t){var n=d.checkbox,o=d.radio,r="",a=s.nodeChecked(e,t),r=t.chkDisabled===!0?n.DISABLED:t.halfCheck?n.PART:e.check.chkStyle==o.STYLE?t.check_Child_State<1?n.FULL:n.PART:a?2===t.check_Child_State||t.check_Child_State===-1?n.FULL:n.PART:t.check_Child_State<1?n.FULL:n.PART,o=e.check.chkStyle+"_"+(a?n.TRUE:n.FALSE)+"_"+r,o=t.check_Focus&&t.chkDisabled!==!0?o+"_"+n.FOCUS:o;return d.className.BUTTON+" "+n.DEFAULT+" "+o},repairAllChk:function(e,t){if(e.check.enable&&e.check.chkStyle===d.checkbox.STYLE)for(var n=s.getRoot(e),n=s.nodeChildren(e,n),o=0,r=n.length;o<r;o++){var a=n[o];a.nocheck!==!0&&a.chkDisabled!==!0&&s.nodeChecked(e,a,t),l.setSonNodeCheckBox(e,a,t)}},repairChkClass:function(e,t){if(t&&(s.makeChkFlag(e,t),t.nocheck!==!0)){var n=c(t,d.id.CHECK,e);l.setChkClass(e,n,t)}},repairParentChkClass:function(e,t){if(t&&t.parentTId){var n=t.getParentNode();l.repairChkClass(e,n),l.repairParentChkClass(e,n)}},repairParentChkClassWithSelf:function(e,t){if(t){var n=s.nodeChildren(e,t);n&&n.length>0?l.repairParentChkClass(e,n[0]):l.repairParentChkClass(e,t)}},repairSonChkDisabled:function(e,t,n,o){if(t&&(t.chkDisabled!=n&&(t.chkDisabled=n),l.repairChkClass(e,t),(t=s.nodeChildren(e,t))&&o))for(var r=0,a=t.length;r<a;r++)l.repairSonChkDisabled(e,t[r],n,o)},repairParentChkDisabled:function(e,t,n,o){t&&(t.chkDisabled!=n&&o&&(t.chkDisabled=n),l.repairChkClass(e,t),l.repairParentChkDisabled(e,t.getParentNode(),n,o))},setChkClass:function(e,t,n){t&&(n.nocheck===!0?t.hide():t.show(),t.attr("class",l.makeChkClass(e,n)))},setParentNodeCheckBox:function(e,t,n,o){var r=c(t,d.id.CHECK,e);if(o||(o=t),s.makeChkFlag(e,t),t.nocheck!==!0&&t.chkDisabled!==!0&&(s.nodeChecked(e,t,n),l.setChkClass(e,r,t),e.check.autoCheckTrigger&&t!=o&&e.treeObj.trigger(d.event.CHECK,[null,e.treeId,t])),t.parentTId){if(r=!0,!n)for(var a=s.nodeChildren(e,t.getParentNode()),i=0,u=a.length;i<u;i++){var p=a[i],h=s.nodeChecked(e,p);if(p.nocheck!==!0&&p.chkDisabled!==!0&&h||(p.nocheck===!0||p.chkDisabled===!0)&&p.check_Child_State>0){r=!1;break}}r&&l.setParentNodeCheckBox(e,t.getParentNode(),n,o)}},setSonNodeCheckBox:function(e,t,n,o){if(t){var r=c(t,d.id.CHECK,e);o||(o=t);var a=!1,i=s.nodeChildren(e,t);if(i)for(var u=0,p=i.length;u<p;u++){var h=i[u];l.setSonNodeCheckBox(e,h,n,o),h.chkDisabled===!0&&(a=!0)}t!=s.getRoot(e)&&t.chkDisabled!==!0&&(a&&t.nocheck!==!0&&s.makeChkFlag(e,t),t.nocheck!==!0&&t.chkDisabled!==!0?(s.nodeChecked(e,t,n),a||(t.check_Child_State=i&&i.length>0?n?2:0:-1)):t.check_Child_State=-1,l.setChkClass(e,r,t),e.check.autoCheckTrigger&&t!=o&&t.nocheck!==!0&&t.chkDisabled!==!0&&e.treeObj.trigger(d.event.CHECK,[null,e.treeId,t]))}}},event:{},data:{getRadioCheckedList:function(e){for(var t=s.getRoot(e).radioCheckedList,n=0,o=t.length;n<o;n++)s.getNodeCache(e,t[n].tId)||(t.splice(n,1),n--,o--);return t},getCheckStatus:function(e,t){if(!e.check.enable||t.nocheck||t.chkDisabled)return null;var n=s.nodeChecked(e,t);return{checked:n,half:t.halfCheck?t.halfCheck:e.check.chkStyle==d.radio.STYLE?2===t.check_Child_State:n?t.check_Child_State>-1&&t.check_Child_State<2:t.check_Child_State>0}},getTreeCheckedNodes:function(e,t,n,o){if(!t)return[];for(var r=n&&e.check.chkStyle==d.radio.STYLE&&e.check.radioType==d.radio.TYPE_ALL,o=o?o:[],a=0,i=t.length;a<i;a++){var l=t[a],c=s.nodeChildren(e,l),u=s.nodeChecked(e,l);if(l.nocheck!==!0&&l.chkDisabled!==!0&&u==n&&(o.push(l),r))break;if(s.getTreeCheckedNodes(e,c,n,o),r&&o.length>0)break}return o},getTreeChangeCheckedNodes:function(e,t,n){if(!t)return[];for(var n=n?n:[],o=0,r=t.length;o<r;o++){var a=t[o],i=s.nodeChildren(e,a),d=s.nodeChecked(e,a);a.nocheck!==!0&&a.chkDisabled!==!0&&d!=a.checkedOld&&n.push(a),s.getTreeChangeCheckedNodes(e,i,n)}return n},makeChkFlag:function(e,t){if(t){var n=-1,o=s.nodeChildren(e,t);if(o)for(var r=0,a=o.length;r<a;r++){var i=o[r],l=s.nodeChecked(e,i),c=-1;if(e.check.chkStyle==d.radio.STYLE){if(c=i.nocheck===!0||i.chkDisabled===!0?i.check_Child_State:i.halfCheck===!0?2:l?2:i.check_Child_State>0?2:0,2==c){n=2;break}0==c&&(n=0)}else if(e.check.chkStyle==d.checkbox.STYLE){if(c=i.nocheck===!0||i.chkDisabled===!0?i.check_Child_State:i.halfCheck===!0?1:l?i.check_Child_State===-1||2===i.check_Child_State?2:1:i.check_Child_State>0?1:0,1===c){n=1;break}if(2===c&&n>-1&&r>0&&c!==n){n=1;break}if(2===n&&c>-1&&c<2){n=1;break}c>-1&&(n=c)}}t.check_Child_State=n}}}});var e=e.fn.zTree,i=e._z.tools,d=e.consts,l=e._z.view,s=e._z.data,c=i.$;s.nodeChecked=function(e,t,n){return!!t&&(e=e.data.key.checked,"undefined"!=typeof n&&("string"==typeof n&&(n=i.eqs(n,"true")),t[e]=!!n),t[e])},s.exSetting(a),s.addInitBind(function(e){e.treeObj.bind(d.event.CHECK,function(t,n,o,r){t.srcEvent=n,i.apply(e.callback.onCheck,[t,o,r])})}),s.addInitUnBind(function(e){e.treeObj.unbind(d.event.CHECK)}),s.addInitCache(function(){}),s.addInitNode(function(e,t,n,o){n&&(t=s.nodeChecked(e,n),t=s.nodeChecked(e,n,t),n.checkedOld=t,"string"==typeof n.nocheck&&(n.nocheck=i.eqs(n.nocheck,"true")),n.nocheck=!!n.nocheck||e.check.nocheckInherit&&o&&!!o.nocheck,"string"==typeof n.chkDisabled&&(n.chkDisabled=i.eqs(n.chkDisabled,"true")),n.chkDisabled=!!n.chkDisabled||e.check.chkDisabledInherit&&o&&!!o.chkDisabled,"string"==typeof n.halfCheck&&(n.halfCheck=i.eqs(n.halfCheck,"true")),n.halfCheck=!!n.halfCheck,n.check_Child_State=-1,n.check_Focus=!1,n.getCheckStatus=function(){return s.getCheckStatus(e,n)},e.check.chkStyle==d.radio.STYLE&&e.check.radioType==d.radio.TYPE_ALL&&t&&s.getRoot(e).radioCheckedList.push(n))}),s.addInitProxy(function(e){var r=e.target,a=s.getSetting(e.data.treeId),l="",c=null,u="",p=null;if(i.eqs(e.type,"mouseover")?a.check.enable&&i.eqs(r.tagName,"span")&&null!==r.getAttribute("treeNode"+d.id.CHECK)&&(l=i.getNodeMainDom(r).id,u="mouseoverCheck"):i.eqs(e.type,"mouseout")?a.check.enable&&i.eqs(r.tagName,"span")&&null!==r.getAttribute("treeNode"+d.id.CHECK)&&(l=i.getNodeMainDom(r).id,u="mouseoutCheck"):i.eqs(e.type,"click")&&a.check.enable&&i.eqs(r.tagName,"span")&&null!==r.getAttribute("treeNode"+d.id.CHECK)&&(l=i.getNodeMainDom(r).id,u="checkNode"),l.length>0)switch(c=s.getNodeCache(a,l),u){case"checkNode":p=t;break;case"mouseoverCheck":p=n;break;case"mouseoutCheck":p=o}return{stop:"checkNode"===u,node:c,nodeEventType:u,nodeEventCallback:p,treeEventType:"",treeEventCallback:null}},!0),s.addInitRoot(function(e){s.getRoot(e).radioCheckedList=[]}),s.addBeforeA(function(e,t,n){e.check.enable&&(s.makeChkFlag(e,t),n.push("<span ID='",t.tId,d.id.CHECK,"' class='",l.makeChkClass(e,t),"' treeNode",d.id.CHECK,t.nocheck===!0?" style='display:none;'":"","></span>"))}),s.addZTreeTools(function(e,t){t.checkNode=function(t,n,o,r){var a=s.nodeChecked(e,t);t.chkDisabled===!0||(n!==!0&&n!==!1&&(n=!a),r=!!r,a===n&&!o||r&&0==i.apply(this.setting.callback.beforeCheck,[this.setting.treeId,t],!0)||!i.uCanDo(this.setting)||!this.setting.check.enable||t.nocheck===!0)||(s.nodeChecked(e,t,n),n=c(t,d.id.CHECK,this.setting),(o||this.setting.check.chkStyle===d.radio.STYLE)&&l.checkNodeRelation(this.setting,t),l.setChkClass(this.setting,n,t),l.repairParentChkClassWithSelf(this.setting,t),r&&this.setting.treeObj.trigger(d.event.CHECK,[null,this.setting.treeId,t]))},t.checkAllNodes=function(e){l.repairAllChk(this.setting,!!e)},t.getCheckedNodes=function(t){var t=t!==!1,n=s.nodeChildren(e,s.getRoot(this.setting));return s.getTreeCheckedNodes(this.setting,n,t)},t.getChangeCheckedNodes=function(){var t=s.nodeChildren(e,s.getRoot(this.setting));return s.getTreeChangeCheckedNodes(this.setting,t)},t.setChkDisabled=function(e,t,n,o){t=!!t,n=!!n,l.repairSonChkDisabled(this.setting,e,t,!!o),l.repairParentChkDisabled(this.setting,e.getParentNode(),t,n)};var n=t.updateNode;t.updateNode=function(e,o){if(n&&n.apply(t,arguments),e&&this.setting.check.enable&&c(e,this.setting).get(0)&&i.uCanDo(this.setting)){var r=c(e,d.id.CHECK,this.setting);(1==o||this.setting.check.chkStyle===d.radio.STYLE)&&l.checkNodeRelation(this.setting,e),l.setChkClass(this.setting,r,e),l.repairParentChkClassWithSelf(this.setting,e)}}});var u=l.createNodes;l.createNodes=function(e,t,n,o,r){u&&u.apply(l,arguments),n&&l.repairParentChkClassWithSelf(e,o)};var p=l.removeNode;l.removeNode=function(e,t){var n=t.getParentNode();p&&p.apply(l,arguments),t&&n&&(l.repairChkClass(e,n),l.repairParentChkClass(e,n))};var h=l.appendNodes;l.appendNodes=function(e,t,n,o,r,a,i){var d="";return h&&(d=h.apply(l,arguments)),o&&s.makeChkFlag(e,o),d}}(jQuery),function(e){var t={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},n={onHoverOverNode:function(e,t){var o=d.getSetting(e.data.treeId),r=d.getRoot(o);r.curHoverNode!=t&&n.onHoverOutNode(e),r.curHoverNode=t,i.addHoverDom(o,t)},onHoverOutNode:function(e){var e=d.getSetting(e.data.treeId),t=d.getRoot(e);t.curHoverNode&&!d.isSelectedNode(e,t.curHoverNode)&&(i.removeTreeDom(e,t.curHoverNode),t.curHoverNode=null)},onMousedownNode:function(n,o){function s(n){if(0==f.dragFlag&&Math.abs(R-n.clientX)<g.edit.drag.minMoveSize&&Math.abs(j-n.clientY)<g.edit.drag.minMoveSize)return!0;var o,s,u,p;if(x.css("cursor","pointer"),0==f.dragFlag){if(0==r.apply(g.callback.beforeDrag,[g.treeId,C],!0))return c(n),!0;for(o=0,s=C.length;o<s;o++)0==o&&(f.dragNodeShowBefore=[]),u=C[o],d.nodeIsParent(g,u)&&u.open?(i.expandCollapseNode(g,u,!u.open),f.dragNodeShowBefore[u.tId]=!0):f.dragNodeShowBefore[u.tId]=!1;f.dragFlag=1,N.showHoverDom=!1,r.showIfameMask(g,!0),p=!0;var h=-1;if(C.length>1){var v=C[0].parentTId?d.nodeChildren(g,C[0].getParentNode()):d.getNodes(g);for(u=[],o=0,s=v.length;o<s;o++)if(void 0!==f.dragNodeShowBefore[v[o].tId]&&(p&&h>-1&&h+1!==o&&(p=!1),u.push(v[o]),h=o),C.length===u.length){C=u;break}}for(p&&(T=C[0].getPreNode(),E=C[C.length-1].getNextNode()),k=l("<ul class='zTreeDragUL'></ul>",g),o=0,s=C.length;o<s;o++)u=C[o],u.editNameFlag=!1,i.selectNode(g,u,o>0),i.removeTreeDom(g,u),o>g.edit.drag.maxShowNodeNum-1||(p=l("<li id='"+u.tId+"_tmp'></li>",g),p.append(l(u,a.id.A,g).clone()),p.css("padding","0"),p.children("#"+u.tId+a.id.A).removeClass(a.node.CURSELECTED),k.append(p),o==g.edit.drag.maxShowNodeNum-1&&(p=l("<li id='"+u.tId+"_moretmp'><a>  ...  </a></li>",g),k.append(p)));k.attr("id",C[0].tId+a.id.UL+"_tmp"),k.addClass(g.treeObj.attr("class")),k.appendTo(x),m=l("<span class='tmpzTreeMove_arrow'></span>",g),m.attr("id","zTreeMove_arrow_tmp"),m.appendTo(x),g.treeObj.trigger(a.event.DRAG,[n,g.treeId,C])}if(1==f.dragFlag){y&&m.attr("id")==n.target.id&&w&&n.clientX+I.scrollLeft()+2>e("#"+w+a.id.A,y).offset().left?(u=e("#"+w+a.id.A,y),n.target=u.length>0?u.get(0):n.target):y&&(y.removeClass(a.node.TMPTARGET_TREE),w&&e("#"+w+a.id.A,y).removeClass(a.node.TMPTARGET_NODE+"_"+a.move.TYPE_PREV).removeClass(a.node.TMPTARGET_NODE+"_"+t.move.TYPE_NEXT).removeClass(a.node.TMPTARGET_NODE+"_"+t.move.TYPE_INNER)),w=y=null,S=!1,_=g,u=d.getSettings();for(var b in u)u[b].treeId&&u[b].edit.enable&&u[b].treeId!=g.treeId&&(n.target.id==u[b].treeId||e(n.target).parents("#"+u[b].treeId).length>0)&&(S=!0,_=u[b]);b=I.scrollTop(),p=I.scrollLeft(),h=_.treeObj.offset(),o=_.treeObj.get(0).scrollHeight,u=_.treeObj.get(0).scrollWidth,s=n.clientY+b-h.top;var P=_.treeObj.height()+h.top-n.clientY-b,A=n.clientX+p-h.left,M=_.treeObj.width()+h.left-n.clientX-p,h=s<g.edit.drag.borderMax&&s>g.edit.drag.borderMin,v=P<g.edit.drag.borderMax&&P>g.edit.drag.borderMin,F=A<g.edit.drag.borderMax&&A>g.edit.drag.borderMin,H=M<g.edit.drag.borderMax&&M>g.edit.drag.borderMin,P=s>g.edit.drag.borderMin&&P>g.edit.drag.borderMin&&A>g.edit.drag.borderMin&&M>g.edit.drag.borderMin,A=h&&_.treeObj.scrollTop()<=0,M=v&&_.treeObj.scrollTop()+_.treeObj.height()+10>=o,B=F&&_.treeObj.scrollLeft()<=0,U=H&&_.treeObj.scrollLeft()+_.treeObj.width()+10>=u;if(n.target&&r.isChildOrSelf(n.target,_.treeId)){for(var Y=n.target;Y&&Y.tagName&&!r.eqs(Y.tagName,"li")&&Y.id!=_.treeId;)Y=Y.parentNode;var K=!0;for(o=0,s=C.length;o<s;o++){if(u=C[o],Y.id===u.tId){K=!1;break}if(l(u,g).find("#"+Y.id).length>0){K=!1;break}}K&&n.target&&r.isChildOrSelf(n.target,Y.id+a.id.A)&&(y=e(Y),w=Y.id)}if(u=C[0],P&&r.isChildOrSelf(n.target,_.treeId)&&(!y&&(n.target.id==_.treeId||A||M||B||U)&&(S||!S&&u.parentTId)&&(y=_.treeObj),h?_.treeObj.scrollTop(_.treeObj.scrollTop()-10):v&&_.treeObj.scrollTop(_.treeObj.scrollTop()+10),F?_.treeObj.scrollLeft(_.treeObj.scrollLeft()-10):H&&_.treeObj.scrollLeft(_.treeObj.scrollLeft()+10),y&&y!=_.treeObj&&y.offset().left<_.treeObj.offset().left&&_.treeObj.scrollLeft(_.treeObj.scrollLeft()+y.offset().left-_.treeObj.offset().left)),k.css({top:n.clientY+b+3+"px",left:n.clientX+p+3+"px"}),o=p=0,y&&y.attr("id")!=_.treeId){var V=null==w?null:d.getNodeCache(_,w),h=(n.ctrlKey||n.metaKey)&&g.edit.drag.isMove&&g.edit.drag.isCopy||!g.edit.drag.isMove&&g.edit.drag.isCopy;s=!(!T||w!==T.tId),F=!(!E||w!==E.tId),v=u.parentTId&&u.parentTId==w,u=(h||!F)&&r.apply(_.edit.drag.prev,[_.treeId,C,V],!!_.edit.drag.prev),s=(h||!s)&&r.apply(_.edit.drag.next,[_.treeId,C,V],!!_.edit.drag.next),h=(h||!v)&&!(_.data.keep.leaf&&!d.nodeIsParent(g,V))&&r.apply(_.edit.drag.inner,[_.treeId,C,V],!!_.edit.drag.inner),v=function(){y=null,w="",D=a.move.TYPE_INNER,m.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)},u||s||h?(F=e("#"+w+a.id.A,y),H=V.isLastNode?null:e("#"+V.getNextNode().tId+a.id.A,y.next()),P=F.offset().top,A=F.offset().left,M=u?h?.25:s?.5:1:-1,B=s?h?.75:u?.5:0:-1,b=(n.clientY+b-P)/F.height(),(1==M||b<=M&&b>=-.2)&&u?(p=1-m.width(),o=P-m.height()/2,D=a.move.TYPE_PREV):(0==B||b>=B&&b<=1.2)&&s?(p=1-m.width(),o=null==H||d.nodeIsParent(g,V)&&V.open?P+F.height()-m.height()/2:H.offset().top-m.height()/2,D=a.move.TYPE_NEXT):h?(p=5-m.width(),o=P,D=a.move.TYPE_INNER):v(),y&&(m.css({display:"block",top:o+"px",left:A+p+"px"}),F.addClass(a.node.TMPTARGET_NODE+"_"+D),L==w&&O==D||(z=(new Date).getTime()),V&&d.nodeIsParent(g,V)&&D==a.move.TYPE_INNER&&(b=!0,window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==V.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===V.tId&&(b=!1),b)&&(window.zTreeMoveTimer=setTimeout(function(){D==a.move.TYPE_INNER&&V&&d.nodeIsParent(g,V)&&!V.open&&(new Date).getTime()-z>_.edit.drag.autoOpenTime&&r.apply(_.callback.beforeDragOpen,[_.treeId,V],!0)&&(i.switchNode(_,V),_.edit.drag.autoExpandTrigger&&_.treeObj.trigger(a.event.EXPAND,[_.treeId,V]))},_.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=V.tId))):v()}else D=a.move.TYPE_INNER,y&&r.apply(_.edit.drag.inner,[_.treeId,C,null],!!_.edit.drag.inner)?y.addClass(a.node.TMPTARGET_TREE):y=null,m.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);L=w,O=D,g.treeObj.trigger(a.event.DRAGMOVE,[n,g.treeId,C])}return!1}function c(n){if(window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null),O=L=null,I.unbind("mousemove",s),I.unbind("mouseup",c),I.unbind("selectstart",u),x.css("cursor",""),y&&(y.removeClass(a.node.TMPTARGET_TREE),w&&e("#"+w+a.id.A,y).removeClass(a.node.TMPTARGET_NODE+"_"+a.move.TYPE_PREV).removeClass(a.node.TMPTARGET_NODE+"_"+t.move.TYPE_NEXT).removeClass(a.node.TMPTARGET_NODE+"_"+t.move.TYPE_INNER)),r.showIfameMask(g,!1),N.showHoverDom=!0,0!=f.dragFlag){f.dragFlag=0;var o,p,h;for(o=0,p=C.length;o<p;o++)h=C[o],d.nodeIsParent(g,h)&&f.dragNodeShowBefore[h.tId]&&!h.open&&(i.expandCollapseNode(g,h,!h.open),delete f.dragNodeShowBefore[h.tId]);k&&k.remove(),m&&m.remove();var v=(n.ctrlKey||n.metaKey)&&g.edit.drag.isMove&&g.edit.drag.isCopy||!g.edit.drag.isMove&&g.edit.drag.isCopy;if(!v&&y&&w&&C[0].parentTId&&w==C[0].parentTId&&D==a.move.TYPE_INNER&&(y=null),y){var b=null==w?null:d.getNodeCache(_,w);if(0==r.apply(g.callback.beforeDrop,[_.treeId,C,b,D,v],!0))i.selectNodes(P,C);else{var T=v?r.clone(C):C;o=function E(){if(S){if(!v)for(var E=0,e=C.length;E<e;E++)i.removeNode(g,C[E]);D==a.move.TYPE_INNER?i.addNodes(_,b,-1,T):i.addNodes(_,b.getParentNode(),D==a.move.TYPE_PREV?b.getIndex():b.getIndex()+1,T)}else if(v&&D==a.move.TYPE_INNER)i.addNodes(_,b,-1,T);else if(v)i.addNodes(_,b.getParentNode(),D==a.move.TYPE_PREV?b.getIndex():b.getIndex()+1,T);else if(D!=a.move.TYPE_NEXT)for(E=0,e=T.length;E<e;E++)i.moveNode(_,b,T[E],D,!1);else for(E=-1,e=T.length-1;E<e;e--)i.moveNode(_,b,T[e],D,!1);i.selectNodes(_,T),E=l(T[0],g).get(0),i.scrollIntoView(g,E),g.treeObj.trigger(a.event.DROP,[n,_.treeId,T,b,D,v])},D==a.move.TYPE_INNER&&r.canAsync(_,b)?i.asyncNode(_,b,!1,o):o()}}else i.selectNodes(P,C),g.treeObj.trigger(a.event.DROP,[n,g.treeId,C,null,null,null])}}function u(){return!1}var p,h,g=d.getSetting(n.data.treeId),f=d.getRoot(g),N=d.getRoots();if(2==n.button||!g.edit.enable||!g.edit.drag.isCopy&&!g.edit.drag.isMove)return!0;var v=n.target,b=d.getRoot(g).curSelectedList,C=[];if(d.isSelectedNode(g,o))for(p=0,h=b.length;p<h;p++){if(b[p].editNameFlag&&r.eqs(v.tagName,"input")&&null!==v.getAttribute("treeNode"+a.id.INPUT))return!0;if(C.push(b[p]),C[0].parentTId!==b[p].parentTId){C=[o];break}}else C=[o];i.editNodeBlur=!0,i.cancelCurEditNode(g);var k,m,y,T,E,I=e(g.treeObj.get(0).ownerDocument),x=e(g.treeObj.get(0).ownerDocument.body),S=!1,_=g,P=g,L=null,O=null,w=null,D=a.move.TYPE_INNER,R=n.clientX,j=n.clientY,z=(new Date).getTime();return r.uCanDo(g)&&I.bind("mousemove",s),I.bind("mouseup",c),I.bind("selectstart",u),!0}};e.extend(!0,e.fn.zTree.consts,t),e.extend(!0,e.fn.zTree._z,{tools:{getAbs:function(e){return e=e.getBoundingClientRect(),[e.left+(document.body.scrollLeft+document.documentElement.scrollLeft),e.top+(document.body.scrollTop+document.documentElement.scrollTop)]},inputFocus:function(e){e.get(0)&&(e.focus(),r.setCursorPosition(e.get(0),e.val().length))},inputSelect:function(e){e.get(0)&&(e.focus(),e.select())},setCursorPosition:function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}},showIfameMask:function(e,t){for(var n=d.getRoot(e);n.dragMaskList.length>0;)n.dragMaskList[0].remove(),n.dragMaskList.shift();if(t)for(var o=l("iframe",e),a=0,i=o.length;a<i;a++){var s=o.get(a),c=r.getAbs(s),s=l("<div id='zTreeMask_"+a+"' class='zTreeMask' style='top:"+c[1]+"px; left:"+c[0]+"px; width:"+s.offsetWidth+"px; height:"+s.offsetHeight+"px;'></div>",e);s.appendTo(l("body",e)),n.dragMaskList.push(s)}}},view:{addEditBtn:function(e,t){if(!(t.editNameFlag||l(t,a.id.EDIT,e).length>0)&&r.apply(e.edit.showRenameBtn,[e.treeId,t],e.edit.showRenameBtn)){var n=l(t,a.id.A,e),o="<span class='"+a.className.BUTTON+" edit' id='"+t.tId+a.id.EDIT+"' title='"+r.apply(e.edit.renameTitle,[e.treeId,t],e.edit.renameTitle)+"' treeNode"+a.id.EDIT+" style='display:none;'></span>";n.append(o),l(t,a.id.EDIT,e).bind("click",function(){return!(!r.uCanDo(e)||0==r.apply(e.callback.beforeEditName,[e.treeId,t],!0))&&(i.editNode(e,t),!1)}).show()}},addRemoveBtn:function(e,t){if(!(t.editNameFlag||l(t,a.id.REMOVE,e).length>0)&&r.apply(e.edit.showRemoveBtn,[e.treeId,t],e.edit.showRemoveBtn)){var n=l(t,a.id.A,e),o="<span class='"+a.className.BUTTON+" remove' id='"+t.tId+a.id.REMOVE+"' title='"+r.apply(e.edit.removeTitle,[e.treeId,t],e.edit.removeTitle)+"' treeNode"+a.id.REMOVE+" style='display:none;'></span>";n.append(o),l(t,a.id.REMOVE,e).bind("click",function(){return!(!r.uCanDo(e)||0==r.apply(e.callback.beforeRemove,[e.treeId,t],!0))&&(i.removeNode(e,t),e.treeObj.trigger(a.event.REMOVE,[e.treeId,t]),!1)}).bind("mousedown",function(){return!0}).show()}},addHoverDom:function(e,t){d.getRoots().showHoverDom&&(t.isHover=!0,e.edit.enable&&(i.addEditBtn(e,t),i.addRemoveBtn(e,t)),r.apply(e.view.addHoverDom,[e.treeId,t]))},cancelCurEditNode:function(e,t,n){var o=d.getRoot(e),s=o.curEditNode;if(s){var c=o.curEditInput,t=t?t:n?d.nodeName(e,s):c.val();if(r.apply(e.callback.beforeRename,[e.treeId,s,t,n],!0)===!1)return!1;d.nodeName(e,s,t),l(s,a.id.A,e).removeClass(a.node.CURSELECTED_EDIT),c.unbind(),i.setNodeName(e,s),s.editNameFlag=!1,o.curEditNode=null,o.curEditInput=null,i.selectNode(e,s,!1),e.treeObj.trigger(a.event.RENAME,[e.treeId,s,n])}return o.noSelection=!0},editNode:function(e,t){var n=d.getRoot(e);if(i.editNodeBlur=!1,d.isSelectedNode(e,t)&&n.curEditNode==t&&t.editNameFlag)setTimeout(function(){r.inputFocus(n.curEditInput)},0);else{t.editNameFlag=!0,i.removeTreeDom(e,t),i.cancelCurEditNode(e),i.selectNode(e,t,!1),l(t,a.id.SPAN,e).html("<input type=text class='rename' id='"+t.tId+a.id.INPUT+"' treeNode"+a.id.INPUT+" >");var o=l(t,a.id.INPUT,e);o.attr("value",d.nodeName(e,t)),e.edit.editNameSelectAll?r.inputSelect(o):r.inputFocus(o),o.bind("blur",function(){i.editNodeBlur||i.cancelCurEditNode(e)}).bind("keydown",function(t){"13"==t.keyCode?(i.editNodeBlur=!0,i.cancelCurEditNode(e)):"27"==t.keyCode&&i.cancelCurEditNode(e,null,!0)}).bind("click",function(){return!1}).bind("dblclick",function(){return!1}),l(t,a.id.A,e).addClass(a.node.CURSELECTED_EDIT),n.curEditInput=o,n.noSelection=!1,n.curEditNode=t}},moveNode:function(e,t,n,o,r,s){var c=d.getRoot(e);if(t!=n&&(!e.data.keep.leaf||!t||d.nodeIsParent(e,t)||o!=a.move.TYPE_INNER)){var u=n.parentTId?n.getParentNode():c,p=null===t||t==c;p&&null===t&&(t=c),p&&(o=a.move.TYPE_INNER),c=t.parentTId?t.getParentNode():c,o!=a.move.TYPE_PREV&&o!=a.move.TYPE_NEXT&&(o=a.move.TYPE_INNER),o==a.move.TYPE_INNER&&(p?n.parentTId=null:(d.nodeIsParent(e,t)||(d.nodeIsParent(e,t,!0),t.open=!!t.open,i.setNodeLineIcos(e,t)),n.parentTId=t.tId));var h;p?h=p=e.treeObj:(s||o!=a.move.TYPE_INNER?s||i.expandCollapseNode(e,t.getParentNode(),!0,!1):i.expandCollapseNode(e,t,!0,!1),p=l(t,e),h=l(t,a.id.UL,e),p.get(0)&&!h.get(0)&&(h=[],i.makeUlHtml(e,t,h,""),p.append(h.join(""))),h=l(t,a.id.UL,e));var g=l(n,e);g.get(0)?p.get(0)||g.remove():g=i.appendNodes(e,n.level,[n],null,-1,!1,!0).join(""),h.get(0)&&o==a.move.TYPE_INNER?h.append(g):p.get(0)&&o==a.move.TYPE_PREV?p.before(g):p.get(0)&&o==a.move.TYPE_NEXT&&p.after(g);var f;h=-1;var g=0,N=null,p=null,v=n.level,b=d.nodeChildren(e,u),C=d.nodeChildren(e,c),k=d.nodeChildren(e,t);if(n.isFirstNode)h=0,b.length>1&&(N=b[1],N.isFirstNode=!0);else if(n.isLastNode)h=b.length-1,N=b[h-1],N.isLastNode=!0;else for(c=0,f=b.length;c<f;c++)if(b[c].tId==n.tId){h=c;break}if(h>=0&&b.splice(h,1),o!=a.move.TYPE_INNER)for(c=0,f=C.length;c<f;c++)C[c].tId==t.tId&&(g=c);o==a.move.TYPE_INNER?(k||(k=d.nodeChildren(e,t,[])),k.length>0&&(p=k[k.length-1],p.isLastNode=!1),k.splice(k.length,0,n),n.isLastNode=!0,n.isFirstNode=1==k.length):t.isFirstNode&&o==a.move.TYPE_PREV?(C.splice(g,0,n),p=t,p.isFirstNode=!1,n.parentTId=t.parentTId,n.isFirstNode=!0,n.isLastNode=!1):t.isLastNode&&o==a.move.TYPE_NEXT?(C.splice(g+1,0,n),p=t,p.isLastNode=!1,n.parentTId=t.parentTId,n.isFirstNode=!1,n.isLastNode=!0):(o==a.move.TYPE_PREV?C.splice(g,0,n):C.splice(g+1,0,n),n.parentTId=t.parentTId,n.isFirstNode=!1,n.isLastNode=!1),d.fixPIdKeyValue(e,n),d.setSonNodeLevel(e,n.getParentNode(),n),i.setNodeLineIcos(e,n),i.repairNodeLevelClass(e,n,v),!e.data.keep.parent&&b.length<1?(d.nodeIsParent(e,u,!1),u.open=!1,t=l(u,a.id.UL,e),o=l(u,a.id.SWITCH,e),c=l(u,a.id.ICON,e),i.replaceSwitchClass(u,o,a.folder.DOCU),i.replaceIcoClass(u,c,a.folder.DOCU),t.css("display","none")):N&&i.setNodeLineIcos(e,N),p&&i.setNodeLineIcos(e,p),e.check&&e.check.enable&&i.repairChkClass&&(i.repairChkClass(e,u),i.repairParentChkClassWithSelf(e,u),u!=n.parent&&i.repairParentChkClassWithSelf(e,n)),s||i.expandCollapseParentNode(e,n.getParentNode(),!0,r)}},removeEditBtn:function(e,t){l(t,a.id.EDIT,e).unbind().remove()},removeRemoveBtn:function(e,t){l(t,a.id.REMOVE,e).unbind().remove()},removeTreeDom:function(e,t){t.isHover=!1,i.removeEditBtn(e,t),i.removeRemoveBtn(e,t),r.apply(e.view.removeHoverDom,[e.treeId,t])},repairNodeLevelClass:function(e,t,n){if(n!==t.level){var o=l(t,e),r=l(t,a.id.A,e),e=l(t,a.id.UL,e),n=a.className.LEVEL+n,t=a.className.LEVEL+t.level;o.removeClass(n),o.addClass(t),r.removeClass(n),r.addClass(t),e.removeClass(n),e.addClass(t)}},selectNodes:function(e,t){for(var n=0,o=t.length;n<o;n++)i.selectNode(e,t[n],n>0)}},event:{},data:{setSonNodeLevel:function(e,t,n){if(n){var o=d.nodeChildren(e,n);if(n.level=t?t.level+1:0,o)for(var t=0,r=o.length;t<r;t++)o[t]&&d.setSonNodeLevel(e,n,o[t])}}}});var o=e.fn.zTree,r=o._z.tools,a=o.consts,i=o._z.view,d=o._z.data,l=r.$;d.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}}),d.addInitBind(function(e){var t=e.treeObj,n=a.event;t.bind(n.RENAME,function(t,n,o,a){r.apply(e.callback.onRename,[t,n,o,a])}),t.bind(n.DRAG,function(t,n,o,a){r.apply(e.callback.onDrag,[n,o,a])}),t.bind(n.DRAGMOVE,function(t,n,o,a){r.apply(e.callback.onDragMove,[n,o,a])}),t.bind(n.DROP,function(t,n,o,a,i,d,l){r.apply(e.callback.onDrop,[n,o,a,i,d,l])})}),d.addInitUnBind(function(e){var e=e.treeObj,t=a.event;e.unbind(t.RENAME),e.unbind(t.DRAG),e.unbind(t.DRAGMOVE),e.unbind(t.DROP)}),d.addInitCache(function(){}),d.addInitNode(function(e,t,n){n&&(n.isHover=!1,n.editNameFlag=!1)}),d.addInitProxy(function(e){var t=e.target,o=d.getSetting(e.data.treeId),i=e.relatedTarget,l="",s=null,c="",u=null,p=null;if(r.eqs(e.type,"mouseover")?(p=r.getMDom(o,t,[{tagName:"a",attrName:"treeNode"+a.id.A}]))&&(l=r.getNodeMainDom(p).id,c="hoverOverNode"):r.eqs(e.type,"mouseout")?(p=r.getMDom(o,i,[{tagName:"a",attrName:"treeNode"+a.id.A}]),p||(l="remove",c="hoverOutNode")):r.eqs(e.type,"mousedown")&&(p=r.getMDom(o,t,[{tagName:"a",attrName:"treeNode"+a.id.A}]))&&(l=r.getNodeMainDom(p).id,c="mousedownNode"),l.length>0)switch(s=d.getNodeCache(o,l),c){case"mousedownNode":u=n.onMousedownNode;break;case"hoverOverNode":u=n.onHoverOverNode;break;case"hoverOutNode":u=n.onHoverOutNode}return{stop:!1,node:s,nodeEventType:c,nodeEventCallback:u,treeEventType:"",treeEventCallback:null}}),d.addInitRoot(function(e){var e=d.getRoot(e),t=d.getRoots();e.curEditNode=null,e.curEditInput=null,e.curHoverNode=null,e.dragFlag=0,e.dragNodeShowBefore=[],e.dragMaskList=[],t.showHoverDom=!0}),d.addZTreeTools(function(e,t){t.cancelEditName=function(e){d.getRoot(this.setting).curEditNode&&i.cancelCurEditNode(this.setting,e?e:null,!0)},t.copyNode=function(t,n,o,l){if(!n)return null;var s=d.nodeIsParent(e,t);if(t&&!s&&this.setting.data.keep.leaf&&o===a.move.TYPE_INNER)return null;var c=this,u=r.clone(n);return t||(t=null,o=a.move.TYPE_INNER),o==a.move.TYPE_INNER?(n=function(){i.addNodes(c.setting,t,-1,[u],l)},r.canAsync(this.setting,t)?i.asyncNode(this.setting,t,l,n):n()):(i.addNodes(this.setting,t.parentNode,-1,[u],l),i.moveNode(this.setting,t,u,o,!1,l)),u},t.editName=function(e){e&&e.tId&&e===d.getNodeCache(this.setting,e.tId)&&(e.parentTId&&i.expandCollapseParentNode(this.setting,e.getParentNode(),!0),i.editNode(this.setting,e))},t.moveNode=function(t,n,o,s){function c(){i.moveNode(p.setting,t,n,o,!1,s)}if(!n)return n;var u=d.nodeIsParent(e,t);if(t&&!u&&this.setting.data.keep.leaf&&o===a.move.TYPE_INNER)return null;if(t&&(n.parentTId==t.tId&&o==a.move.TYPE_INNER||l(n,this.setting).find("#"+t.tId).length>0))return null;t||(t=null);var p=this;return r.canAsync(this.setting,t)&&o===a.move.TYPE_INNER?i.asyncNode(this.setting,t,s,c):c(),n},t.setEditable=function(e){return this.setting.edit.enable=e,this.refresh()}});var s=i.cancelPreSelectedNode;i.cancelPreSelectedNode=function(e,t){for(var n=d.getRoot(e).curSelectedList,o=0,r=n.length;o<r&&(t&&t!==n[o]||(i.removeTreeDom(e,n[o]),!t));o++);s&&s.apply(i,arguments)};var c=i.createNodes;i.createNodes=function(e,t,n,o,r){c&&c.apply(i,arguments),n&&i.repairParentChkClassWithSelf&&i.repairParentChkClassWithSelf(e,o)};var u=i.makeNodeUrl;i.makeNodeUrl=function(e,t){return e.edit.enable?null:u.apply(i,arguments)};var p=i.removeNode;i.removeNode=function(e,t){var n=d.getRoot(e);n.curEditNode===t&&(n.curEditNode=null),p&&p.apply(i,arguments)};var h=i.selectNode;i.selectNode=function(e,t,n){var o=d.getRoot(e);return(!d.isSelectedNode(e,t)||o.curEditNode!=t||!t.editNameFlag)&&(h&&h.apply(i,arguments),i.addHoverDom(e,t),!0)};var g=r.uCanDo;r.uCanDo=function(e,t){var n=d.getRoot(e);return!(!t||!(r.eqs(t.type,"mouseover")||r.eqs(t.type,"mouseout")||r.eqs(t.type,"mousedown")||r.eqs(t.type,"mouseup")))||(n.curEditNode&&(i.editNodeBlur=!1,n.curEditInput.focus()),!n.curEditNode&&(!g||g.apply(i,arguments)))}}(jQuery),function(e){e.extend(!0,e.fn.zTree._z,{view:{clearOldFirstNode:function(e,t){for(var n=t.getNextNode();n;){if(n.isFirstNode){n.isFirstNode=!1,o.setNodeLineIcos(e,n);break}if(n.isLastNode)break;n=n.getNextNode()}},clearOldLastNode:function(e,t,n){for(t=t.getPreNode();t;){if(t.isLastNode){t.isLastNode=!1,n&&o.setNodeLineIcos(e,t);break}if(t.isFirstNode)break;t=t.getPreNode()}},makeDOMNodeMainBefore:function(e,t,o){t=r.isHidden(t,o),e.push("<li ",t?"style='display:none;' ":"","id='",o.tId,"' class='",n.className.LEVEL,o.level,"' tabindex='0' hidefocus='true' treenode>")},showNode:function(e,t){r.isHidden(e,t,!1),r.initShowForExCheck(e,t),a(t,e).show();
},showNodes:function(e,t,n){if(t&&0!=t.length){var a,i,d={};for(a=0,i=t.length;a<i;a++){var l=t[a];if(!d[l.parentTId]){var s=l.getParentNode();d[l.parentTId]=null===s?r.getRoot(e):l.getParentNode()}o.showNode(e,l,n)}for(var c in d)t=r.nodeChildren(e,d[c]),o.setFirstNodeForShow(e,t),o.setLastNodeForShow(e,t)}},hideNode:function(e,t){r.isHidden(e,t,!0),t.isFirstNode=!1,t.isLastNode=!1,r.initHideForExCheck(e,t),o.cancelPreSelectedNode(e,t),a(t,e).hide()},hideNodes:function(e,t,n){if(t&&0!=t.length){var a,i,d={};for(a=0,i=t.length;a<i;a++){var l=t[a];if((l.isFirstNode||l.isLastNode)&&!d[l.parentTId]){var s=l.getParentNode();d[l.parentTId]=null===s?r.getRoot(e):l.getParentNode()}o.hideNode(e,l,n)}for(var c in d)t=r.nodeChildren(e,d[c]),o.setFirstNodeForHide(e,t),o.setLastNodeForHide(e,t)}},setFirstNode:function(e,t){var n=r.nodeChildren(e,t),a=r.isHidden(e,n[0],!1);n.length>0&&!a?n[0].isFirstNode=!0:n.length>0&&o.setFirstNodeForHide(e,n)},setLastNode:function(e,t){var n=r.nodeChildren(e,t),a=r.isHidden(e,n[0]);n.length>0&&!a?n[n.length-1].isLastNode=!0:n.length>0&&o.setLastNodeForHide(e,n)},setFirstNodeForHide:function(e,t){var n,a,i;for(a=0,i=t.length;a<i&&(n=t[a],!n.isFirstNode);a++){if(!r.isHidden(e,n)&&!n.isFirstNode){n.isFirstNode=!0,o.setNodeLineIcos(e,n);break}n=null}return n},setFirstNodeForShow:function(e,t){var n,a,i,d,l;for(a=0,i=t.length;a<i;a++){n=t[a];var s=r.isHidden(e,n);if(!d&&!s&&n.isFirstNode){d=n;break}if(d||s||n.isFirstNode){if(d&&n.isFirstNode){n.isFirstNode=!1,l=n,o.setNodeLineIcos(e,n);break}}else n.isFirstNode=!0,d=n,o.setNodeLineIcos(e,n)}return{"new":d,old:l}},setLastNodeForHide:function(e,t){var n,a;for(a=t.length-1;a>=0&&(n=t[a],!n.isLastNode);a--){if(!r.isHidden(e,n)&&!n.isLastNode){n.isLastNode=!0,o.setNodeLineIcos(e,n);break}n=null}return n},setLastNodeForShow:function(e,t){var n,a,i,d;for(a=t.length-1;a>=0;a--){n=t[a];var l=r.isHidden(e,n);if(!i&&!l&&n.isLastNode){i=n;break}if(i||l||n.isLastNode){if(i&&n.isLastNode){n.isLastNode=!1,d=n,o.setNodeLineIcos(e,n);break}}else n.isLastNode=!0,i=n,o.setNodeLineIcos(e,n)}return{"new":i,old:d}}},data:{initHideForExCheck:function(e,t){r.isHidden(e,t)&&e.check&&e.check.enable&&("undefined"==typeof t._nocheck&&(t._nocheck=!!t.nocheck,t.nocheck=!0),t.check_Child_State=-1,o.repairParentChkClassWithSelf&&o.repairParentChkClassWithSelf(e,t))},initShowForExCheck:function(e,t){if(!r.isHidden(e,t)&&e.check&&e.check.enable){if("undefined"!=typeof t._nocheck&&(t.nocheck=t._nocheck,delete t._nocheck),o.setChkClass){var i=a(t,n.id.CHECK,e);o.setChkClass(e,i,t)}o.repairParentChkClassWithSelf&&o.repairParentChkClassWithSelf(e,t)}}}});var e=e.fn.zTree,t=e._z.tools,n=e.consts,o=e._z.view,r=e._z.data,a=t.$;r.isHidden=function(e,n,o){return!!n&&(e=e.data.key.isHidden,"undefined"!=typeof o&&("string"==typeof o&&(o=t.eqs(checked,"true")),n[e]=!!o),n[e])},r.exSetting({data:{key:{isHidden:"isHidden"}}}),r.addInitNode(function(e,t,n){t=r.isHidden(e,n),r.isHidden(e,n,t),r.initHideForExCheck(e,n)}),r.addBeforeA(function(){}),r.addZTreeTools(function(e,t){t.showNodes=function(t,n){o.showNodes(e,t,n)},t.showNode=function(t,n){t&&o.showNodes(e,[t],n)},t.hideNodes=function(t,n){o.hideNodes(e,t,n)},t.hideNode=function(t,n){t&&o.hideNodes(e,[t],n)};var n=t.checkNode;n&&(t.checkNode=function(o,a,i,d){(!o||!r.isHidden(e,o))&&n.apply(t,arguments)})});var i=r.initNode;r.initNode=function(e,t,n,a,d,l,s){var c=(a?a:r.getRoot(e))[e.data.key.children];r.tmpHideFirstNode=o.setFirstNodeForHide(e,c),r.tmpHideLastNode=o.setLastNodeForHide(e,c),s&&(o.setNodeLineIcos(e,r.tmpHideFirstNode),o.setNodeLineIcos(e,r.tmpHideLastNode)),d=r.tmpHideFirstNode===n,l=r.tmpHideLastNode===n,i&&i.apply(r,arguments),s&&l&&o.clearOldLastNode(e,n,s)};var d=r.makeChkFlag;d&&(r.makeChkFlag=function(e,t){(!t||!r.isHidden(e,t))&&d.apply(r,arguments)});var l=r.getTreeCheckedNodes;l&&(r.getTreeCheckedNodes=function(e,t,n,o){if(t&&t.length>0){var a=t[0].getParentNode();if(a&&r.isHidden(e,a))return[]}return l.apply(r,arguments)});var s=r.getTreeChangeCheckedNodes;s&&(r.getTreeChangeCheckedNodes=function(e,t,n){if(t&&t.length>0){var o=t[0].getParentNode();if(o&&r.isHidden(e,o))return[]}return s.apply(r,arguments)});var c=o.expandCollapseSonNode;c&&(o.expandCollapseSonNode=function(e,t,n,a,i){(!t||!r.isHidden(e,t))&&c.apply(o,arguments)});var u=o.setSonNodeCheckBox;u&&(o.setSonNodeCheckBox=function(e,t,n,a){(!t||!r.isHidden(e,t))&&u.apply(o,arguments)});var p=o.repairParentChkClassWithSelf;p&&(o.repairParentChkClassWithSelf=function(e,t){(!t||!r.isHidden(e,t))&&p.apply(o,arguments)})}(jQuery),TreeSelect.prototype.render=function(e){var t=e.elem,n=e.data,o=void 0===e.type?"GET":e.type,r=e.click,a=e.success,i=void 0===e.placeholder?"请选择":e.placeholder,d=void 0!==e.search&&e.search,l=e.style,s=(new Date).getTime(),c=e.dataList||{},u="layui-form-selected",p=void 0,h="treeSelect-input-"+s,g="layui-treeSelect-"+s,f="layui-treeSelect",N="layui-select-title-"+s,v="layui-select-title",b="layui-treeSelect-body-"+s,C="layui-treeSelect-body",k="layui-treeSelect-search-ed",m={init:function(){if(c.length>0){if(m.hideElem().input().toggleSelect().loadCss().preventEvent(),$.fn.zTree.init($("#"+b),m.setting(),c),p=$.fn.zTree.getZTreeObj(b),d&&m.searchParam(),m.configStyle(),a){var e={treeId:g,data:c};a(e)}}else $.ajax({url:n,type:o,dataType:"json",success:function(e){if(c=e,m.hideElem().input().toggleSelect().loadCss().preventEvent(),$.fn.zTree.init($("#"+b),m.setting(),e),p=$.fn.zTree.getZTreeObj(b),d&&m.searchParam(),m.configStyle(),a){var t={treeId:g,data:e};a(t)}}});return m},checkDefaultValue:function(){},setting:function y(){var y={callback:{onClick:m.onClick,onExpand:m.onExpand,onCollapse:m.onCollapse,beforeExpand:m.ztreeCallBack.beforeExpand}};return y},ztreeCallBack:{beforeExpand:function(){m.configStyle()}},onCollapse:function(){m.focusInput()},onExpand:function(){m.configStyle(),m.focusInput()},focusInput:function(){$("#"+h).focus()},onClick:function(e,n,o){var a=o.name,i=o.id,d=$("#"+N+" input");if(d.val(a),$(t).attr("value",i).val(i),$("#"+g).removeClass(u),r){var l={data:c,current:o,treeId:g};r(l)}return m},hideElem:function(){return $(t).hide(),m},input:function(){var e="";d||(e="readonly");var n='<div class="'+f+' layui-unselect layui-form-select" id="'+g+'"><div class="'+v+'" id="'+N+'"> <input type="text" id="'+h+'" placeholder="'+i+'" value="" '+e+' class="layui-input layui-unselect"><i class="layui-edge"></i></div><div class="layui-anim layui-anim-upbit" style=""><div class="'+C+' ztree" id="'+b+'"></div></div></div>';return $(t).parent().append(n),m},toggleSelect:function(){var e="#"+N;return m.event("click",e,function(e){var t=$("#"+g);t.hasClass(u)?(t.removeClass(u),$("#"+h).blur()):($(".layui-form-select").removeClass(u),t.addClass(u)),e.stopPropagation()}),$(document).click(function(){var e=$("#"+g);e.hasClass(u)&&(e.removeClass(u),$("#"+h).blur())}),m},searchParam:function(){if(d){var e="#"+h;m.fuzzySearch(e,null,!0)}},fuzzySearch:function(e,t,n){function o(e,t,o){function a(o){return o&&o.oldname&&o.oldname.length>0&&(o[d]=o.oldname),e.updateNode(o),0==t.length?(e.showNode(o),e.expandNode(o,n),!0):o[d]&&o[d].toLowerCase().indexOf(t.toLowerCase())!=-1?(e.showNode(o),!0):(e.hideNode(o),!1)}t||(t="");var i=e.getNodesByFilter(a);r(i,t)}function r(e,t){if(e&&e.length>0)if(t.length>0)$.each(e,function(e,t){var n=t.getPath();if(n&&n.length>0)for(var o=0;o<n.length-1;o++)i.showNode(n[o]),i.expandNode(n[o],!0)});else{var n=i.getNodesByParam("level","0");$.each(n,function(e,t){i.expandNode(t,!0)})}}function a(t){s&&clearTimeout(s),s=setTimeout(function(){o(i,t),$(e).focus()},500)}var i=p,d=i.setting.data.key.name;t=t!==!1,n=!!n,i.setting.view.nameIsHTML=t;var l="[\\[\\]\\\\^\\$\\.\\|\\?\\*\\+\\(\\)]";new RegExp(l,"gi");$(e).bind("input propertychange",function(){var e=$(this).val();a(e)});var s=null},checkNodes:function(e){for(var t=0;t<e.length;t++){var n=e[t],o=n.parentTId,r=n.tId;if(null!==o){$("#"+o).addClass(k);var a=p.getNodesByParam("tId",o,null);p.expandNode(a[0],!0,!1,!0)}$("#"+r).addClass(k)}},preventEvent:function(){var e="#"+g+" .layui-anim";return m.event("click",e,function(e){e.stopPropagation()}),m},loadCss:function(){var e='.ztree *{padding:0;margin:0;font-size:12px;font-family:Verdana,Arial,Helvetica,AppleGothic,sans-serif}.ztree{margin:0;padding:5px;color:#333}.ztree li{padding:0;margin:0;list-style:none;line-height:14px;text-align:left;white-space:nowrap;outline:0}.ztree li ul{margin:0;padding:0 0 0 18px}.ztree li ul.line{background:url(./img/line_conn.gif) 0 0 repeat-y;}.ztree li a{padding:1px 3px 0 0;margin:0;cursor:pointer;height:17px;color:#333;background-color:transparent;text-decoration:none;vertical-align:top;display:inline-block}.ztree li a:hover{text-decoration:underline}.ztree li a.curSelectedNode{padding-top:0px;background-color:#FFE6B0;color:black;height:16px;border:1px #FFB951 solid;opacity:0.8;}.ztree li a.curSelectedNode_Edit{padding-top:0px;background-color:#FFE6B0;color:black;height:16px;border:1px #FFB951 solid;opacity:0.8;}.ztree li a.tmpTargetNode_inner{padding-top:0px;background-color:#316AC5;color:white;height:16px;border:1px #316AC5 solid;opacity:0.8;filter:alpha(opacity=80)}.ztree li a.tmpTargetNode_prev{}.ztree li a.tmpTargetNode_next{}.ztree li a input.rename{height:14px;width:80px;padding:0;margin:0;font-size:12px;border:1px #7EC4CC solid;*border:0px}.ztree li span{line-height:16px;margin-right:2px}.ztree li span.button{line-height:0;margin:0;width:16px;height:16px;display:inline-block;vertical-align:middle;border:0 none;cursor:pointer;outline:none;background-color:transparent;background-repeat:no-repeat;background-attachment:scroll;background-image:url("./img/zTreeStandard.png");*background-image:url("./img/zTreeStandard.gif")}.ztree li span.button.chk{width:13px;height:13px;margin:0 3px 0 0;cursor:auto}.ztree li span.button.chk.checkbox_false_full{background-position:0 0}.ztree li span.button.chk.checkbox_false_full_focus{background-position:0 -14px}.ztree li span.button.chk.checkbox_false_part{background-position:0 -28px}.ztree li span.button.chk.checkbox_false_part_focus{background-position:0 -42px}.ztree li span.button.chk.checkbox_false_disable{background-position:0 -56px}.ztree li span.button.chk.checkbox_true_full{background-position:-14px 0}.ztree li span.button.chk.checkbox_true_full_focus{background-position:-14px -14px}.ztree li span.button.chk.checkbox_true_part{background-position:-14px -28px}.ztree li span.button.chk.checkbox_true_part_focus{background-position:-14px -42px}.ztree li span.button.chk.checkbox_true_disable{background-position:-14px -56px}.ztree li span.button.chk.radio_false_full{background-position:-28px 0}.ztree li span.button.chk.radio_false_full_focus{background-position:-28px -14px}.ztree li span.button.chk.radio_false_part{background-position:-28px -28px}.ztree li span.button.chk.radio_false_part_focus{background-position:-28px -42px}.ztree li span.button.chk.radio_false_disable{background-position:-28px -56px}.ztree li span.button.chk.radio_true_full{background-position:-42px 0}.ztree li span.button.chk.radio_true_full_focus{background-position:-42px -14px}.ztree li span.button.chk.radio_true_part{background-position:-42px -28px}.ztree li span.button.chk.radio_true_part_focus{background-position:-42px -42px}.ztree li span.button.chk.radio_true_disable{background-position:-42px -56px}.ztree li span.button.switch{width:18px;height:18px}.ztree li span.button.root_open{background-position:-92px -54px}.ztree li span.button.root_close{background-position:-74px -54px}.ztree li span.button.roots_open{background-position:-92px 0}.ztree li span.button.roots_close{background-position:-74px 0}.ztree li span.button.center_open{background-position:-92px -18px}.ztree li span.button.center_close{background-position:-74px -18px}.ztree li span.button.bottom_open{background-position:-92px -36px}.ztree li span.button.bottom_close{background-position:-74px -36px}.ztree li span.button.noline_open{background-position:-92px -72px}.ztree li span.button.noline_close{background-position:-74px -72px}.ztree li span.button.root_docu{background:none;}.ztree li span.button.roots_docu{background-position:-56px 0}.ztree li span.button.center_docu{background-position:-56px -18px}.ztree li span.button.bottom_docu{background-position:-56px -36px}.ztree li span.button.noline_docu{background:none;}.ztree li span.button.ico_open{margin-right:2px;background-position:-110px -16px;vertical-align:top;*vertical-align:middle}.ztree li span.button.ico_close{margin-right:2px;background-position:-110px 0;vertical-align:top;*vertical-align:middle}.ztree li span.button.ico_docu{margin-right:2px;background-position:-110px -32px;vertical-align:top;*vertical-align:middle}.ztree li span.button.edit{margin-right:2px;background-position:-110px -48px;vertical-align:top;*vertical-align:middle}.ztree li span.button.remove{margin-right:2px;background-position:-110px -64px;vertical-align:top;*vertical-align:middle}.ztree li span.button.ico_loading{margin-right:2px;background:url(./img/loading.gif) no-repeat scroll 0 0 transparent;vertical-align:top;*vertical-align:middle}ul.tmpTargetzTree{background-color:#FFE6B0;opacity:0.8;filter:alpha(opacity=80)}span.tmpzTreeMove_arrow{width:16px;height:16px;display:inline-block;padding:0;margin:2px 0 0 1px;border:0 none;position:absolute;background-color:transparent;background-repeat:no-repeat;background-attachment:scroll;background-position:-110px -80px;background-image:url("./img/zTreeStandard.png");*background-image:url("./img/zTreeStandard.gif")}ul.ztree.zTreeDragUL{margin:0;padding:0;position:absolute;width:auto;height:auto;overflow:hidden;background-color:#cfcfcf;border:1px #00B83F dotted;opacity:0.8;filter:alpha(opacity=80)}.zTreeMask{z-index:10000;background-color:#cfcfcf;opacity:0.0;filter:alpha(opacity=0);position:absolute}',t='.layui-treeSelect .ztree li span.button{font-family:layui-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:none;line-height:inherit;}.layui-treeSelect .ztree li span.button.ico_open{display:none;}.layui-treeSelect .ztree li span.button.ico_close{display:none;}.layui-treeSelect .ztree li span.button.ico_docu:before{content:"\\e621";}.layui-treeSelect .ztree li span.button.bottom_close:before,.layui-treeSelect .ztree li span.button.center_close:before,.layui-treeSelect .ztree li span.button.roots_close:before,.layui-treeSelect .ztree li span.button.root_close:before{content:"\\e623";}.layui-treeSelect .ztree li span.button.bottom_open:before,.layui-treeSelect .ztree li span.button.roots_open:before,.layui-treeSelect .ztree li span.button.center_open:before,.layui-treeSelect .ztree li span.button.root_open:before{content:"\\e625";}.layui-treeSelect .ztree li a:hover{text-decoration:none;}.layui-treeSelect .ztree *{font-size:14px;}.layui-treeSelect .ztree li{line-height:inherit;padding:2px 0;}.layui-treeSelect .ztree li span.button.switch{position:relative;top:-1px;}.layui-treeSelect .ztree li a,.ztree li span{line-height:18px;height:inherit;}.layui-treeSelect .ztree li a.curSelectedNode{color:#5FB878;background:none;border:none;height:inherit;padding-top:1px;}.layui-treeSelect .layui-anim::-webkit-scrollbar{width:6px;height:6px;background-color:#F5F5F5;}.layui-treeSelect .layui-anim::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(107,98,98,0.3);border-radius:10px;background-color:#F5F5F5;}.layui-treeSelect .layui-anim::-webkit-scrollbar-thumb{border-radius:10px;box-shadow:inset 0 0 6px rgba(107,98,98,0.3);background-color:#555;}.layui-treeSelect.layui-form-select .layui-anim{display:none;position:absolute;left:0;top:42px;padding:5px 0;z-index:9999;min-width:100%;border:1px solid #d2d2d2;max-height:300px;overflow-y:auto;background-color:#fff;border-radius:2px;box-shadow:0 2px 4px rgba(0,0,0,.12);box-sizing:border-box;}.layui-treeSelect.layui-form-selected .layui-anim{display:block;}.layui-treeSelect .ztree li ul.line{background:none;position:relative;}.layui-treeSelect .ztree li ul.line:before{content:"";height:100%;border-left:1px dotted #ece;position:absolute;left:8px;}.layui-treeSelect .ztree li .center_docu:before,.ztree li .bottom_docu::before{content:"";height:100%;border-left:1px dotted #ece;position:absolute;left:8px;}.layui-treeSelect .ztree li .center_docu::after,.ztree li .bottom_docu::after{content:"";position:absolute;left:8px;top:8px;width:8px;border-top:1px dotted #ece;}.layui-treeSelect .ztree li span.button.ico_open{display:inline-block;position:relative;top:1px;}.layui-treeSelect .ztree li span.button.ico_close{display:inline-block;position:relative;top:1px;}.layui-treeSelect .ztree li span.button.ico_open:before{content:"\\e643";}.layui-treeSelect .ztree li span.button.ico_close:before{content:"\\e63f";}';return $head=$("head"),ztreeStyle=$head.find("style[ztree]"),0===ztreeStyle.length&&$head.append($("<style ztree>").append(e).append(t)),m},configStyle:function(){void 0!=l&&void 0!=l.line&&l.line.enable||$("#"+g).find("li .center_docu,li .bottom_docu").hide(),void 0!=l&&void 0!=l.folder&&l.folder.enable||($("#"+g).find("li span.button.ico_open").hide(),$("#"+g).find("li span.button.ico_close").hide())},event:function(e,t,n){$("body").on(e,t,n)}};return m.init(),new TreeSelect},TreeSelect.prototype.refresh=function(e){var t=obj.treeObj(e);t.reAsyncChildNodes(null,"refresh")},TreeSelect.prototype.checkNode=function(e,t){var n=obj.filter(e),o=n.find(".layui-select-title input"),r=obj.treeObj(e),a=r.getNodeByParam("id",t,null),i=a.name;o.val(i),n.find("a[treenode_a]").removeClass("curSelectedNode"),obj.get(e).val(t).attr("value",t),r.selectNode(a)},TreeSelect.prototype.revokeNode=function(e,t){var n=obj.filter(e);n.find("a[treenode_a]").removeClass("curSelectedNode"),n.find(".layui-select-title input.layui-input").val(""),obj.get(e).attr("value","").val(""),obj.treeObj(e).expandAll(!1),t&&t({treeId:n.attr("id")})},TreeSelect.prototype.destroy=function(e){var t=obj.filter(e);t.remove(),obj.get(e).show()},TreeSelect.prototype.zTree=function(e){return obj.treeObj(e)};var obj={get:function(e){return e||layui.hint().error("filter 不能为空"),$("*[lay-filter="+e+"]")},filter:function(e){var t=obj.get(e),n=t.next();return n},treeObj:function(e){var t=obj.filter(e),n=t.find(".layui-treeSelect-body").attr("id"),o=$.fn.zTree.getZTreeObj(n);return o}},mod=new TreeSelect;exports(_MOD,mod)});