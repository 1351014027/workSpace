/** dms1.0-v1.0.0 ISC License By  */
 ;"use strict";layui.define(["view","table","layer","tablePlug","form"],function(e){var t=layui.$,a=layui.setter,r=layui.table,n=layui.form,o=layui.tablePlug,i=layui.layer,s={v:"1.0 dms",req:function(e){var r=e.success,n=e.error,o=a.request,i=a.response,u=function(){return a.debug?"<br><cite>URL：</cite>"+e.url:""},l=e.done;if(delete e.done,e.data=e.data||{},o.tokenName){var c="string"==typeof e.data?JSON.parse(e.data):e.data;e.data[o.tokenName]=o.tokenName in c?e.data[o.tokenName]:layui.data(a.tableName)[o.tokenName]||"",e.headers[o.tokenName]=o.tokenName in e.headers?e.headers[o.tokenName]:layui.data(a.tableName)[o.tokenName]||""}return delete e.success,delete e.error,t.ajax(t.extend({type:"post",dataType:"json",success:function(e){var t=i.statusCode;if(e[i.statusName]==t.ok)"function"==typeof l&&l(e.data);else if(e[i.statusName]==t.logout);else if(e[i.statusName]==t.error||e[i.statusName]==t.illegalAgument)s.errorMsg(e.Data);else{var a=["<cite>Error：</cite> "+(e[i.msgName]||"返回状态码异常"),u()].join("");s.errorMsg(a)}"function"==typeof r&&r(e)},error:function(e,t){if(n)return void n(e,t);var a=["请求异常，请重试<br><cite>错误信息：</cite>"+t,u()].join("");s.errorMsg(a)}},e))},errorMsg:function(e,t){return top.layer.msg(e,{offset:"300px",icon:2,time:1500},t)},warnMsg:function(e,t){return top.layer.msg(e,{offset:"300px",icon:3,time:1500},t)},successMsg:function(e,t){return top.layer.msg(e,{offset:"300px",icon:1,time:1500},t)},loading:function(){return i.load(2,{time:1e4})},intoTable:function(e){o.smartReload.enable(!0),e.loading=e.loading||!0,e.method=e.method||"post",e.limit=e.limit||50,e.page=e.page||!0,e.toolbar=e.toolbar||!0,e.defaultToolbar=e.defaultToolbar||["filter","print"],e.elem="#"+e.id,e.colFilterRecord=e.colFilterRecord||!0,e.request=e.request||{pageName:"pageNum",limitName:"pageSize"},e.parseData=e.parseData||function(e){return{code:e.status,msg:e.msg,count:void 0!=e.data?e.data.total:0,data:e.data.list}};var a=t.extend({limits:[10,50,100,200,500,2e3],smartReloadModel:!0,text:{none:"暂无相关数据(或者更换过滤条件后重试)"}},e),n=r.render(a);return r.on("sort("+e.id+")",function(t){r.reload(e.id,{initSort:t,where:{field:t.field,order:t.type}})}),n},getCookie:function(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?unescape(t[2]):null},setCookie:function(e,t,a){var r="",n=1*a.substring(1,a.length),o=a.substring(0,1);"s"==o?r=1e3*n:"h"==o?r=60*n*60*1e3:"d"==o&&(r=24*n*60*60*1e3);var i=new Date;i.setTime(i.getTime()+1*r),document.cookie=e+"="+escape(t)+";expires="+i.toGMTString()},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var a=s.getCookie(e);null!=a&&(document.cookie=e+"="+a+";expires="+t.toGMTString())},filterParams:function(e){var t={};for(var a in e)0!==e[a]&&e[a]!==!1&&!e[a]||""===e[a].toString().replace(/(^\s*)|(\s*$)/g,"")||(t[a]=e[a]);return t},toTree:function(e){var t=[];if(e.constructor===Object&&(e=Object.keys(e).map(function(t){return e[t]})),Object.keys(e).length>0){e.forEach(function(e){delete e.children});var a={};e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var r=a[e.parent];r&&0!=e.parent?(r.children||(r.children=[])).push(e):t.push(e)}),t=JSON.parse(JSON.stringify(t).replace(/id/g,"id").replace(/typename/g,"name"))}return t}};n.verify({nickname:function(e,t){return new RegExp("^[a-zA-Z0-9_一-龥\\s·]+$").test(e)?/(^\_)|(\__)|(\_+$)/.test(e)?"用户名首尾不能出现下划线'_'":void 0:"用户名不能有特殊字符"},pass:[/^[\S]{6,12}$/,"密码必须6到12位，且不能出现空格"]}),e("SavingFunction",s)});