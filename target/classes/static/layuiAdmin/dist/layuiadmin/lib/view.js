/** dms1.0-v1.0.0 ISC License By  */
 ;"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}layui.define(["laytpl","layer"],function(e){var t=layui.jquery,a=layui.laytpl,r=layui.layer,n=layui.setter,o=(layui.device(),layui.hint()),i=function(e){return new u(e)},s="LAY_app_body",u=function(e){this.id=e,this.container=t("#"+(e||s))};i.loading=function(e){e.append(this.elemLoad=t('<i class="layui-anim layui-anim-rotate layui-anim-loop layui-icon layui-icon-loading layadmin-loading"></i>'))},i.removeLoad=function(){this.elemLoad&&this.elemLoad.remove()},i.exit=function(e){layui.data(n.tableName,{key:n.request.tokenName,remove:!0}),top.location.href=response.loginURL,e&&e()},i.req=function(e){var a=e.success,r=e.error,o=n.request,s=n.response,u=function(){return n.debug?"<br><cite>URL：</cite>"+e.url:""};if(e.data=e.data||{},e.headers=e.headers||{},o.tokenName){var d="string"==typeof e.data?JSON.parse(e.data):e.data;e.data[o.tokenName]=o.tokenName in d?e.data[o.tokenName]:layui.data(n.tableName)[o.tokenName]||"",e.headers[o.tokenName]=o.tokenName in e.headers?e.headers[o.tokenName]:layui.data(n.tableName)[o.tokenName]||""}return delete e.success,t.ajax(t.extend({type:"post",dataType:"json",success:function(t){var r=s.statusCode;if(t[s.statusName]==r.ok||t[s.statusName]==r.err||t[s.statusName]==r.errParam)"function"==typeof e.done&&e.done(t);else if(t[s.statusName]==r.logout)i.exit();else{var n=["<cite>Error：</cite> "+(t[s.msgName]||"返回状态码异常"),u()].join("");i.error(n)}0===t[s.statusName]?"function"==typeof a&&a(t[s.dataName],t[s.msgName]):1===t[s.statusName]&&"function"==typeof e.error&&e.error(t[s.msgName])},error:function(e,t){var a=["请求异常，请重试<br><cite>错误信息：</cite>"+t,u()].join("");i.error(a),"function"==typeof r&&r(res)}},e))},i.popup=function(e){var a=e.success,n=e.skin;return delete e.success,delete e.skin,r.open(t.extend({type:1,title:"提示",content:"",id:"LAY-system-view-popup",skin:"layui-layer-admin"+(n?" "+n:""),shadeClose:!0,closeBtn:!1,success:function(e,n){var o=t('<i class="layui-icon" close>&#x1006;</i>');e.append(o),o.on("click",function(){r.close(n)}),"function"==typeof a&&a.apply(this,arguments)}},e))},i.error=function(e,a){return i.popup(t.extend({content:e,maxWidth:300,offset:"t",anim:6,id:"LAY_adminError"},a))},u.prototype.render=function(e,a){var r=this;layui.router();return e=n.views+e+n.engine,t("#"+s).children(".layadmin-loading").remove(),i.loading(r.container),t.ajax({url:e,type:"get",dataType:"html",data:{v:layui.cache.version},success:function(e){e="<div>"+e+"</div>";var n=t(e).find("title"),o=n.text()||(e.match(/\<title\>([\s\S]*)\<\/title>/)||[])[1],s={title:o,body:e};n.remove(),r.params=a||{},r.then&&(r.then(s),delete r.then),r.parse(e),i.removeLoad(),r.done&&(r.done(s),delete r.done)},error:function(e){return i.removeLoad(),r.render.isError?i.error("请求视图文件异常，状态："+e.status):(404===e.status?r.render("template/tips/404"):r.render("template/tips/error"),void(r.render.isError=!0))}}),r},u.prototype.parse=function(e,r,n){var s=this,u="object"===_typeof(e),d=u?e:t(e),l=u?e:d.find("*[template]"),c=function(e){var r=a(e.dataElem.html()),o=t.extend({params:y.params},e.res);e.dataElem.after(r.render(o)),"function"==typeof n&&n();try{e.done&&new Function("d",e.done)(o)}catch(i){}},y=layui.router();d.find("title").remove(),s.container[r?"after":"html"](d.children()),y.params=s.params||{};for(var p=l.length;p>0;p--)!function(){var e=l.eq(p-1),t=e.attr("lay-done")||e.attr("lay-then"),r=a(e.attr("lay-url")||"").render(y),n=a(e.attr("lay-data")||"").render(y),s=a(e.attr("lay-headers")||"").render(y);try{n=new Function("return "+n+";")()}catch(u){o.error("lay-data: "+u.message),n={}}try{s=new Function("return "+s+";")()}catch(u){o.error("lay-headers: "+u.message),s=s||{}}r?i.req({type:e.attr("lay-type")||"get",url:r,data:n,dataType:"json",headers:s,success:function(a){c({dataElem:e,res:a,done:t})}}):c({dataElem:e,done:t})}();return s},u.prototype.autoRender=function(e,a){var r=this;t(e||"body").find("*[template]").each(function(e,a){var n=t(this);r.container=n,r.parse(n,"refresh")})},u.prototype.send=function(e,t){var r=a(e||this.container.html()).render(t||{});return this.container.html(r),this},u.prototype.refresh=function(e){var t=this,a=t.container.next(),r=a.attr("lay-templateid");return t.id!=r?t:(t.parse(t.container,"refresh",function(){t.container.siblings('[lay-templateid="'+t.id+'"]:last').remove(),"function"==typeof e&&e()}),t)},u.prototype.then=function(e){return this.then=e,this},u.prototype.done=function(e){return this.done=e,this},e("view",i)});