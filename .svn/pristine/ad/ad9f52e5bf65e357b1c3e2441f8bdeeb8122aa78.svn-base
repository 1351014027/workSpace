/** dms1.0-v1.0.0 ISC License By  */
 ;"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}layui.define(["jquery","layer","form"],function(e){var t=layui.$,o=layui.layer,a=layui.form,n="dtree-nav-ul-sid",i="dtree-nav-item",r="dtree-nav-div",s="dtreefont-special",d="dtree-menubar",l="dtree-toolbar",c="dtree-toolbar-tool",u="dtree-toolbar-fixed",h="dtree-nav-checkbox-div",f="d-click-checkbar",p="t-click",b="dtree",m="dtree-nav-this",y="dtree-nav-show",v="dtree-nav-hide",k="dtree-disabled",g="dtree-icon-hide",S=t("body"),D="dtree",N="v2.5.0",C={},T="dtreefont",x="dtree-icon-dian",j="dtree-icon-fuxuankuangxuanzhong",A="dtree-icon-fuxuankuang",I="dtree-icon-fuxuankuang-banxuan",P="dtree-icon-move-down",w="dtree-icon-move-up",q="dtree-icon-refresh",L="dtree-icon-roundcheckfill",_="dtree-icon-roundclosefill",O="dtree-icon-roundcheck",R="dtree-icon-delete1",E="dtree-icon-search_list_light",F="dtree-icon-pulldown",M="dtree-icon-pullup",U="dtree-icon-roundadd",B="dtree-icon-bianji",W="dtree-icon-roundclose",H={"-1":{open:"dtree-icon-null-open",close:"dtree-icon-null-close"},0:{open:"dtree-icon-jian",close:"dtree-icon-jia"},1:{open:"dtree-icon-xiangxia1",close:"dtree-icon-xiangyou"}},$={"-1":{open:"dtree-icon-null-open",close:"dtree-icon-null-close"},0:{open:"dtree-icon-wenjianjiazhankai",close:"dtree-icon-weibiaoti5"}},z={"-1":"dtree-icon-null",0:"dtree-icon-weibiaoti5",1:"dtree-icon-yonghu",2:"dtree-icon-fenzhijigou",3:"dtree-icon-fenguangbaobiao",4:"dtree-icon-xinxipilu",5:"dtree-icon-shuye1",6:"dtree-icon-caidan_xunzhang",7:"dtree-icon-normal-file"},J="dtree-",G="-item-this",X="-item",K="-dtreefont",Q="-ficon",V="-icon",Y="-checkbox",Z="-choose",ee={checkNodeClick:"checkNodeClick",itemNodeClick:"itemNodeClick"},te={pulldown:"pulldown",pullup:"pullup",addTool:"addToolbar",editTool:"editToolbar",delTool:"delToolbar"},oe={moveDown:"moveDown",moveUp:"moveUp",refresh:"refresh",checkAll:"checkAll",unCheckAll:"unCheckAll",invertAll:"invertAll",remove:"remove",searchNode:"searchNode"},ae={getElemId:function(e){var o=e.elem||"",a=e.obj||t(o);return 0==a.length?"":t(a)[0].id},escape:function(e){return"string"!=typeof e?"":e.replace(se.escape,function(e){return re.escape[e]})},unescape:function(e){return"string"!=typeof e?"":e.replace(se.unescape,function(e){return re.unescape[e]})},cloneObj:function(e,t){var o={};e instanceof Array&&(o=[]);var a="";"undefined"!=typeof t&&(a=t.join(","));for(var n in e)if(a.indexOf(n)==-1){var i=e[n];o[n]="object"===_typeof(i)?ae.cloneObj(i,void 0!==_typeof(t)?t:[]):i}return o},trimToDot:function(e){return e.replace(/ /g,".")}},ne=Object.keys||function(e){e=Object(e);var t=[];for(var o in e)t.push(o);return t},ie=function(e){e=Object(e);var t={};for(var o in e)t[e[o]]=o;return t},re={escape:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&quo;"}};re.unescape=ie(re.escape);var se={escape:RegExp("["+ne(re.escape).join("")+"]","g"),unescape:RegExp("("+ne(re.unescape).join("|")+")","g")},de={request:function(e){var a=e.data?e.data:{},n="boolean"!=typeof e.async||e.async;t.ajax({type:e.type?e.type:"POST",headers:e.headers,url:e.url,dataType:e.dataType?e.dataType:"json",data:a,async:n,contentType:e.contentType?e.contentType:"application/x-www-form-urlencoded",success:e.success,error:function(t,a,n){"function"==typeof e.error?e.error():o.msg("异步加载失败： "+a,{icon:5,shift:6})},statusCode:{404:function(){o.msg("未找到指定请求，请检查访问路径！",{icon:5,shift:6})},500:function(){o.msg("系统错误！",{icon:5,shift:6})}},complete:function(t,o){"function"==typeof e.complete&&e.complete(t,o)}})},serialize:function(e){var t="?";for(var o in e)t+=o+"="+e[o]+"&";return t=t.substring(0,t.length-1)}},le=function(e){this.formatter={title:function(e){return""}},this.response={statusName:"code",statusCode:200,message:"message",rootName:"data",treeId:"id",parentId:"parentId",title:"title",iconClass:"iconClass",childName:"children",isLast:"isLast",spread:"spread",disabled:"disabled",isHide:"isHide",checkArr:"checkArr",isChecked:"isChecked",type:"type",basicData:"basicData"},this.defaultRequest={nodeId:"nodeId",parentId:"parentId",context:"context",isLeaf:"isLeaf",level:"level",spread:"spread",dataType:"dataType",ischecked:"ischecked",initchecked:"initchecked",basicData:"basicData",recordData:"recordData"},this.toolbarFun={addTreeNode:function(e,t){},editTreeNode:function(e,t){},editTreeLoad:function(e){},delTreeNode:function(e,t){},loadToolbarBefore:function(e,t,o){return e}},this.toolbarStyle={title:"节点",area:["60%","80%"]},this.menubarFun={remove:function(e){return!0}},this.menubarTips={toolbar:[],group:[oe.moveDown,oe.moveUp,oe.refresh,oe.checkAll,oe.unCheckAll,oe.invertAll,oe.remove,oe.searchNode],freedom:[]},this.checkbarFun={chooseBefore:function(e,t){return!0},chooseDone:function(e){}},this.iframe={iframeElem:"",iframeUrl:"",iframeLoad:"leaf",iframeDefaultRequest:{nodeId:"nodeId",parentId:"parentId",context:"context",isLeaf:"isLeaf",level:"level",spread:"spread",dataType:"dataType",ischecked:"ischecked",initchecked:"initchecked",basicData:"basicData",recordData:"recordData"},iframeRequest:{}},this.iframeFun={iframeDone:function(e){}},this.style={item:"",itemThis:"",dfont:"",icon:"",cbox:"",chs:""},this.usefontStyle={fnode:{node:{open:"",close:""},dot:""},snode:{node:{open:"",close:""},leaf:""},checkbox:{on:"",out:"",noall:""},menubar:{movedown:"",moveup:"",refresh:"",checkAll:"",unCheckAll:"",invertAll:"",remove:"",search:""},menubarExt:"",toolbar:{menubar:{movedown:"",moveup:"",refresh:"",checkAll:"",unCheckAll:"",invertAll:"",remove:"",search:""},menubarExt:"",pulldown:"",pullup:"",add:"",edit:"",del:""},toolbarExt:""},this.node={nodeId:"",parentId:"",context:"",isLeaf:"",level:"",spread:"",dataType:"",ischecked:"",initchecked:"",basicData:"",recordData:""},this.toolbarMenu={},this.checkbarNode=[],this.errData=[],this.checkArrLen=0,this.temp=[],this.setting(e)};le.prototype.setting=function(e){this.options=e||{},this.elem=this.options.elem||"",this.obj=this.options.obj||t(this.elem),this.accordion="boolean"==typeof this.options.accordion&&this.options.accordion,this.accordion?this.initLevel=1:this.initLevel=this.options.initLevel||2,this.type=this.options.type||"load",this.cache="boolean"!=typeof this.options.cache||this.options.cache,this.record="boolean"==typeof this.options.record&&this.options.record,this.load="boolean"!=typeof this.options.load||this.options.load,this.iconfont=this.options.iconfont||T,this.iconfontStyle=this.options.iconfontStyle||{},this.firstIconArray=t.extend(H,this.options.firstIconArray)||H,this.nodeIconArray=t.extend($,this.options.nodeIconArray)||$,this.leafIconArray=t.extend(z,this.options.leafIconArray)||z,this.skin=this.options.skin||"theme","layui"==this.skin?(this.ficon=this.options.ficon||"1",this.dot="boolean"==typeof this.options.dot&&this.options.dot,this.icon=this.options.icon||"7",this.nodeIcon="string"==typeof this.icon||"number"==typeof this.icon?("-1"==this.icon,"-1"):this.icon[0],this.leafIcon="string"==typeof this.icon||"number"==typeof this.icon?this.icon:this.icon[1]):(this.ficon=this.options.ficon||"0",this.dot="boolean"!=typeof this.options.dot||this.options.dot,this.icon=this.options.icon||"5",this.nodeIcon="string"==typeof this.icon||"number"==typeof this.icon?"-1"==this.icon?"-1":"0":this.icon[0],this.leafIcon="string"==typeof this.icon||"number"==typeof this.icon?this.icon:this.icon[1]),this.url=this.options.url||"",this.async="boolean"!=typeof this.options.async||this.options.async,this.headers=this.options.headers||{},this.method=this.options.method||"post",this.dataType=this.options.dataType||"json",this.contentType=this.options.contentType||"application/x-www-form-urlencoded",this.defaultRequest=t.extend(this.defaultRequest,this.options.defaultRequest)||this.defaultRequest,this.filterRequest=this.options.filterRequest||[],this.request=this.options.request||{},this.response=t.extend(this.response,this.options.response)||this.response,this.data=this.options.data||null,this.dataFormat=this.options.dataFormat||"levelRelationship",this.dataStyle=this.options.dataStyle||"defaultStyle",this.errDataShow="boolean"==typeof this.options.errDataShow&&this.options.errDataShow,this.success=this.options.success||function(e,t){},this.done=this.options.done||function(e,t){},this.formatter=t.extend(this.formatter,this.options.formatter)||this.formatter,this.checkbar=this.options.checkbar||!1,this.checkbarLoad=this.options.checkbarLoad||"node",this.checkbarType=this.options.checkbarType||"all",this.checkbarData=this.options.checkbarData||"choose",this.checkbarFun=t.extend(this.checkbarFun,this.options.checkbarFun)||this.checkbarFun,this.menubar=this.options.menubar||!1,this.menubarTips=t.extend(this.menubarTips,this.options.menubarTips)||this.menubarTips,this.menubarFun=t.extend(this.menubarFun,this.options.menubarFun)||this.menubarFun,this.toolbar=this.options.toolbar||!1,this.toolbarWay=this.options.toolbarWay||"contextmenu",this.toolbarStyle=t.extend(this.toolbarStyle,this.options.toolbarStyle)||this.toolbarStyle,this.toolbarScroll=this.options.toolbarScroll||this.elem,this.toolbarLoad=this.options.toolbarLoad||"node",this.toolbarShow=this.options.toolbarShow||["add","edit","delete"],this.toolbarBtn=this.options.toolbarBtn||null,this.toolbarExt=this.options.toolbarExt||[],this.toolbarFun=t.extend(this.toolbarFun,this.options.toolbarFun)||this.toolbarFun,this.useIframe=this.options.useIframe||!1,this.iframe=t.extend(this.iframe,this.options.iframe)||this.iframe,this.iframeFun=t.extend(this.iframeFun,this.options.iframeFun)||this.iframeFun,this.ensureTheme()},le.prototype.reloadSetting=function(e){this.options=t.extend(this.options,e)||this.options,this.elem=this.options.elem||this.elem,"undefined"==typeof this.options.obj?this.elem&&t(this.elem).length>0&&(this.obj=t(this.elem)):this.obj=this.options.obj||this.obj,this.accordion="boolean"==typeof this.options.accordion?this.options.accordion:this.accordion,this.accordion?this.initLevel=1:this.initLevel=this.options.initLevel||this.initLevel,this.type=this.options.type||this.type,this.cache="boolean"==typeof this.options.cache?this.options.cache:this.cache,this.record="boolean"==typeof this.options.record?this.options.record:this.record,this.load="boolean"==typeof this.options.load?this.options.load:this.load,this.iconfont=this.options.iconfont||this.iconfont,this.iconfontStyle=this.options.iconfontStyle||this.iconfontStyle,this.firstIconArray=t.extend(H,this.options.firstIconArray)||this.firstIconArray,this.nodeIconArray=t.extend($,this.options.nodeIconArray)||this.nodeIconArray,this.leafIconArray=t.extend(z,this.options.leafIconArray)||this.leafIconArray,this.skin=this.options.skin||this.skin,"layui"==this.skin?(this.ficon=this.options.ficon||this.ficon,this.dot="boolean"==typeof this.options.dot&&this.options.dot,this.icon=this.options.icon||this.icon,this.nodeIcon="string"==typeof this.icon||"number"==typeof this.icon?("-1"==this.icon,"-1"):this.icon[0],this.leafIcon="string"==typeof this.icon||"number"==typeof this.icon?this.icon:this.icon[1]):(this.ficon=this.options.ficon||this.ficon,this.dot="boolean"!=typeof this.options.dot||this.options.dot,this.icon=this.options.icon||this.icon,this.nodeIcon="string"==typeof this.icon||"number"==typeof this.icon?"-1"==this.icon?"-1":"0":this.icon[0],this.leafIcon="string"==typeof this.icon||"number"==typeof this.icon?this.icon:this.icon[1]),this.url=this.options.url||this.url,this.async="boolean"==typeof this.options.async?this.options.async:this.async,this.headers=this.options.headers||this.headers,this.method=this.options.method||this.method,this.dataType=this.options.dataType||this.dataType,this.contentType=this.options.contentType||this.contentType,this.defaultRequest=t.extend(this.defaultRequest,this.options.defaultRequest)||this.defaultRequest,this.filterRequest=this.options.filterRequest||this.filterRequest,this.request=this.options.request||this.request,this.response=t.extend(this.response,this.options.response)||this.response,this.data=this.options.data||this.data,this.dataFormat=this.options.dataFormat||this.dataFormat,this.dataStyle=this.options.dataStyle||this.dataStyle,this.errDataShow="boolean"==typeof this.options.errDataShow?this.options.errDataShow:this.errDataShow,this.success=this.options.success||this.success,this.done=this.options.done||this.done,this.formatter=t.extend(this.formatter,this.options.formatter)||this.formatter,this.checkbar=this.options.checkbar||this.checkbar,this.checkbarLoad=this.options.checkbarLoad||this.checkbarLoad,this.checkbarType=this.options.checkbarType||this.checkbarType,this.checkbarData=this.options.checkbarData||this.checkbarData,this.checkbarFun=t.extend(this.checkbarFun,this.options.checkbarFun)||this.checkbarFun,this.menubar=this.options.menubar||this.menubar,this.menubarTips=t.extend(this.menubarTips,this.options.menubarTips)||this.menubarTips,this.menubarFun=t.extend(this.menubarFun,this.options.menubarFun)||this.menubarFun,this.toolbar=this.options.toolbar||this.toolbar,this.toolbarWay=this.options.toolbarWay||this.toolbarWay,this.toolbarStyle=t.extend(this.toolbarStyle,this.options.toolbarStyle)||this.toolbarStyle,this.toolbarScroll=this.options.toolbarScroll||this.toolbarScroll,this.toolbarLoad=this.options.toolbarLoad||this.toolbarLoad,this.toolbarShow=this.options.toolbarShow||this.toolbarShow,this.toolbarBtn=this.options.toolbarBtn||this.toolbarBtn,this.toolbarExt=this.options.toolbarExt||this.toolbarExt,this.toolbarFun=t.extend(this.toolbarFun,this.options.toolbarFun)||this.toolbarFun,this.useIframe=this.options.useIframe||this.useIframe,this.iframe=t.extend(this.iframe,this.options.iframe)||this.iframe,this.iframeFun=t.extend(this.iframeFun,this.options.iframeFun)||this.iframeFun,this.ensureTheme()},le.prototype.ensureTheme=function(){this.style.item=J+this.skin+X,this.style.itemThis=J+this.skin+G,this.style.dfont=J+this.skin+K,this.style.ficon=J+this.skin+Q,this.style.icon=J+this.skin+V,this.style.cbox=J+this.skin+Y,this.style.chs=J+this.skin+Z;var e=this.iconfont,t=[];"string"==typeof e?t.push(e):t=e;var o=this.iconfontStyle,a=[];void 0==o.length?a.push(o):a=o;for(var n=0;n<t.length;n++){var i=t[n],r=a[n];"undefined"!=typeof r&&(this.useDefaultOrUserDefineFnodeStyle(i,r.fnode),this.useDefaultOrUserDefineSnodeStyle(i,r.snode),this.useDefaultOrUserDefineCheckboxStyle(i,r.checkbox),this.useDefaultOrUserDefineMenubarStyle(i,r.menubar),this.useDefaultOrUserDefineMenubarExtStyle(i,r.menubarExt),this.useDefaultOrUserDefineToolbarStyle(i,r.toolbar),this.useDefaultOrUserDefineToolbarExtStyle(i,r.toolbarExt))}},le.prototype.useDefaultOrUserDefineFnodeStyle=function(e,t){var o=this.usefontStyle.fnode.node.open,a=this.usefontStyle.fnode.node.close,n=this.usefontStyle.fnode.dot;if("undefined"==typeof t)this.usefontStyle.fnode.node.open=""==o?e+" "+this.firstIconArray[this.ficon].open:o,this.usefontStyle.fnode.node.close=""==a?e+" "+this.firstIconArray[this.ficon].close:a,this.usefontStyle.fnode.dot=""==n?e+" "+x:n;else{var i=t.node,r=t.dot;if("undefined"==typeof i)this.usefontStyle.fnode.node.open=""==o?e+" "+this.firstIconArray[this.ficon].open:o,this.usefontStyle.fnode.node.close=""==a?e+" "+this.firstIconArray[this.ficon].close:a;else{var s=i.open,d=i.close;"undefined"==typeof s?this.usefontStyle.fnode.node.open=""==o?e+" "+this.firstIconArray[this.ficon].open:o:this.usefontStyle.fnode.node.open=e+" "+s,"undefined"==typeof d?this.usefontStyle.fnode.node.close=""==a?e+" "+this.firstIconArray[this.ficon].close:a:this.usefontStyle.fnode.node.close=e+" "+d}"undefined"==typeof r?this.usefontStyle.fnode.dot=""==n?e+" "+x:n:this.usefontStyle.fnode.dot=e+" "+r}},le.prototype.useDefaultOrUserDefineSnodeStyle=function(e,t){var o=this.usefontStyle.snode.node.open,a=this.usefontStyle.snode.node.close,n=this.usefontStyle.snode.leaf;if("undefined"==typeof t)this.usefontStyle.snode.node.open=""==o?e+" "+this.nodeIconArray[this.nodeIcon].open:o,this.usefontStyle.snode.node.close=""==a?e+" "+this.nodeIconArray[this.nodeIcon].close:a,this.usefontStyle.snode.leaf=""==n?e+" "+this.leafIconArray[this.leafIcon]:n;else{var i=t.node,r=t.leaf;if("undefined"==typeof i)this.usefontStyle.snode.node.open=""==o?e+" "+this.nodeIconArray[this.nodeIcon].open:o,this.usefontStyle.snode.node.close=""==a?e+" "+this.nodeIconArray[this.nodeIcon].close:a;else{var s=i.open,d=i.close;"undefined"==typeof s?this.usefontStyle.snode.node.open=""==o?e+" "+this.nodeIconArray[this.nodeIcon].open:o:this.usefontStyle.snode.node.open=e+" "+s,"undefined"==typeof d?this.usefontStyle.snode.node.close=""==a?e+" "+this.nodeIconArray[this.nodeIcon].close:a:this.usefontStyle.snode.node.close=e+" "+d}"undefined"==typeof r?this.usefontStyle.snode.leaf=""==n?e+" "+this.leafIconArray[this.leafIcon]:n:this.usefontStyle.snode.leaf=e+" "+r}},le.prototype.useDefaultOrUserDefineCheckboxStyle=function(e,t){var o=this.usefontStyle.checkbox.on,a=this.usefontStyle.checkbox.out,n=this.usefontStyle.checkbox.noall;if("undefined"==typeof t)this.usefontStyle.checkbox.on=""==o?e+" "+j:o,this.usefontStyle.checkbox.out=""==a?e+" "+A:a,this.usefontStyle.checkbox.noall=""==n?e+" "+I:n;else{var i=t.on,r=t.out,s=t.noall;"undefined"==typeof i?this.usefontStyle.checkbox.on=""==o?e+" "+j:o:this.usefontStyle.checkbox.on=e+" "+i,"undefined"==typeof r?this.usefontStyle.checkbox.out=""==a?e+" "+A:a:this.usefontStyle.checkbox.out=e+" "+r,"undefined"==typeof s?this.usefontStyle.checkbox.noall=""==n?e+" "+I:n:this.usefontStyle.checkbox.noall=e+" "+s}},le.prototype.useDefaultOrUserDefineMenubarStyle=function(e,t){var o=this.usefontStyle.menubar.movedown,a=this.usefontStyle.menubar.moveup,n=this.usefontStyle.menubar.refresh,i=this.usefontStyle.menubar.checkAll,r=this.usefontStyle.menubar.unCheckAll,s=this.usefontStyle.menubar.invertAll,d=this.usefontStyle.menubar.remove,l=this.usefontStyle.menubar.search;if("undefined"==typeof t)this.usefontStyle.menubar.movedown=""==o?e+" "+P:o,this.usefontStyle.menubar.moveup=""==a?e+" "+w:a,this.usefontStyle.menubar.refresh=""==n?e+" "+q:n,this.usefontStyle.menubar.checkAll=""==i?e+" "+L:i,this.usefontStyle.menubar.unCheckAll=""==r?e+" "+_:r,this.usefontStyle.menubar.invertAll=""==s?e+" "+O:s,this.usefontStyle.menubar.remove=""==d?e+" "+R:d,this.usefontStyle.menubar.search=""==l?e+" "+E:l;else{var c=t.movedown,u=t.moveup,h=t.refresh,f=t.checkAll,p=t.unCheckAll,b=t.invertAll,m=t.remove,y=t.search;"undefined"==typeof c?this.usefontStyle.menubar.movedown=""==o?e+" "+P:o:this.usefontStyle.menubar.movedown=e+" "+c,"undefined"==typeof u?this.usefontStyle.menubar.moveup=""==a?e+" "+w:a:this.usefontStyle.menubar.moveup=e+" "+u,"undefined"==typeof h?this.usefontStyle.menubar.refresh=""==n?e+" "+q:n:this.usefontStyle.menubar.refresh=e+" "+h,"undefined"==typeof f?this.usefontStyle.menubar.checkAll=""==i?e+" "+L:i:this.usefontStyle.menubar.checkAll=e+" "+f,"undefined"==typeof p?this.usefontStyle.menubar.unCheckAll=""==r?e+" "+_:r:this.usefontStyle.menubar.unCheckAll=e+" "+p,"undefined"==typeof b?this.usefontStyle.menubar.invertAll=""==s?e+" "+O:s:this.usefontStyle.menubar.invertAll=e+" "+b,"undefined"==typeof m?this.usefontStyle.menubar.remove=""==d?e+" "+R:d:this.usefontStyle.menubar.remove=e+" "+m,"undefined"==typeof y?this.usefontStyle.menubar.search=""==l?e+" "+E:l:this.usefontStyle.menubar.search=e+" "+y}},le.prototype.useDefaultOrUserDefineMenubarExtStyle=function(e,t){var o=this.usefontStyle.menubarExt;"undefined"==typeof t?this.usefontStyle.menubarExt=""==o?e:o:this.usefontStyle.menubarExt=t},le.prototype.useDefaultOrUserDefineToolbarStyle=function(e,t){var o=this.usefontStyle.toolbar.menubar.movedown,a=this.usefontStyle.toolbar.menubar.moveup,n=this.usefontStyle.toolbar.menubar.refresh,i=this.usefontStyle.toolbar.menubar.checkAll,r=this.usefontStyle.toolbar.menubar.unCheckAll,s=this.usefontStyle.toolbar.menubar.invertAll,d=this.usefontStyle.toolbar.menubar.remove,l=this.usefontStyle.toolbar.menubar.search,c=this.usefontStyle.toolbar.menubarExt,u=this.usefontStyle.toolbar.pulldown,h=this.usefontStyle.toolbar.pullup,f=this.usefontStyle.toolbar.add,p=this.usefontStyle.toolbar.edit,b=this.usefontStyle.toolbar.del;if("undefined"==typeof t)this.usefontStyle.toolbar.menubar.movedown=""==o?e+" "+this.usefontStyle.menubar.movedown:o,this.usefontStyle.toolbar.menubar.moveup=""==a?e+" "+this.usefontStyle.menubar.moveup:a,this.usefontStyle.toolbar.menubar.refresh=""==n?e+" "+this.usefontStyle.menubar.refresh:n,this.usefontStyle.toolbar.menubar.checkAll=""==i?e+" "+this.usefontStyle.menubar.checkAll:i,this.usefontStyle.toolbar.menubar.unCheckAll=""==r?e+" "+this.usefontStyle.menubar.unCheckAll:r,this.usefontStyle.toolbar.menubar.invertAll=""==s?e+" "+this.usefontStyle.menubar.invertAll:s,this.usefontStyle.toolbar.menubar.remove=""==d?e+" "+this.usefontStyle.menubar.remove:d,this.usefontStyle.toolbar.menubar.search=""==l?e+" "+this.usefontStyle.menubar.search:l,this.usefontStyle.toolbar.menubarExt=""==c?this.usefontStyle.menubarExt:c,this.usefontStyle.toolbar.pulldown=""==u?e+" "+F:u,this.usefontStyle.toolbar.pullup=""==h?e+" "+M:h,this.usefontStyle.toolbar.add=""==f?e+" "+U:f,this.usefontStyle.toolbar.edit=""==p?e+" "+B:p,this.usefontStyle.toolbar.del=""==b?e+" "+W:b;else{var m=t.menubar,y=t.menubarExt,v=t.pulldown,k=t.pullup,g=t.add,S=t.edit,D=t.del;if("undefined"==typeof m)this.usefontStyle.toolbar.menubar.movedown=""==o?e+" "+this.usefontStyle.menubar.movedown:o,this.usefontStyle.toolbar.menubar.moveup=""==a?e+" "+this.usefontStyle.menubar.moveup:a,this.usefontStyle.toolbar.menubar.refresh=""==n?e+" "+this.usefontStyle.menubar.refresh:n,this.usefontStyle.toolbar.menubar.checkAll=""==i?e+" "+this.usefontStyle.menubar.checkAll:i,this.usefontStyle.toolbar.menubar.unCheckAll=""==tempUncheckAll?e+" "+this.usefontStyle.menubar.unCheckAll:tempUncheckAll,this.usefontStyle.toolbar.menubar.invertAll=""==s?e+" "+this.usefontStyle.menubar.invertAll:s,this.usefontStyle.toolbar.menubar.remove=""==d?e+" "+this.usefontStyle.menubar.remove:d,this.usefontStyle.toolbar.menubar.search=""==l?e+" "+this.usefontStyle.menubar.search:l;else{var N=m.movedown,C=m.moveup,T=m.refresh,x=m.checkAll,j=m.unCheckAll,A=m.invertAll,I=m.remove,P=m.search;"undefined"==typeof N?this.usefontStyle.toolbar.menubar.movedown=""==o?e+" "+this.usefontStyle.menubar.movedown:o:this.usefontStyle.toolbar.menubar.movedown=e+" "+N,"undefined"==typeof C?this.usefontStyle.toolbar.menubar.moveup=""==a?e+" "+this.usefontStyle.menubar.moveup:a:this.usefontStyle.toolbar.menubar.moveup=e+" "+C,"undefined"==typeof T?this.usefontStyle.toolbar.menubar.refresh=""==n?e+" "+this.usefontStyle.menubar.refresh:n:this.usefontStyle.toolbar.menubar.refresh=e+" "+T,"undefined"==typeof x?this.usefontStyle.toolbar.menubar.checkAll=""==i?e+" "+this.usefontStyle.menubar.checkAll:i:this.usefontStyle.toolbar.menubar.checkAll=e+" "+x,"undefined"==typeof j?this.usefontStyle.toolbar.menubar.unCheckAll=""==tempUncheckAll?e+" "+this.usefontStyle.menubar.unCheckAll:tempUncheckAll:this.usefontStyle.toolbar.menubar.unCheckAll=e+" "+j,"undefined"==typeof A?this.usefontStyle.toolbar.menubar.invertAll=""==s?e+" "+this.usefontStyle.menubar.invertAll:s:this.usefontStyle.toolbar.menubar.invertAll=e+" "+A,"undefined"==typeof I?this.usefontStyle.toolbar.menubar.remove=""==d?e+" "+this.usefontStyle.menubar.remove:d:this.usefontStyle.toolbar.menubar.remove=e+" "+I,"undefined"==typeof P?this.usefontStyle.toolbar.menubar.search=""==l?e+" "+this.usefontStyle.menubar.search:l:this.usefontStyle.toolbar.menubar.search=e+" "+P}"undefined"==typeof y?this.usefontStyle.toolbar.menubarExt=""==c?this.usefontStyle.menubarExt:c:this.usefontStyle.toolbar.menubarExt=y,"undefined"==typeof v?this.usefontStyle.toolbar.pulldown=""==u?e+" "+F:u:this.usefontStyle.toolbar.pulldown=e+" "+v,"undefined"==typeof k?this.usefontStyle.toolbar.pullup=""==h?e+" "+M:h:this.usefontStyle.toolbar.pullup=e+" "+k,"undefined"==typeof g?this.usefontStyle.toolbar.add=""==f?e+" "+U:f:this.usefontStyle.toolbar.add=e+" "+g,"undefined"==typeof S?this.usefontStyle.toolbar.edit=""==p?e+" "+B:p:this.usefontStyle.toolbar.edit=e+" "+S,"undefined"==typeof D?this.usefontStyle.toolbar.del=""==b?e+" "+W:b:this.usefontStyle.toolbar.del=e+" "+D}},le.prototype.useDefaultOrUserDefineToolbarExtStyle=function(e,t){var o=this.usefontStyle.toolbarExt;"undefined"==typeof t?this.usefontStyle.toolbarExt=""==o?e:o:this.usefontStyle.toolbarExt=t},le.prototype.operateIcon=function(e,t){var o=this,a=t.attr("data-iconClass");return{open:function(){e.attr("data-spread","open"),t.attr("data-spread","open"),e.removeClass(o.usefontStyle.fnode.node.close),e.addClass(o.usefontStyle.fnode.node.open),a||(t.removeClass(o.usefontStyle.snode.node.close),t.addClass(o.usefontStyle.snode.node.open))},close:function(){e.attr("data-spread","close"),t.attr("data-spread","close"),e.removeClass(o.usefontStyle.fnode.node.open),e.addClass(o.usefontStyle.fnode.node.close),a||(t.removeClass(o.usefontStyle.snode.node.open),t.addClass(o.usefontStyle.snode.node.close))},openWithDot:function(){e.attr("data-spread","open"),t.attr("data-spread","open"),e.removeClass(g),e.removeClass(o.usefontStyle.fnode.dot),e.addClass(o.usefontStyle.fnode.node.open),a||(t.removeClass(o.usefontStyle.snode.leaf),t.addClass(o.usefontStyle.snode.node.open))},closeWithDot:function(){e.attr("data-spread","last"),t.attr("data-spread","last"),e.removeClass(o.usefontStyle.fnode.node.open),e.removeClass(o.usefontStyle.fnode.node.close),o.dot||e.addClass(g),e.addClass(o.usefontStyle.fnode.dot),a||(t.removeClass(o.usefontStyle.snode.node.open),t.removeClass(o.usefontStyle.snode.node.close),t.addClass(o.usefontStyle.snode.leaf))}}},le.prototype.reload=function(e){var t=this;t.reloadSetting(e),t.init()},le.prototype.init=function(){var e=this;if("object"!==_typeof(e))return void o.msg("树组件未成功加载，请检查配置",{icon:5});if(e.data){if("undefined"==typeof e.data.length)return void o.msg("数据解析异常，data数据格式不正确",{icon:5});e.obj.html(""),setTimeout(function(){if(e.success(e.data,e.obj),"list"==e.dataFormat){var t=e.obj.attr("data-id"),o=e.queryListTreeByPid(t,e.data);e.loadListTree(o,e.data,1)}else e.loadTree(e.data,1);e.toolbar&&"contextmenu"!=e.toolbarWay&&e.setToolbarDom().setToolbarPlace(e.toolbarMenu),e.msgErrData(),e.done(e.data,e.obj)},100)}else{if(!e.url)return void o.msg("数据请求异常，url参数未指定",{icon:5});e.obj.html("");var a=e.load?o.load(1):"";de.request({async:e.async,headers:e.headers,type:e.method,url:e.url,dataType:e.dataType,contentType:e.contentType,data:e.getFilterRequestParam(e.getRequestParam()),success:function(a){"string"==typeof a&&(a=t.parseJSON(a));var n="";if(n="layuiStyle"==e.dataStyle?a[e.response.statusName]:a.status[e.response.statusName],n==e.response.statusCode){if(e.success(a,e.obj),"list"==e.dataFormat){var i=e.obj.attr("data-id"),r=e.queryListTreeByPid(i,a[e.response.rootName]);e.loadListTree(r,a[e.response.rootName],1)}else e.loadTree(a[e.response.rootName],1);e.toolbar&&"contextmenu"!=e.toolbarWay&&e.setToolbarDom().setToolbarPlace(e.toolbarMenu),e.msgErrData(),e.done(a,e.obj)}else"layuiStyle"==e.dataStyle?o.msg(a[e.response.message],{icon:2}):o.msg(a.status[e.response.message],{icon:2})},complete:function(){e.load&&o.close(a)}})}},le.prototype.getChild=function(e,a){var n=this,i=e.next("ul");if(n.setNodeParam(e),"undefined"!=typeof a){if("undefined"==typeof a.length)return void o.msg("数据解析异常，data数据格式不正确",{icon:5});if(i.html(""),"list"==n.dataFormat){var r=n.node.nodeId,s=parseInt(n.node.level)+1,d=n.queryListTreeByPid(r,a);n.loadListTree(d,n.data,s)}else n.loadTree(a,s);n.toolbar&&"contextmenu"!=n.toolbarWay&&n.setToolbarDom().setToolbarPlace(n.toolbarMenu),n.msgErrData()}else{if(!n.url)return void o.msg("数据请求异常，url参数未指定",{icon:5});i.html("");var l=n.load?o.load(1):"";de.request({async:n.async,headers:n.headers,type:n.method,url:n.url,dataType:n.dataType,data:n.getFilterRequestParam(n.getRequestParam()),success:function(e){"string"==typeof e&&(e=t.parseJSON(e));var a="";if(a="layuiStyle"==n.dataStyle?e[n.response.statusName]:e.status[n.response.statusName],a==n.response.statusCode){var r=n.node.nodeId,s=parseInt(n.node.level)+1;if("list"==n.dataFormat){var d=n.queryListTreeByPid(r,e[n.response.rootName]);n.loadListTree(d,e[n.response.rootName],s,i)}else n.loadTree(e[n.response.rootName],s,i);n.toolbar&&"contextmenu"!=n.toolbarWay&&n.setToolbarDom().setToolbarPlace(n.toolbarMenu),n.msgErrData(),i.addClass(y)}else"layuiStyle"==n.dataStyle?o.msg(e[n.response.message],{icon:2}):o.msg(e.status[n.response.message],{icon:2})},complete:function(){n.load&&o.close(l)}})}},le.prototype.loadListTree=function(e,t,o,a){var n=this;if(a=a||n.getNodeDom().nowOrRootUl(),e.length>0)for(var i=0;i<e.length;i++){var r=e[i];if("object"===_typeof(r)){var s=n.parseData(r),d=n.queryListTreeByPid(s.treeId(),t);if(a.append(n.getLiItemDom(s.treeId(),s.parentId(),s.title(),s.isLast(d.length),s.iconClass(),s.checkArr(),o,s.spread(o),s.disabled(),s.isHide(),s.basicData(),s.recordData(),a.hasClass(b)?"root":"item")),d.length>0){var l=parseInt(o)+1;n.loadListTree(d,t,l,n.obj.find("ul[data-id='"+s.treeId()+"']"))}}}},le.prototype.queryListTreeByPid=function(e,t){var o=this,a=[];if(t)for(var n=0;n<t.length;n++){var i=t[n];"object"===_typeof(i)&&("null"==e||null==e?null==i[o.response.parentId]&&a.push(i):i[o.response.parentId]==e&&(i[o.response.treeId]==e?o.errData.push(i):a.push(i)))}return a},le.prototype.loadTree=function(e,t,o){var a=this;if(e){o=o||a.getNodeDom().nowOrRootUl();for(var n=0;n<e.length;n++){var i=e[n];if("object"===_typeof(i)){i[a.response.treeId]==i[a.response.parentId]&&a.errData.push(i);var r=a.parseData(i),s=r.children();if(o.append(a.getLiItemDom(r.treeId(),r.parentId(),r.title(),r.isLast(s.length),r.iconClass(),r.checkArr(),t,r.spread(t),r.disabled(),r.isHide(),r.basicData(),r.recordData(),o.hasClass(b)?"root":"item")),0!=s.length){var d=parseInt(t)+1;a.loadTree(s,d,a.obj.find("ul[data-id='"+r.treeId()+"']"))}}}}},le.prototype.msgErrData=function(){var e=this;if(e.errData.length>0&&e.errDataShow){for(var t="",a=0;a<e.errData.length;a++){var n=e.errData[a];t+="数据：【"+n[e.response.title]+"】中节点id和上级id值一致！ \n"}o.msg(t,{icon:2,time:5e3})}e.errData=[]},le.prototype.parseData=function(e){var t=this;return{treeId:function(){return e[t.response.treeId]},parentId:function(){return e[t.response.parentId]},title:function(){var o=t.formatter.title(e),a=e[t.response.title];return a=""==o||void 0==o||null==o?a:o,a||""},level:function(){return e[t.response.level]||""},iconClass:function(){return e[t.response.iconClass]||""},isLast:function(o){return 0==o?"boolean"!=typeof e[t.response.isLast]||e[t.response.isLast]:"boolean"==typeof e[t.response.isLast]&&e[t.response.isLast]},spread:function(o){return o<t.initLevel?"boolean"!=typeof e[t.response.spread]||e[t.response.spread]:"boolean"==typeof e[t.response.spread]&&e[t.response.spread]},disabled:function(){return"boolean"==typeof e[t.response.disabled]&&e[t.response.disabled]},isHide:function(){return"boolean"==typeof e[t.response.isHide]&&e[t.response.isHide]},checkArr:function o(){var o=[],a=e[t.response.checkArr];return"string"==typeof a&&(a=a.indexOf("{")>-1&&a.indexOf("}")>-1?JSON.parse(a):{type:"0",isChecked:a}),"object"===_typeof(a)&&("undefined"==typeof a.length?o.push(a):o=a),o.length>0&&o.length>t.checkArrLen&&(t.checkArrLen=o.length),o},children:function(){return e[t.response.childName]||[]},basicData:function(){return ae.escape(JSON.stringify(e[t.response.basicData]))||JSON.stringify({})},recordData:function a(){var a=t.record?ae.cloneObj(e,[t.response.basicData,t.response.childName]):{};return ae.escape(JSON.stringify(a))},data:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return e})}},le.prototype.getDom=function(e,t,o,a,i,r,d,l,c,u){var b=this,m=b.obj[0].id,v=(b.toolbar,b.checkbar);return{fnode:function(){var t=b.ficon,o=b.dot,n=b.usefontStyle.fnode.dot,i=b.usefontStyle.fnode.node.open,r=b.usefontStyle.fnode.node.close;
return"-1"!=t&&o?a?"<i class='"+n+" "+b.style.dfont+" "+b.style.ficon+"' data-spread='last' data-id='"+e+"' dtree-id='"+m+"'></i>":l?"<i class='"+i+" "+b.style.dfont+" "+b.style.ficon+"' data-spread='open' data-id='"+e+"' dtree-id='"+m+"'></i>":"<i class='"+r+" "+b.style.dfont+" "+b.style.ficon+"' data-spread='close' data-id='"+e+"' dtree-id='"+m+"'></i>":"-1"==t||o?"-1"==t&&o?a?"<i class='"+n+" "+b.style.dfont+" "+b.style.ficon+"' data-spread='last' data-id='"+e+"' dtree-id='"+m+"'></i>":l?"<i class='"+i+" "+b.style.dfont+" "+b.style.ficon+"' data-spread='open' data-id='"+e+"' dtree-id='"+m+"'></i>":"<i class='"+r+" "+b.style.dfont+" "+b.style.ficon+"' data-spread='close' data-id='"+e+"' dtree-id='"+m+"'></i>":"-1"!=t||o?void 0:a?"<i class='"+n+" "+g+" "+b.style.dfont+" "+b.style.ficon+"' data-spread='last' data-id='"+e+"' dtree-id='"+m+"' style='display:none;'></i>":l?"<i class='"+i+" "+b.style.dfont+" "+b.style.ficon+"' data-spread='open' data-id='"+e+"' dtree-id='"+m+"'></i>":"<i class='"+r+" "+b.style.dfont+" "+b.style.ficon+"' data-spread='close' data-id='"+e+"' dtree-id='"+m+"'></i>":a?"<i class='"+n+" "+g+" "+b.style.dfont+" "+b.style.ficon+"' data-spread='last' data-id='"+e+"' dtree-id='"+m+"'></i>":l?"<i class='"+i+" "+b.style.dfont+" "+b.style.ficon+"' data-spread='open' data-id='"+e+"' dtree-id='"+m+"'></i>":"<i class='"+r+" "+b.style.dfont+" "+b.style.ficon+"' data-spread='close' data-id='"+e+"' dtree-id='"+m+"'></i>"},node:function(){var t=b.nodeIcon,o=b.leafIcon,n=b.usefontStyle.snode.leaf,r=b.usefontStyle.snode.node.open,d=b.usefontStyle.snode.node.close;if(i){var c=b.iconfont;"string"==typeof c?(n=c+" "+i,r=c+" "+i,d=c+" "+i):(n=c[0]+" "+i,r=c[0]+" "+i,d=c[0]+" "+i)}return"-1"!=t&&"-1"!=o?a?"<i class='"+n+" "+s+" "+b.style.dfont+" "+b.style.icon+"' data-spread='last' data-id='"+e+"' dtree-id='"+m+"' data-iconClass='"+i+"'></i>":l?"<i class='"+r+" "+s+" "+b.style.dfont+" "+b.style.icon+"' data-spread='open' data-id='"+e+"' dtree-id='"+m+"' data-iconClass='"+i+"'></i>":"<i class='"+d+" "+s+" "+b.style.dfont+" "+b.style.icon+"' data-spread='close' data-id='"+e+"' dtree-id='"+m+"' data-iconClass='"+i+"'></i>":"-1"!=t&&"-1"==o?a?"<i class='"+n+" "+s+" "+b.style.dfont+" "+b.style.icon+"' data-spread='last' data-id='"+e+"' dtree-id='"+m+"' data-iconClass='"+i+"'></i>":l?"<i class='"+r+" "+s+" "+b.style.dfont+" "+b.style.icon+"' data-spread='open' data-id='"+e+"' dtree-id='"+m+"' data-iconClass='"+i+"'></i>":"<i class='"+d+" "+s+" "+b.style.dfont+" "+b.style.icon+"' data-spread='close' data-id='"+e+"' dtree-id='"+m+"' data-iconClass='"+i+"'></i>":"-1"==t&&"-1"!=o?a?"<i class='"+n+" "+s+" "+b.style.dfont+" "+b.style.icon+"' data-spread='last' data-id='"+e+"' dtree-id='"+m+"' data-iconClass='"+i+"'></i>":l?"<i class='"+r+" "+s+" "+b.style.dfont+" "+b.style.icon+"' data-spread='open' data-id='"+e+"' dtree-id='"+m+"' data-iconClass='"+i+"'></i>":"<i class='"+d+" "+s+" "+b.style.dfont+" "+b.style.icon+"' data-spread='close' data-id='"+e+"' dtree-id='"+m+"' data-iconClass='"+i+"'></i>":"-1"==t&&"-1"==o?a?"<i class='"+n+" "+s+" "+b.style.dfont+" "+b.style.icon+"' data-spread='last' data-id='"+e+"' dtree-id='"+m+"' data-iconClass='"+i+"'></i>":l?"<i class='"+r+" "+s+" "+b.style.dfont+" "+b.style.icon+"' data-spread='open' data-id='"+e+"' dtree-id='"+m+"' data-iconClass='"+i+"'></i>":"<i class='"+d+" "+s+" "+b.style.dfont+" "+b.style.icon+"' data-spread='close' data-id='"+e+"' dtree-id='"+m+"' data-iconClass='"+i+"'></i>":void 0},checkbox:function(){var t=!1;if("node"==b.checkbarLoad?v&&(t=!0):a&&v&&(t=!0),t){var o="<div class='"+h+"' data-id='"+e+"' dtree-id='"+m+"'>";if(r&&r.length>0)for(var n=0;n<r.length;n++){var i=r[n],s=i.isChecked,d=b.usefontStyle.checkbox.out;d="2"==s?b.usefontStyle.checkbox.noall+" "+b.style.chs:"1"==s?b.usefontStyle.checkbox.on+" "+b.style.chs:b.usefontStyle.checkbox.out;var l="";c&&(l=k),o+="<i class='"+d+" "+b.style.dfont+" "+b.style.cbox+" "+l+"' data-id='"+e+"' dtree-id='"+m+"' data-checked='"+i.isChecked+"' data-initchecked='"+i.isChecked+"' data-type='"+i.type+"' dtree-click='"+ee.checkNodeClick+"' data-par='."+f+"' dtree-disabled='"+c+"'></i>"}return o+="</div>"}return""},text:function(){var t="";return c&&(t=k),"<cite class='"+p+" "+t+"' data-id='"+e+"' data-leaf='"+(a?"leaf":"node")+"' dtree-disabled='"+c+"' >"+o+"</cite>"},ul:function(){return a?"<ul class='"+n+"' data-id='"+e+"' dtree-id='"+m+"'></ul>":l?"<ul class='"+n+" "+y+"' data-id='"+e+"' dtree-id='"+m+"'></ul>":"<ul class='"+n+"' data-id='"+e+"' dtree-id='"+m+"'></ul>"}}},le.prototype.replaceDom=function(e,o,a,i,r,d){var l=this,c=l.obj[0].id,u=(l.toolbar,l.checkbar);return{fnode:function(){l.getNodeDom(e).fnode().attr("data-id",o)},node:function(n){var r="",d=l.nodeIcon,u=l.leafIcon,h=l.usefontStyle.snode.leaf,f=l.usefontStyle.snode.node.open,p=l.usefontStyle.snode.node.close;if(n){var b=l.iconfont;"string"==typeof b?(h=b+" "+n,f=b+" "+n,p=b+" "+n):(h=b[0]+" "+n,f=b[0]+" "+n,p=b[0]+" "+n)}"-1"!=d&&"-1"!=u?r=a?"<i class='"+h+" "+s+" "+l.style.dfont+" "+l.style.icon+"' data-spread='last' data-id='"+o+"' dtree-id='"+c+"' data-iconClass='"+n+"'></i>":i?"<i class='"+f+" "+s+" "+l.style.dfont+" "+l.style.icon+"' data-spread='open' data-id='"+o+"' dtree-id='"+c+"' data-iconClass='"+n+"'></i>":"<i class='"+p+" "+s+" "+l.style.dfont+" "+l.style.icon+"' data-spread='close' data-id='"+o+"' dtree-id='"+c+"' data-iconClass='"+n+"'></i>":"-1"!=d&&"-1"==u?r=a?"<i class='"+h+" "+s+" "+l.style.dfont+" "+l.style.icon+"' data-spread='last' data-id='"+o+"' dtree-id='"+c+"' data-iconClass='"+n+"'></i>":i?"<i class='"+f+" "+s+" "+l.style.dfont+" "+l.style.icon+"' data-spread='open' data-id='"+o+"' dtree-id='"+c+"' data-iconClass='"+n+"'></i>":"<i class='"+p+" "+s+" "+l.style.dfont+" "+l.style.icon+"' data-spread='close' data-id='"+o+"' dtree-id='"+c+"' data-iconClass='"+n+"'></i>":"-1"==d&&"-1"!=u?r=a?"<i class='"+h+" "+s+" "+l.style.dfont+" "+l.style.icon+"' data-spread='last' data-id='"+o+"' dtree-id='"+c+"' data-iconClass='"+n+"'></i>":i?"<i class='"+f+" "+s+" "+l.style.dfont+" "+l.style.icon+"' data-spread='open' data-id='"+o+"' dtree-id='"+c+"' data-iconClass='"+n+"'></i>":"<i class='"+p+" "+s+" "+l.style.dfont+" "+l.style.icon+"' data-spread='close' data-id='"+o+"' dtree-id='"+c+"' data-iconClass='"+n+"'></i>":"-1"==d&&"-1"==u&&(r=a?"<i class='"+h+" "+s+" "+l.style.dfont+" "+l.style.icon+"' data-spread='last' data-id='"+o+"' dtree-id='"+c+"' data-iconClass='"+n+"'></i>":i?"<i class='"+f+" "+s+" "+l.style.dfont+" "+l.style.icon+"' data-spread='open' data-id='"+o+"' dtree-id='"+c+"' data-iconClass='"+n+"'></i>":"<i class='"+p+" "+s+" "+l.style.dfont+" "+l.style.icon+"' data-spread='close' data-id='"+o+"' dtree-id='"+c+"' data-iconClass='"+n+"'></i>"),""!=r&&l.getNodeDom(e).snode().replaceWith(t(r))},checkbox:function(n){var i=!1;if("node"==l.checkbarLoad?u&&(i=!0):a&&u&&(i=!0),i){var s="<div class='"+h+"' data-id='"+o+"' dtree-id='"+c+"'>";if(n&&n.length>0)for(var d=0;d<n.length;d++){var p=n[d],b=p.isChecked,m=l.usefontStyle.checkbox.out;m="2"==b?l.usefontStyle.checkbox.noall+" "+l.style.chs:"1"==b?l.usefontStyle.checkbox.on+" "+l.style.chs:l.usefontStyle.checkbox.out;var y="";r&&(y=k),s+="<i class='"+m+" "+l.style.dfont+" "+l.style.cbox+" "+y+"' data-id='"+o+"' dtree-id='"+c+"' data-checked='"+p.isChecked+"' data-initchecked='"+p.isChecked+"' data-type='"+p.type+"' dtree-click='"+ee.checkNodeClick+"' data-par='."+f+"' dtree-disabled='"+r+"'></i>"}s+="</div>",l.getNodeDom(e).snode().next("div").replaceWith(t(s))}},text:function(n){var i="";r&&(i=k);var s="<cite class='"+p+" "+i+"' data-id='"+o+"' data-leaf='"+(a?"leaf":"node")+"' dtree-disabled='"+r+"' >"+n+"</cite>";l.getNodeDom(e).cite().replaceWith(t(s))},ul:function b(){var b=a?"<ul class='"+n+"' data-id='"+o+"' dtree-id='"+c+"'></ul>":i?"<ul class='"+n+" "+y+"' data-id='"+o+"' dtree-id='"+c+"'></ul>":"<ul class='"+n+"' data-id='"+o+"' dtree-id='"+c+"'></ul>";l.getNodeDom(e).nextUl().replaceWith(t(b))},basicData:function(t){t="{}"==t?"":t,e.attr("data-basic",t)},recordData:function(t){t="{}"==t?"":t,e.attr("data-record",t)},p_li:function(){e.parent("li").attr("data-id",o)}}},le.prototype.getLiItemDom=function(e,t,o,a,n,s,d,l,c,u,h,p,b){var m=this,y=m.obj[0].id,k=m.getDom(e,t,o,a,n,s,d,l,c,u);h="{}"==h?"":h,p="{}"==p?"":p;var g="<div class='"+r+" "+m.style.item+"' data-id='"+e+"' dtree-id='"+y+"' dtree-click='"+ee.itemNodeClick+"' data-basic='"+h+"' data-record='"+p+"' dtree-disabled='"+c+"' dtree-hide='"+u+"' ";m.toolbar&&"contextmenu"==m.toolbarWay?("node"==m.toolbarLoad&&(g+=" d-contextmenu='true'>"),"noleaf"==m.toolbarLoad&&(g+=a?" d-contextmenu='false'>":" d-contextmenu='true'>"),"leaf"==m.toolbarLoad&&(g+=a?" d-contextmenu='true'>":" d-contextmenu='false'>")):g+=" d-contextmenu='false'>";var S="";u&&(S=v);var D=["<li class='"+f+" "+i+" "+S+"'data-id='"+e+"'data-pid='"+("root"==b?void 0!==_typeof(t)&&""!=t?t:"-1":t)+"'dtree-id='"+y+"'data-index='"+d+"'dtree-hide='"+u+"'>"+g,k.fnode(),k.node(),k.checkbox(),k.text(),"</div>",k.ul(),"</li>"].join("");return D},le.prototype.dataInit=function(e){var t=this,o=t.obj.find("div[data-id='"+e+"']");t.getNodeDom(o).parentLi().find("."+m).removeClass(m),t.getNodeDom(o).parentLi().find("."+t.style.itemThis).removeClass(t.style.itemThis),o.addClass(m),o.addClass(t.style.itemThis),t.setNodeParam(o);var a=o.parents("."+i);return a.children("ul").addClass(y),a.children("."+r).children("i[data-spread]."+ae.trimToDot(t.usefontStyle.fnode.node.close)).addClass(t.usefontStyle.fnode.node.open),a.children("."+r).children("i[data-spread]."+ae.trimToDot(t.usefontStyle.fnode.node.close)).removeClass(t.usefontStyle.fnode.node.close),a.children("."+r).children("i[data-spread]."+ae.trimToDot(t.usefontStyle.snode.node.close)).addClass(t.usefontStyle.snode.node.open),a.children("."+r).children("i[data-spread]."+ae.trimToDot(t.usefontStyle.snode.node.close)).removeClass(t.usefontStyle.snode.node.close),t.getNowParam()},le.prototype.escape=function(e){return ae.escape(e)},le.prototype.unescape=function(e){return ae.unescape(e)},le.prototype.navThis=function(e){var t=this,o="object"===_typeof(e)?e:0==t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id='"+e+"']").length?null:t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id='"+e+"']");null!=o&&(t.obj.find("div[data-id]").parent().find("."+m).removeClass(m),t.obj.find("div[data-id]").parent().find("."+t.style.itemThis).removeClass(t.style.itemThis),o.addClass(m),o.addClass(t.style.itemThis))},le.prototype.accordionUL=function(e){var o=this;if(o.accordion){e.closest("li[data-index]").siblings("li[data-index]").children("ul[data-id]").removeClass(y);var a=e.closest("li[data-index]").siblings("li[data-index]").children("ul[data-id]").prev("div");if(a.length&&a.length>0)for(var n=0;n<a.length;n++){var i=t(a[n]),r=o.getNodeDom(i).fnode(),s=o.getNodeDom(i).snode();"last"!=r.attr("data-spread")&&o.operateIcon(r,s).close()}}},le.prototype.clickSpread=function(e){var t=this,o=t.getNodeDom(e).fnode(),a=t.getNodeDom(e).snode(),n=(t.getNodeDom(e).cite(),o.attr("data-spread")),i=e.next("ul");i.length>0&&("close"==n?("load"==t.type?t.cache?i.html()?(i.addClass(y),t.accordionUL(i)):(t.getChild(e),t.accordionUL(i)):(i.html(""),t.getChild(e),t.accordionUL(i)):(i.addClass(y),t.accordionUL(i)),t.operateIcon(o,a).open()):"open"==n&&(i.removeClass(y),t.operateIcon(o,a).close()))},le.prototype.setDisabledNodes=function(e){for(var t=this,o=e.split(","),a=0;a<o.length;a++){var n=t.getNodeDom(o[a]).div(),i=n.children("div."+h).children("i[data-par]"),r=n.children("cite[data-leaf]");null!=n&&"true"!=n.attr("dtree-disabled")&&(n.attr("dtree-disabled","true"),i.attr("dtree-disabled","true"),i.addClass(k),r.attr("dtree-disabled","true"),r.addClass(k))}},le.prototype.cancelDisabledNodes=function(e){for(var t=this,o=e.split(","),a=0;a<o.length;a++){var n=t.getNodeDom(o[a]).div(),i=n.children("div."+h).children("i[data-par]"),r=n.children("cite[data-leaf]");null!=n&&"true"==n.attr("dtree-disabled")&&(n.attr("dtree-disabled","false"),i.attr("dtree-disabled","false"),i.removeClass(k),r.attr("dtree-disabled","false"),r.removeClass(k))}},le.prototype.getDisabledNodesParam=function(e){for(var t=this,o=e.split(","),a=[],n=0;n<o.length;n++){var i=t.getNodeDom(o[n]).div();null!=i&&"true"==i.attr("dtree-disabled")&&a.push(t.getRequestParam(t.getTempNodeParam(i)))}return a},le.prototype.getAllDisabledNodesParam=function(){var e=this,o=[];return e.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][dtree-disabled='true']").each(function(){var a=t(this);o.push(e.getRequestParam(e.getTempNodeParam(a)))}),o},le.prototype.setHideNodes=function(e){for(var t=this,o=e.split(","),a=0;a<o.length;a++){var n=t.getNodeDom(o[a]).div(),i=n.parent("li[dtree-hide]");null!=n&&"true"!=n.attr("dtree-hide")&&(n.attr("dtree-hide","true"),i.attr("dtree-hide","true"),i.addClass(v))}},le.prototype.cancelHideNodes=function(e){for(var t=this,o=e.split(","),a=0;a<o.length;a++){var n=t.getNodeDom(o[a]).div(),i=n.parent("li[dtree-hide]");null!=n&&"true"==n.attr("dtree-hide")&&(n.attr("dtree-hide","false"),i.attr("dtree-hide","false"),i.removeClass(v))}},le.prototype.getHideNodesParam=function(e){for(var t=this,o=e.split(","),a=[],n=0;n<o.length;n++){var i=t.getNodeDom(o[n]).div();null!=i&&"true"==i.attr("dtree-hide")&&a.push(t.getRequestParam(t.getTempNodeParam(i)))}return a},le.prototype.getAllHideNodesParam=function(){var e=this,o=[];return e.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][dtree-hide='true']").each(function(){var a=t(this);o.push(e.getRequestParam(e.getTempNodeParam(a)))}),o},le.prototype.refreshTree=function(){_this.obj.html(""),_this.initNodeParam(),_this.init()},le.prototype.partialRefreshAdd=function(e,t){var a=this;$ul=e.next("ul");var n=e.find("i[data-spread]");if("last"==n.eq(0).attr("data-spread")?a.operateIcon(n.eq(0),n.eq(1)).openWithDot():a.operateIcon(n.eq(0),n.eq(1)).open(),$ul.addClass(y),a.accordionUL($ul),t)if(t.length&&t.length>0)a.getChild(e,t);else{var i=a.parseData(t);if(i.treeId()){var r=parseInt(e.parent("li").attr("data-index"))+1;$ul.append(a.getLiItemDom(i.treeId(),i.parentId(),i.title(),i.isLast(0),i.iconClass(),i.checkArr(),r,i.spread(),i.disabled(),i.isHide(),i.basicData(),i.recordData(),"item")),$thisDiv=$ul.find("div[data-id='"+i.treeId()+"']"),a.setNodeParam($thisDiv)}else o.msg("添加失败,节点ID为undefined！",{icon:5}),a.setNodeParam(e)}else a.getChild(e)},le.prototype.partialRefreshEdit=function(e,t){var a=this;if($ul=e.next("ul"),t)if("object"===_typeof(t)){var n=a.parseData(t);if(n.treeId()){var i=a.replaceDom(e,n.treeId(),n.isLast(0),n.spread(),n.disabled(),n.isHide());i.node(n.iconClass()),i.checkbox(n.checkArr()),i.text(n.title()),i.ul(),i.basicData(n.basicData()),i.recordData(n.recordData()),a.setNodeParam(e)}else o.msg("编辑失败,节点ID为undefined！",{icon:5}),a.setNodeParam(e)}else a.getNodeDom(e).cite().html(t)},le.prototype.partialRefreshDel=function(e){var t=this;if($p_li=e.parent("li"),$p_ul=t.getNodeDom(e).parentUl(),$p_div=t.getNodeDom(e).parentDiv(),$p_li.remove(),0==$p_ul.children("li").length){var o=$p_div.find("i[data-spread]");t.operateIcon(o.eq(0),o.eq(1)).closeWithDot()}t.initNodeParam()},le.prototype.chooseDataInit=function(e){for(var o=this,a=e.split(","),n=0;n<a.length;n++)o.obj.find("i[dtree-click='"+ee.checkNodeClick+"']").each(function(){t(this).attr("data-id")==a[n]&&o.checkStatus(t(this)).check()});var s=o.obj.find("i[dtree-click='"+ee.checkNodeClick+"'][data-checked='1']").parents("."+i);return s.children("ul").addClass(y),s.children("."+r).children("i[data-spread]."+ae.trimToDot(o.usefontStyle.fnode.node.close)).addClass(o.usefontStyle.fnode.node.open),s.children("."+r).children("i[data-spread]."+ae.trimToDot(o.usefontStyle.fnode.node.close)).removeClass(o.usefontStyle.fnode.node.close),s.children("."+r).children("i[data-spread]."+ae.trimToDot(o.usefontStyle.snode.node.close)).addClass(o.usefontStyle.snode.node.open),s.children("."+r).children("i[data-spread]."+ae.trimToDot(o.usefontStyle.snode.node.close)).removeClass(o.usefontStyle.snode.node.close),o.getCheckbarNodesParam()},le.prototype.checkAllOrNot=function(e){var t=this,o=e.attr("data-par"),a=e.attr("data-type"),i=e.closest(o),s=e.parents(o),d=i.find(o);if("1"==e.attr("data-checked")){t.checkStatus(e).noCheck();var l=d.find(">."+r+">."+h+">i[data-type='"+a+"']");t.checkStatus(l).noCheck();for(var c=1,u=s;c<u.length;c++){var f=u.eq(c).find(">."+n+" ."+h+">i[data-type='"+a+"'][data-checked='1']").length;if(0==f){var p=u.eq(c).find(">."+r+">."+h+">i[data-type='"+a+"']");t.checkStatus(p).noCheck()}}}else{t.checkStatus(e).check();var l=d.find(">."+r+">."+h+">i[data-type='"+a+"']");t.checkStatus(l).check();for(var c=1,u=s;c<u.length;c++){var p=u.eq(c).find(">."+r+">."+h+">i[data-type='"+a+"']");t.checkStatus(p).check()}}},le.prototype.checkAllOrNoallOrNot=function(e){var t=this,o=(e.closest("."+r),e.attr("data-par")),a=e.attr("data-type"),i=e.closest(o),s=e.parents(o),d=i.find(o);if("1"==e.attr("data-checked")){t.checkStatus(e).noCheck();var l=d.find(">."+r+">."+h+">i[data-type='"+a+"']");t.checkStatus(l).noCheck();for(var c=1,u=s;c<u.length;c++){var f=u.eq(c).find(">."+n+" ."+h+">i[data-type='"+a+"'][data-checked='1']").length,p=u.eq(c).find(">."+r+">."+h+">i[data-type='"+a+"']");0==f?t.checkStatus(p).noCheck():t.checkStatus(p).noallCheck()}}else{t.checkStatus(e).check();var l=d.find(">."+r+">."+h+">i[data-type='"+a+"']");t.checkStatus(l).check();for(var c=1,u=s;c<u.length;c++){var b=u.eq(c).find(">."+n+" ."+h+">i[data-type='"+a+"'][data-checked='1']").length,m=u.eq(c).find(">."+n+" ."+h+">i[data-type='"+a+"']").length,p=u.eq(c).find(">."+r+">."+h+">i[data-type='"+a+"']");b!=m?t.checkStatus(p).noallCheck():t.checkStatus(p).check()}}},le.prototype.checkAllOrPcascOrNot=function(e){var t=this,o=(e.closest("."+r),e.attr("data-par")),a=e.attr("data-type"),n=e.closest(o),i=(e.parents(o),n.find(o));if("1"==e.attr("data-checked")){t.checkStatus(e).noCheck();var s=i.find(">."+r+">."+h+">i[data-type='"+a+"']");t.checkStatus(s).noCheck()}else{t.checkStatus(e).check();var s=i.find(">."+r+">."+h+">i[data-type='"+a+"']");t.checkStatus(s).check()}},le.prototype.checkOrNot=function(e){var t=this,o=(e.closest("."+r),e.attr("data-par")),a=(e.attr("data-type"),e.closest(o));e.parents(o),a.find(o);"1"==e.attr("data-checked")?t.checkStatus(e).noCheck():t.checkStatus(e).check()},le.prototype.checkOnly=function(e){var t=this,o=(e.closest("."+r),e.attr("data-par")),a=(e.attr("data-type"),e.closest(o)),n=(e.parents(o),a.find(o),e.attr("data-checked")),i=t.obj.find("i[data-checked]");t.checkStatus(i).noCheck(),"1"!=n&&t.checkStatus(e).check()},le.prototype.changeCheck=function(){var e=this,o=e.temp,a=o[0];"all"==e.checkbarType?e.checkAllOrNot(a):"no-all"==e.checkbarType?e.checkAllOrNoallOrNot(a):"p-casc"==e.checkbarType?e.checkAllOrPcascOrNot(a):"self"==e.checkbarType?e.checkOrNot(a):"only"==e.checkbarType?e.checkOnly(a):e.checkAllOrNot(a);var n=e.setAndGetCheckbarNodesParam();e.checkbarFun.chooseDone(n),layui.event.call(this,D,"chooseDone("+t(e.obj)[0].id+")",{checkbarParams:n}),e.temp=[]},le.prototype.initNoAllCheck=function(){var e=this,o=e.obj.find("i[data-checked='1']");if(o.length>0)for(var a=0;a<o.length;a++)for(var i=t(o[a]),s=i.attr("data-par"),d=i.attr("data-type"),l=i.closest(s),c=i.parents(s),u=(l.find(s),1),f=c;u<f.length;u++){var p=f.eq(u).find(">."+n+" ."+h+">i[data-type='"+d+"'][data-checked='1']").length,b=f.eq(u).find(">."+n+" ."+h+">i[data-type='"+d+"']").length,m=f.eq(u).find(">."+r+">."+h+">i[data-type='"+d+"']");p!=b?e.checkStatus(m).noallCheck():e.checkStatus(m).check()}},le.prototype.initAllCheck=function(){var e=this,o=e.obj.find("i[data-checked='1']");if(o.length>0)for(var a=0;a<o.length;a++)for(var n=t(o[a]),i=n.attr("data-par"),s=n.attr("data-type"),d=n.closest(i),l=n.parents(i),c=(d.find(i),1),u=l;c<u.length;c++){var f=u.eq(c).find(">."+r+">."+h+">i[data-type='"+s+"']");e.checkStatus(f).check()}},le.prototype.checkStatus=function(e){var t=this;return{check:function(){e.removeClass(t.usefontStyle.checkbox.out),e.removeClass(t.usefontStyle.checkbox.noall),e.addClass(t.usefontStyle.checkbox.on),e.addClass(t.style.chs),e.attr("data-checked","1")},noCheck:function(){e.removeClass(t.usefontStyle.checkbox.noall),e.removeClass(t.usefontStyle.checkbox.on),e.removeClass(t.style.chs),e.addClass(t.usefontStyle.checkbox.out),e.attr("data-checked","0")},noallCheck:function(){e.removeClass(t.usefontStyle.checkbox.out),e.removeClass(t.usefontStyle.checkbox.on),e.addClass(t.usefontStyle.checkbox.noall),e.addClass(t.style.chs),e.attr("data-checked","2")}}},le.prototype.setAndGetCheckbarNodesParam=function(){var e=this;return e.checkbarNode=[],"change"==e.checkbarData?e.obj.find("i[data-par][dtree-disabled='false']").each(function(){var o=t(this),a=o.closest("."+r);o.attr("data-checked")!=o.attr("data-initchecked")&&e.checkbarNode.push(e.getRequestParam(e.getCheckbarNodeParam(a,o)))}):"all"==e.checkbarData?e.obj.find("i[data-par][data-checked][dtree-disabled='false']").each(function(){var o=t(this),a=o.closest("."+r);e.checkbarNode.push(e.getRequestParam(e.getCheckbarNodeParam(a,o)))}):"choose"==e.checkbarData?e.obj.find("i[data-par][data-checked='1'][dtree-disabled='false']").each(function(){var o=t(this),a=o.closest("."+r);e.checkbarNode.push(e.getRequestParam(e.getCheckbarNodeParam(a,o)))}):"halfChoose"==e.checkbarData&&(e.obj.find("i[data-par][data-checked='1'][dtree-disabled='false']").each(function(){var o=t(this),a=o.closest("."+r);e.checkbarNode.push(e.getRequestParam(e.getCheckbarNodeParam(a,o)))}),e.obj.find("i[data-par][data-checked='2'][dtree-disabled='false']").each(function(){var o=t(this),a=o.closest("."+r);e.checkbarNode.push(e.getRequestParam(e.getCheckbarNodeParam(a,o)))})),e.checkbarNode},le.prototype.getCheckbarNodesParam=function(){var e=this;return e.setAndGetCheckbarNodesParam()},le.prototype.getCheckbarNodeParam=function(e,t){var o=this,a={};return a.nodeId=e.attr("data-id"),a.parentId=o.getNodeDom(e).parentLi().attr("data-pid"),a.context=o.getNodeDom(e).cite().text(),a.isLeaf="leaf"==o.getNodeDom(e).cite().attr("data-leaf"),a.level=o.getNodeDom(e).parentLi().attr("data-index"),a.spread="open"==o.getNodeDom(e).fnode().attr("data-spread"),a.basicData=e.attr("data-basic"),a.recordData=e.attr("data-record"),a.dataType=t.attr("data-type"),a.ischecked=t.attr("data-checked"),a.initchecked=t.attr("data-initchecked"),a},le.prototype.changeCheckbarNodes=function(){var e=!1,o=this;return o.obj.find("i[data-par]").each(function(){var o=t(this);if($div=o.closest("."+r),o.attr("data-checked")!=o.attr("data-initchecked"))return e=!0,!0}),e},le.prototype.initTreePlus=function(){var e=this;e.obj.prevAll("div#dtree_menubar_"+e.obj[0].id).remove(),e.toolbarMenu={},e.menubar&&e.menubarTips.group&&e.menubarTips.group.length>0&&e.obj.before("<div class='"+d+"' id='dtree_menubar_"+e.obj[0].id+"'><div class='layui-btn-group'></div></div>"),e.toolbar&&"contextmenu"==e.toolbarWay&&(e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id).remove(),e.obj.before("<div class='"+l+" layui-nav' id='dtree_toolbar_"+e.obj[0].id+"'><div class='layui-nav-item'><dl class='layui-nav-child layui-anim'></dl></div></div>"))},le.prototype.openTreePlus=function(){var e=this,t=[];if(e.toolbar&&e.getToolbarDom(),e.menubar){var o=e.menubarTips,a=o.toolbar,n=o.group;o.freedom;if(a&&a.length>0)for(var i=0;i<a.length;i++){var r=a[i];"string"==typeof r&&e.getMenubarToolDom(r),"object"===_typeof(r)&&e.getExtMenubarToolDom(r)}if(n&&n.length>0){for(var i=0;i<n.length;i++){var s=n[i];"string"==typeof s&&t.push(e.getMenubarDom(s)),"object"===_typeof(s)&&t.push(e.getExtMenubarDom(s))}e.obj.prevAll("div#dtree_menubar_"+e.obj[0].id).children("div.layui-btn-group").append(t.join(""))}}},le.prototype.getMenubarDom=function(e){var t=this,o=t.obj[0].id,a="";switch(e){case oe.moveDown:a="<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+oe.moveDown+"' title='展开全部节点'><i class='"+t.usefontStyle.menubar.movedown+"'></i></button>";break;case oe.moveUp:a="<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+oe.moveUp+"' title='收缩全部节点'><i class='"+t.usefontStyle.menubar.moveup+"'></i></button>";break;case oe.refresh:a="<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+oe.refresh+"' title='刷新'><i class='"+t.usefontStyle.menubar.refresh+"'></i></button>";break;case oe.checkAll:a=t.checkbar&&"only"!=t.checkbarType?"<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+oe.checkAll+"' title='全选节点'><i class='"+t.usefontStyle.menubar.checkAll+"'></i></button>":"";break;case oe.unCheckAll:a=t.checkbar&&"only"!=t.checkbarType?"<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+oe.unCheckAll+"' title='全不选节点'><i class='"+t.usefontStyle.menubar.unCheckAll+"'></i></button>":"";break;case oe.invertAll:a=t.checkbar&&"only"!=t.checkbarType?"<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+oe.invertAll+"' title='反选节点'><i class='"+t.usefontStyle.menubar.invertAll+"'></i></button>":"";break;case oe.remove:a=t.checkbar?"<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+oe.remove+"' title='删除选中节点'><i class='"+t.usefontStyle.menubar.remove+"'></i></button>":"";break;case oe.searchNode:a="<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+oe.searchNode+"' title='查询节点'><i class='"+t.usefontStyle.menubar.search+"'></i></button>"}return a},le.prototype.getExtMenubarDom=function(e){var t=this;return"<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+t.obj[0].id+"' d-menu='"+e.menubarId+"' title='"+e.title+"'><i class='"+t.usefontStyle.menubarExt+" "+e.icon+"'></i></button>"},le.prototype.getMenubarToolDom=function(e){var t=this;t.obj[0].id;switch(e){case oe.moveDown:t.toolbarMenu[oe.moveDown]=t.setToolbarDom().setMenuToolbarOption(oe.moveDown,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.movedown,"展开全部");break;case oe.moveUp:t.toolbarMenu[oe.moveUp]=t.setToolbarDom().setMenuToolbarOption(oe.moveUp,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.moveup,"收缩全部");break;case oe.refresh:t.toolbarMenu[oe.refresh]=t.setToolbarDom().setMenuToolbarOption(oe.refresh,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.refresh,"刷新");break;case oe.checkAll:t.checkbar&&"only"!=t.checkbarType&&(t.toolbarMenu[oe.checkAll]=t.setToolbarDom().setMenuToolbarOption(oe.checkAll,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.checkAll,"全选节点"));break;case oe.unCheckAll:t.checkbar&&"only"!=t.checkbarType&&(t.toolbarMenu[oe.unCheckAll]=t.setToolbarDom().setMenuToolbarOption(oe.unCheckAll,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.unCheckAll,"全不选节点"));break;case oe.invertAll:t.checkbar&&"only"!=t.checkbarType&&(t.toolbarMenu[oe.invertAll]=t.setToolbarDom().setMenuToolbarOption(oe.invertAll,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.invertAll,"反选节点"));break;case oe.remove:t.checkbar&&(t.toolbarMenu[oe.remove]=t.setToolbarDom().setMenuToolbarOption(oe.remove,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.remove,"删除选中"));break;case oe.searchNode:t.toolbarMenu[oe.searchNode]=t.setToolbarDom().setMenuToolbarOption(oe.searchNode,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.searchNode,"查询")}},le.prototype.getExtMenubarToolDom=function(e){var t=this;t.toolbarMenu[e.menubarId]=t.setToolbarDom().setMenuToolbarOption(e.menubarId,e.title,t.usefontStyle.toolbar.menubarExt+" "+e.icon,"")},le.prototype.menubarMethod=function(){var e=this;return{openAllNode:function(o){for(var a=o||e.obj.children("li").children("ul"),n=0;n<a.length;n++){var i=t(a[n]),r=i.prev("div"),s=e.getNodeDom(r).fnode(),d=e.getNodeDom(r).snode(),l=e.getNodeDom(r).cite(),c=s.attr("data-spread"),u=l.attr("data-leaf");if("leaf"!=u){"open"==c||("load"==e.type?e.cache?i.html()?i.addClass(y):e.getChild(r):(i.html(""),e.getChild(r)):i.addClass(y),e.operateIcon(s,d).open());var h=i.children("li").children("ul");e.menubarMethod().openAllNode(h)}}},closeAllNode:function(){e.obj.find("."+n).each(function(){var o=t(this),a=o.prev("div"),n=e.getNodeDom(a).fnode(),i=e.getNodeDom(a).snode(),r=e.getNodeDom(a).cite();n.attr("data-spread"),r.attr("data-leaf");o.removeClass(y),e.operateIcon(n,i).close()})},refreshTree:function(){e.refreshTree()},checkAll:function(){var t=e.obj.find("i[data-par][data-checked!='1']");t.length>0&&e.checkStatus(t).check()},unCheckAll:function(){var t=e.obj.find("i[data-par][data-checked!='0']");t.length>0&&e.checkStatus(t).noCheck()},invertAll:function(){if(e.obj.find("i[data-par]").length>0){var o=!1;e.obj.find("i[data-par]").each(function(){var a=t(this);"2"==a.attr("data-checked")?o=!0:"0"==a.attr("data-checked")?e.checkStatus(a).check():"1"==a.attr("data-checked")&&e.checkStatus(a).noCheck()}),o?e.initNoAllCheck():e.initAllCheck()}},remove:function(){var a=e.obj.find("i[data-par][data-checked='1']").length;if(0==a)o.msg("请至少选中一个节点",{icon:2});else{e.checkbarNode=[];e.obj.find("i[data-par][data-checked='1']").each(function(){var o=t(this),a=o.closest("."+r);e.checkbarNode.push(e.getRequestParam(e.getCheckbarNodeParam(a,o)))}),o.confirm("确定要删除选中节点？",{icon:3,title:"删除选中节点"},function(t){var a=e.menubarFun.remove(e.checkbarNode);a&&(e.obj.find("i[data-par][data-checked='1']").closest("."+r).next("ul").remove(),e.obj.find("i[data-par][data-checked='1']").closest("."+r).remove(),e.checkbarNode=[]),o.close(t)})}},searchNode:function(){o.prompt({formType:0,value:"",title:"查询节点"},function(t,a,n){if(t){var i=e.searchNode(t);i||o.msg("该名称节点不存在！",{icon:5})}else o.msg("未指定查询节点名称",{icon:5});o.close(a)})},extMethod:function(t,o,a){if(e.menubar&&e.menubarTips.group&&e.menubarTips.group.length>0&&"group"==a)for(var n=0;n<e.menubarTips.group.length;n++){var i=e.menubarTips.group[n];if(t==i.menubarId){i.handler(e.getRequestParam(e.getNodeParam(o),o));break}}if(e.menubar&&e.menubarTips.toolbar&&e.menubarTips.toolbar.length>0&&"toolbar"==a)for(var n=0;n<e.menubarTips.toolbar.length;n++){var i=e.menubarTips.toolbar[n];if(t==i.menubarId){i.handler(e.getRequestParam(e.getNodeParam(o),o));break}}if(e.menubar&&e.menubarTips.freedom&&e.menubarTips.freedom.length>0&&"freedom"==a)for(var n=0;n<e.menubarTips.freedom.length;n++){var i=e.menubarTips.freedom[n];if(t==i.menubarId){i.handler(e.getRequestParam(e.getNodeParam(o),o));break}}}}},le.prototype.menubarListener=function(e,t){var o=this,a=o.getNodeDom().nowDiv();switch(e){case oe.moveDown:o.menubarMethod().openAllNode();break;case oe.moveUp:o.menubarMethod().closeAllNode();break;case oe.refresh:o.menubarMethod().refreshTree();break;case oe.checkAll:o.menubarMethod().checkAll();break;case oe.unCheckAll:o.menubarMethod().unCheckAll();break;case oe.invertAll:o.menubarMethod().invertAll();break;case oe.remove:o.menubarMethod().remove();break;case oe.searchNode:o.menubarMethod().searchNode();break;default:o.menubarMethod().extMethod(e,a,t)}},le.prototype.searchNode=function(e){var o=this,a=!1,n=[];if(o.obj.find("cite[data-leaf]").each(function(){var o=t(this),a=o.html();if(a.indexOf(e)>-1){if("leaf"==o.attr("data-leaf")){var i="";o.parents("li").each(function(){i="-"+t(this).find("cite[data-leaf]").html()+i}),i=i.substring(1,i.length),o.attr("title",i)}var r=0;o.parents("li").each(function(){var o=t(this).find("cite[data-leaf]").html();if(o.indexOf(e)>-1&&r++,r>=2)return!0}),r<2&&n.push(o.closest("li").prop("outerHTML"))}}),n.length>0){a=!0,o.obj.html("");for(var i=0;i<n.length;i++)o.obj.append(n[i])}return a},le.prototype.getToolbarDom=function(){var e=this,t=e.toolbarShow,o=e.toolbarExt;e.toolbarWay;if(t.length>0)for(var a=0;a<t.length;a++){var n=t[a];"pulldown"==n&&(e.toolbarMenu[te.pulldown]=e.setToolbarDom().setToolbarOption(te.pulldown,e.toolbarStyle.title,e.usefontStyle.toolbar.pulldown,"展开")),"pullup"==n&&(e.toolbarMenu[te.pullup]=e.setToolbarDom().setToolbarOption(te.pullup,e.toolbarStyle.title,e.usefontStyle.toolbar.pullup,"收缩")),
"add"==n&&(e.toolbarMenu[te.addTool]=e.setToolbarDom().setToolbarOption(te.addTool,e.toolbarStyle.title,e.usefontStyle.toolbar.add,"新增")),"edit"==n&&(e.toolbarMenu[te.editTool]=e.setToolbarDom().setToolbarOption(te.editTool,e.toolbarStyle.title,e.usefontStyle.toolbar.edit,"编辑")),"delete"==n&&(e.toolbarMenu[te.delTool]=e.setToolbarDom().setToolbarOption(te.delTool,e.toolbarStyle.title,e.usefontStyle.toolbar.del,"删除"))}if(o.length>0)for(var a=0;a<o.length;a++){var i=o[a];e.toolbarMenu[i.toolbarId]=e.setToolbarDom().setToolbarOption(i.toolbarId,i.title,e.usefontStyle.toolbarExt+" "+i.icon,"")}},le.prototype.setToolbarDom=function(){var e=this,o=e.toolbarWay;return{setToolbarOption:function(e,t,a,n){return"contextmenu"==o?"<dd><a dtree-tool='"+e+"'><i class='"+a+"'></i>&nbsp;"+n+t+"</a></dd>":"fixed"==o||"follow"==o?"<a dtree-tool='"+e+"' title='"+n+t+"'><i class='"+a+"'></i></a>":void 0},setMenuToolbarOption:function(t,a,n,i){var r=e.obj[0].id;return"contextmenu"==o?"<dd><a dtree-id='"+r+"' d-menu='"+t+"'><i class='"+n+"'></i>&nbsp;"+i+a+"</a></dd>":"fixed"==o||"follow"==o?"<a dtree-id='"+r+"' d-menu='"+t+"' title='"+i+a+"'><i class='"+n+"'></i></a>":void 0},setToolbarPlace:function(a){if("contextmenu"==o){if(a){e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id).find("div.layui-nav-item>dl.layui-nav-child").html("");for(var n in a)e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id).find("div.layui-nav-item>dl.layui-nav-child").append(a[n])}}else"fixed"!=o&&"follow"!=o||e.obj.find("cite[data-leaf][dtree-disabled='false']").each(function(){var o=t(this);e.dynamicToolbarDom(o)})}}},le.prototype.dynamicToolbarDom=function(e){var t=this,o=t.toolbarWay;if(0==e.next("em."+u).length){var a=e.parent("div"),n=t.getRequestParam(t.getTempNodeParam(a)),i=t.toolbarFun.loadToolbarBefore(ae.cloneObj(t.toolbarMenu),n,a),r="follow"==o?v:"",s=["<em class='"+u+" "+r+"'>"];if(i)for(var d in i)s.push(i[d]);s.push("</em>"),e.after(s.join(""))}},le.prototype.toolbarHide=function(){var e=this;if(e.toolbar&&"contextmenu"==e.toolbarWay){var t=e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id);t.find(".layui-nav-child").removeClass("layui-anim-fadein layui-show")}},le.prototype.toolbarMethod=function(){var e=this;return{pulldown:function(o){if(o)for(var a=o,n=0;n<a.length;n++){var i=t(a[n]),r=i.prev("div"),s=e.getNodeDom(r).fnode(),d=e.getNodeDom(r).snode(),l=e.getNodeDom(r).cite(),c=s.attr("data-spread"),u=l.attr("data-leaf");if("leaf"!=u){"open"==c||("load"==e.type?e.cache?i.html()?i.addClass(y):e.getChild(r):(i.html(""),e.getChild(r)):i.addClass(y),e.operateIcon(s,d).open());var h=i.children("li").children("ul");e.toolbarMethod().pulldown(h)}}},pullup:function(o){o.find("."+n).each(function(){var o=t(this),a=o.prev("div"),n=e.getNodeDom(a).fnode(),i=e.getNodeDom(a).snode(),r=e.getNodeDom(a).cite();n.attr("data-spread"),r.attr("data-leaf");o.removeClass(y),e.operateIcon(n,i).close()})}}},le.prototype.toolbarListener=function(e,n){var i=this,r=n.children("cite[data-leaf]"),s=n.next("ul"),d=n.parent("li[data-index]"),l=d.parent("ul"),c=l.prev("div"),u=r.html();switch(e){case te.pulldown:i.toolbarMethod().pulldown(s);break;case te.pullup:i.toolbarMethod().pullup(d);break;case te.addTool:var h=i.loadToolBar(u,te.addTool);o.open({title:"新增"+i.toolbarStyle.title,type:1,area:i.toolbarStyle.area,content:h,success:function(e,r){a.render(),a.on("submit(dtree_addNode_form)",function(e){var e=e.field,a=n.attr("data-id"),l=n.attr("data-id")+"_node_"+s[0].childNodes.length,c=parseInt(d.attr("data-index"))+1,u=[];if(i.checkArrLen>0)for(var h=0;h<i.checkArrLen;h++)u.push({type:h,isChecked:"0"});s.append(i.getLiItemDom(l,a,e.addNodeName,!0,"",u,c,!1,!1,!1,"","","item")),s.find("li[data-id='"+l+"']").hide();var f=s.find("div[data-id='"+l+"']");node=i.getNodeParam(f);var p=i.getRequestParam(node);return p=t.extend(p,e),i.temp=[l,s,n,c],i.toolbarFun.addTreeNode(p,n),o.close(r),!1})}});break;case te.editTool:var h=i.loadToolBar(u,te.editTool);o.open({title:"编辑"+i.toolbarStyle.title,type:1,area:i.toolbarStyle.area,content:h,success:function(e,s){i.toolbarFun.editTreeLoad(i.getRequestParam(i.getNodeParam(n))),a.render(),a.on("submit(dtree_editNode_form)",function(e){var e=e.field;r.html(e.editNodeName),node=i.getNodeParam(n);var a=i.getRequestParam(node);a=t.extend(a,e),i.temp=[r,n,u,c],i.toolbarFun.editTreeNode(a,n),o.close(s)})}});break;case te.delTool:o.confirm("确定要删除该"+i.toolbarStyle.title+"？",{icon:3,title:"删除"+i.toolbarStyle.title},function(e){i.getNodeParam(n);i.temp=[d,c],i.toolbarFun.delTreeNode(i.getRequestParam(i.getNodeParam(n)),n),o.close(e)});break;default:if(i.toolbarExt.length>0)for(var f=0;f<i.toolbarExt.length;f++){var p=i.toolbarExt[f];if(e==p.toolbarId){p.handler(i.getRequestParam(i.getNodeParam(n)),n);break}}}},le.prototype.loadToolBar=function(e,o){var a=this,n=(a.toolbarShow,a.toolbarBtn),i="";switch(o){case te.addTool:var r=[{label:"当前选中",name:"nodeTitle",type:"text",value:e,defElem:"nowChoose",readonly:!0},{label:"新增"+a.toolbarStyle.title,name:"addNodeName",type:"text",value:"",defElem:"nowChange",verify:"required"},{type:"submit",value:"确认添加",defElem:"btn",filter:"dtree_addNode_form"}],s=['<div class="'+c+'"><form class="layui-form layui-form-pane" lay-filter="dtree_addNode_form">'];if(null!=n&&n.length>0&&null!=n[0]&&void 0!=n[0]&&n[0].length>0)for(var d=n[0],l=0;l<d.length;l++){var u=d[l].defElem;"nowChoose"==u?t.extend(r[0],d[l]):"nowChange"==u?t.extend(r[1],d[l]):"btn"==u?t.extend(r[2],d[l]):r.push(d[l])}for(var h=0;h<r.length;h++){var f=r[h].type;switch(f||(f="text"),f){case"text":s.push(a.loadToolBarDetail(r[h]).text());break;case"textarea":s.push(a.loadToolBarDetail(r[h]).textarea());break;case"select":s.push(a.loadToolBarDetail(r[h]).select());break;case"hidden":s.push(a.loadToolBarDetail(r[h]).hidden())}}for(var p=['<div class="layui-form-item">','<div class="layui-input-block" style="margin-left:0px;text-align:center;">'],h=0;h<r.length;h++){var f=r[h].type;switch(f||(f="text"),f){case"submit":p.push(a.loadToolBarDetail(r[h]).submit());break;case"button":p.push(a.loadToolBarDetail(r[h]).button());break;case"reset":p.push(a.loadToolBarDetail(r[h]).reset())}}p.push("</div></div>"),s.push(p.join("")),s.push("</form></div>"),i=s.join("");break;case te.editTool:var b=[{label:"当前选中",name:"nodeTitle",type:"text",value:e,defElem:"nowChoose",readonly:!0},{label:"编辑"+a.toolbarStyle.title,name:"editNodeName",type:"text",value:"",defElem:"nowChange",verify:"required"},{type:"submit",value:"确认编辑",defElem:"btn",filter:"dtree_editNode_form"}],m=['<div class="'+c+'"><form class="layui-form layui-form-pane" lay-filter="dtree_editNode_form">'];if(null!=n&&n.length>0&&null!=n[1]&&void 0!=n[1]&&n[1].length>0)for(var y=n[1],l=0;l<y.length;l++){var u=y[l].defElem;"nowChoose"==u?t.extend(b[0],y[l]):"nowChange"==u?t.extend(b[1],y[l]):"btn"==u?t.extend(b[2],y[l]):b.push(y[l])}for(var h=0;h<b.length;h++){var f=b[h].type;switch(f||(f="text"),f){case"text":m.push(a.loadToolBarDetail(b[h]).text());break;case"textarea":m.push(a.loadToolBarDetail(b[h]).textarea());break;case"select":m.push(a.loadToolBarDetail(b[h]).select());break;case"hidden":m.push(a.loadToolBarDetail(b[h]).hidden())}}for(var v=['<div class="layui-form-item">','<div class="layui-input-block" style="margin-left:0px;text-align:center;">'],h=0;h<b.length;h++){var f=b[h].type;switch(f||(f="text"),f){case"submit":v.push(a.loadToolBarDetail(b[h]).submit());break;case"button":v.push(a.loadToolBarDetail(b[h]).button());break;case"reset":v.push(a.loadToolBarDetail(b[h]).reset())}}v.push("</div></div>"),m.push(v.join("")),m.push("</form></div>"),i=m.join("")}return i},le.prototype.loadToolBarDetail=function(e){var t="boolean"==typeof e.readonly&&e.readonly,o="boolean"==typeof e.disabled&&e.disabled,a=e.id?e.id:"",n=e.name?e.name:"",i=e.value?e.value:"",r=e.verify?e.verify:"",s=e.placeholder?e.placeholder:i;return{text:function(){return['<div class="layui-form-item">','<label class="layui-form-label" title="'+e.label+'">'+e.label+"：</label>",'<div class="layui-input-block f-input-par">','<input type="text" class="layui-input f-input" value="'+i+'" placeholder="'+s+'" lay-verify="'+r+'" ',""!=a?'id="'+a+'" ':"",""!=n?'name="'+n+'" ':"",t?"readonly ":"",o?"disabled ":"","/>","</div>","</div>"].join("")},textarea:function(){return['<div class="layui-form-item layui-form-text">','<label class="layui-form-label" title="'+e.label+'">'+e.label+"：</label>",'<div class="layui-input-block f-input-par">','<textarea class="layui-textarea f-input" value="'+i+'" placeholder="'+s+'" lay-verify="'+r+'" ',""!=a?'id="'+a+'" ':"",""!=n?'name="'+n+'" ':"",t?"readonly ":"",o?"disabled ":"",">"+i+"</textarea>","</div>","</div>"].join("")},hidden:function(){return['<input type="hidden" class="layui-input f-input" value="'+i+'" lay-verify="'+r+'" ',""!=a?'id="'+a+'" ':"",""!=n?'name="'+n+'" ':"",t?"readonly ":"",o?"disabled ":"","/>"].join("")},select:function(){var s=e.optionsData,d="";for(var l in s)d+=i==s[l]?"<option value='"+l+"' selected>"+s[l]+"</option>":"<option value='"+l+"'>"+s[l]+"</option>";return['<div class="layui-form-item">','<label class="layui-form-label" title="'+e.label+'">'+e.label+"：</label>",'<div class="layui-input-block f-input-par">','<select lay-verify="'+r+'" ',""!=a?'id="'+a+'" ':"",""!=n?'name="'+n+'" ':"",t?"readonly ":"",o?"disabled ":"",">",d,"</select>","</div>","</div>"].join("")},submit:function(){var t=e.filter;return['<button type="button" class="layui-btn layui-btn-normal btn-w100" lay-submit lay-filter="'+t+'" ',""!=a?'id="'+a+'" ':"",""!=n?'name="'+n+'" ':"",">"+i+"</button>"].join("")},button:function(){return['<button type="button" class="layui-btn layui-btn-normal btn-w100" ',""!=a?'id="'+a+'" ':"",""!=n?'name="'+n+'" ':""," >"+i+"</button>"].join("")},reset:function(){return['<button type="reset" class="layui-btn layui-btn-primary btn-w100" ',""!=a?'id="'+a+'" ':"",""!=n?'name="'+n+'" ':"",">"+i+"</button>"].join("")}}},le.prototype.changeTreeNodeAdd=function(e){var t=this,a=t.temp,n=a[0],i=a[1],r=a[2],s=a[3],d=!1;if(e){var l=t.obj.find("[data-id='"+n+"']");if("object"===_typeof(e)){l.remove();var c=t.parseData(e);if(!c.treeId())return o.msg("添加失败,节点ID为undefined！",{icon:5}),i.find("li[data-id='"+n+"']").remove(),t.setNodeParam(r),void(t.temp=[]);i.append(t.getLiItemDom(c.treeId(),c.parentId(),c.title(),c.isLast(0),c.iconClass(),c.checkArr(),s,c.spread(),c.disabled(),c.isHide(),c.basicData(),c.recordData(),"item")),l=i.find("div[data-id='"+c.treeId()+"']"),t.setNodeParam(l)}else"refresh"==e?d=!0:"string"!=typeof e&&"number"!=typeof e&&1!=e||(l.attr("data-id",e),i.find("li[data-id='"+e+"']").show(),t.setNodeParam(l));var u=r.find("i[data-spread]");"last"==u.eq(0).attr("data-spread")?t.operateIcon(u.eq(0),u.eq(1)).openWithDot():t.operateIcon(u.eq(0),u.eq(1)).open(),i.addClass(y),t.accordionUL(i),d?t.getChild(r):t.toolbar&&"contextmenu"!=t.toolbarWay&&t.dynamicToolbarDom(l.find("cite[data-leaf]"))}else i.find("li[data-id='"+n+"']").remove(),t.setNodeParam(r);t.temp=[]},le.prototype.changeTreeNodeDone=function(e){a.val("dtree_editNode_form",e),a.render()},le.prototype.changeTreeNodeEdit=function(e){var t=this,a=t.temp,n=a[0],i=a[1],r=a[2];a[3];if(e){if("object"===_typeof(e)){var s=t.parseData(data);if(s.treeId()){var d=t.replaceDom(i,s.treeId(),s.isLast(0),s.spread(),s.disabled(),s.isHide());d.node(s.iconClass()),d.checkbox(s.checkArr()),d.text(s.title()),d.ul(),d.basicData(s.basicData()),d.recordData(s.recordData()),t.setNodeParam(i)}else o.msg("编辑失败,节点ID为undefined！",{icon:5}),t.setNodeParam(i)}}else n.html(r),t.getNodeParam(i);t.temp=[]},le.prototype.changeTreeNodeDel=function(e){var t=this,o=t.temp,a=o[0],n=a.parent("ul"),i=o[1];if(e){if(a.remove(),0==n.children("li").length){var r=i.find("i[data-spread]");t.operateIcon(r.eq(0),r.eq(1)).closeWithDot()}t.initNodeParam()}t.temp=[]},le.prototype.loadIframe=function(e,a){var n=this,i=n.getNodeDom(e).cite();if(!n.useIframe)return!1;var r=n.iframe.iframeElem,s=n.iframe.iframeUrl,d=n.iframe.iframeLoad,l="leaf"!=d||"leaf"==i.attr("data-leaf");if(l){if(!(t(r).length>0))return o.msg("iframe绑定异常，请确认页面中是否有iframe页对应的容器",{icon:5}),!1;if(!s)return o.msg("数据请求异常，iframeUrl参数未指定",{icon:5}),!1;var c=de.serialize(a);s.indexOf("?")>-1&&(c="&"+c.substring(1,c.length));var u=s+c;t(r).attr("src",u)}return l},le.prototype.getIframeRequestParam=function(e){var t=this,o=t.iframe.iframeRequest,a=t.iframe.iframeDefaultRequest,n=e||t.node,i={};for(var r in o)i[r]=o[r];for(var r in a){var s=a[r],d=n[r];"boolean"==typeof d?i[s]=d:d&&(i[s]=d)}var l=/[\u4E00-\u9FA5\uF900-\uFA2D]/;for(var r in i)if(l.test(i[r])){var c=i[r];i[r]=encodeURI(encodeURI(c))}return i},le.prototype.getNodeDom=function(e){var t=this,o="object"===_typeof(e)?e:0==t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id='"+e+"']").length?null:t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id='"+e+"']");return{div:function(){return o},fnode:function(){return null==o?null:o.find("i[data-spread]").eq(0)},snode:function(){return null==o?null:o.find("i[data-spread]").eq(1)},checkbox:function(){return null==o?null:o.find("i[data-par]")},cite:function(){return null==o?null:o.find("cite[data-leaf]")},nextUl:function(){return null==o?null:o.next("ul")},parentLi:function(){return null==o?null:o.parent("li")},parentUl:function(){return null==o?null:o.parent("li").parent("ul")},parentDiv:function(){return null==o?null:o.parent("li").parent("ul").prev("div")},nowDiv:function(){return 0==t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id]").parent().find("."+m).length?null:t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id]").parent().find("."+m)},nowOrRootDiv:function(){return 0==t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id]").parent().find("."+m).length?t.obj.children("li").eq(0).children("div").eq(0):t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id]").parent().find("."+m)},nowOrRootUl:function(){return 0==t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id]").parent().find("."+m).length?t.obj:t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id]").parent().find("."+m).next("ul")}}},le.prototype.getNowNodeUl=function(){var e=this;return e.getNodeDom().nowOrRootUl()},le.prototype.getNowNode=function(){var e=this;return e.getNodeDom().nowOrRootDiv()},le.prototype.getNowNodeOrNull=function(){var e=this;return e.getNodeDom().nowDiv()},le.prototype.getNode=function(e){var t=this;return t.getNodeDom(e).div()},le.prototype.setNodeParam=function(e){var o=this;if(o.node.nodeId=e.attr("data-id"),o.node.parentId=o.getNodeDom(e).parentLi().attr("data-pid"),o.node.context=o.getNodeDom(e).cite().text(),o.node.isLeaf="leaf"==o.getNodeDom(e).cite().attr("data-leaf"),o.node.level=o.getNodeDom(e).parentLi().attr("data-index"),o.node.spread="open"==o.getNodeDom(e).fnode().attr("data-spread"),o.node.basicData=e.attr("data-basic"),o.node.recordData=e.attr("data-record"),o.getNodeDom(e).checkbox()){var a="",n="",i="";o.getNodeDom(e).checkbox().each(function(){a+=t(this).attr("data-type")+",",n+=t(this).attr("data-checked")+",",i+=t(this).attr("data-initchecked")+","}),a=a.substring(0,a.length-1),n=n.substring(0,n.length-1),i=i.substring(0,i.length-1),o.node.dataType=a,o.node.ischecked=n,o.node.initchecked=i}},le.prototype.getNodeParam=function(e){var t=this;return e?t.setNodeParam(e):0==t.obj.find("div[data-id]").parent().find("."+m).length&&t.initNodeParam(),this.node},le.prototype.getTempNodeParam=function(e){var o=this,a={};if(a.nodeId=e.attr("data-id"),a.parentId=o.getNodeDom(e).parentLi().attr("data-pid"),a.context=o.getNodeDom(e).cite().text(),a.isLeaf="leaf"==o.getNodeDom(e).cite().attr("data-leaf"),a.level=o.getNodeDom(e).parentLi().attr("data-index"),a.spread="open"==o.getNodeDom(e).fnode().attr("data-spread"),a.basicData=e.attr("data-basic"),a.recordData=e.attr("data-record"),o.getNodeDom(e).checkbox()){var n="",i="",r="";o.getNodeDom(e).checkbox().each(function(){n+=t(this).attr("data-type")+",",i+=t(this).attr("data-checked")+",",r+=t(this).attr("data-initchecked")+","}),n=n.substring(0,n.length-1),i=i.substring(0,i.length-1),r=r.substring(0,r.length-1),a.dataType=n,a.ischecked=i,a.initchecked=r}return a},le.prototype.initNodeParam=function(){var e=this;e.node.nodeId="",e.node.parentId="",e.node.context="",e.node.isLeaf="",e.node.level="",e.node.spread="",e.node.dataType="",e.node.ischecked="",e.node.initchecked="",e.node.basicData="",e.node.recordData=""},le.prototype.getRequestParam=function(e){var t=this,o=t.request,a=t.defaultRequest,n=e||t.node,i={};for(var r in o)i[r]=o[r];for(var r in a){var s=a[r],d=n[r];"boolean"==typeof d?i[s]=d:d&&(i[s]=d)}return i},le.prototype.getFilterRequestParam=function(e){var t=this,o=t.filterRequest;return ae.cloneObj(e,o)},le.prototype.getNowParam=function(){var e=this;return e.getRequestParam(e.getNodeParam())},le.prototype.getParam=function(e){var t=this,o="object"===_typeof(e)?e:0==t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id='"+e+"']").length?null:t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id='"+e+"']");return null!=o?t.callbackData().node(t.getTempNodeParam(o)):{}},le.prototype.getParentParam=function(e){var t=this,o="object"===_typeof(e)?e:0==t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id='"+e+"']").length?null:t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id='"+e+"']");return null!=o?t.callbackData().parentNode(o):{}},le.prototype.getAllParentParam=function(e){var t=this,o="object"===_typeof(e)?e:0==t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id='"+e+"']").length?null:t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id='"+e+"']"),a=[];if(null!=o)for(var n=t.getTempNodeParam(o).level,i=1;i<n;i++)a.unshift(t.callbackData().parentNode(o)),o=t.getNodeDom(o).parentDiv();return a},le.prototype.getChildParam=function(e){var t=this,o="object"===_typeof(e)?e:0==t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id='"+e+"']").length?null:t.obj.find("div[dtree-click='"+ee.itemNodeClick+"'][data-id='"+e+"']");return null!=o?t.callbackData().childNode(o):[]},le.prototype.callbackData=function(){var e=this;return{dom:function(e){return e},node:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e.getRequestParam(t)}),childNode:function o(a){var n=a.next("ul").find("li."+i+" div."+r),o=[];return n&&n.length>0&&n.each(function(){var a=t(this);o.push(e.getRequestParam(e.getTempNodeParam(a)))}),o},parentNode:function(t){var o=e.getNodeDom(t).parentLi().attr("data-pid"),a=e.obj.find("div[data-id='"+o+"']");return a.length>0?e.getRequestParam(e.getTempNodeParam(a)):{}}}},le.prototype.bindBrowserEvent=function(){var e=this;e.obj.on("click","i[data-spread]",function(o){o.stopPropagation();var a=t(this),n=a.parent("div"),i=e.getNodeParam(n);e.toolbarHide(),e.navThis(n),e.clickSpread(n),layui.event.call(this,D,"changeTree("+t(e.obj)[0].id+")",{param:e.callbackData().node(i),dom:e.callbackData().dom(a),show:"open"==e.callbackData().dom(a).attr("data-spread")})}),e.obj.on("click","div[dtree-click='"+ee.itemNodeClick+"'][dtree-disabled='false']",function(o){o.stopPropagation();var a=t(this),n=(a.find("cite"),e.getNodeParam(a));if(e.toolbarHide(),e.navThis(a),e.useIframe){var i=e.getFilterRequestParam(e.getIframeRequestParam(n)),r=e.loadIframe(a,i);r&&(e.iframeFun.iframeDone(i),layui.event.call(this,D,"iframeDone("+t(e.obj)[0].id+")",{iframeParam:i,dom:e.callbackData().dom(a)}))}else layui.event.call(this,D,"node("+t(e.obj)[0].id+")",{param:e.callbackData().node(n),childParams:e.callbackData().childNode(a),parentParam:e.callbackData().parentNode(a),dom:e.callbackData().dom(a)})}),e.obj.on("dblclick","div[dtree-click='"+ee.itemNodeClick+"'][dtree-disabled='false']",function(o){o.stopPropagation();var a=t(this),n=(a.find("cite"),e.getNodeParam(a));e.toolbarHide(),e.navThis(a),layui.event.call(this,D,"nodedblclick("+t(e.obj)[0].id+")",{param:e.callbackData().node(n),childParams:e.callbackData().childNode(a),parentParam:e.callbackData().parentNode(a),dom:e.callbackData().dom(a)})}),e.checkbar&&e.obj.on("click","i[dtree-click='"+ee.checkNodeClick+"'][dtree-disabled='false']",function(o){e.toolbarHide();var a=t(this),n=a.closest("div[dtree-click='"+ee.itemNodeClick+"']"),i=e.getNodeParam(n),r=e.checkbarFun.chooseBefore(a,e.getRequestParam(i));e.temp=[a],r&&e.changeCheck(),o.stopPropagation()}),e.menubar&&(e.obj.prevAll("div#dtree_menubar_"+e.obj[0].id).on("click","button[d-menu]",function(o){o.stopPropagation(),e.toolbarHide(),e.menubarListener(t(this).attr("d-menu"),"group")}),e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id).on("click","a[d-menu]",function(o){o.stopPropagation(),e.toolbarHide(),e.menubarListener(t(this).attr("d-menu"),"toolbar")}),e.obj.closest("body").find("*[dtree-id='"+e.obj[0].id+"'][dtree-menu]").on("click",function(o){o.stopPropagation(),e.toolbarHide(),e.menubarListener(t(this).attr("dtree-menu"),"freedom")})),e.toolbar&&("contextmenu"==e.toolbarWay?(e.obj.on("contextmenu","div[dtree-click='"+ee.itemNodeClick+"'][d-contextmenu='true'][dtree-disabled='false']",function(o){var a=t(this),n=e.getNodeParam(a);e.toolbarHide(),e.setToolbarDom().setToolbarPlace(e.toolbarFun.loadToolbarBefore(ae.cloneObj(e.toolbarMenu),e.getRequestParam(n),a));var o=o||window.event,i=o.pageX-a.offset().left+45,r=a.offset().top-e.obj.closest(e.toolbarScroll).offset().top+15;e.navThis(a);var s=e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id);return s.find(".layui-nav-child").addClass("layui-anim-fadein layui-show"),s.css({left:i+"px",top:r+"px"}),o.stopPropagation(),!1}),e.obj.closest(e.toolbarScroll).scroll(function(){e.toolbarHide()}),e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id).on("click","a[dtree-tool]",function(o){o.stopPropagation();var a=e.getNodeDom().nowOrRootDiv();e.getNodeParam(a);e.toolbarHide();var n=t(this).attr("dtree-tool");e.toolbarListener(n,a)})):"fixed"==e.toolbarWay?e.obj.on("click","a[dtree-tool]",function(o){o.stopPropagation();var a=t(this),n=a.parent("em."+u).prev("cite"),i=n.parent("div"),r=(e.getNodeParam(i),a.attr("dtree-tool"));e.toolbarHide(),e.navThis(i),e.toolbarListener(r,i)}):"follow"==e.toolbarWay&&(e.obj.on("mouseover mouseout","div[dtree-click='"+ee.itemNodeClick+"'][dtree-disabled='false']",function(e){var o=t(this),a=o.children("em."+u);"mouseover"==e.type?(a.removeClass(v),e.stopPropagation()):"mouseout"==e.type&&(a.addClass(v),e.stopPropagation())}),e.obj.on("click","a[dtree-tool]",function(o){o.stopPropagation();var a=t(this),n=a.parent("em."+u).prev("cite"),i=n.parent("div"),r=(e.getNodeParam(i),a.attr("dtree-tool"));e.toolbarHide(),e.navThis(i),e.toolbarListener(r,i)})))},S.on("click",function(e){t("div."+l).find(".layui-show").removeClass("layui-anim-fadein layui-show")}),le.prototype.unbindBrowserEvent=function(){var e=this;e.obj.unbind(),e.menubar&&(e.obj.prevAll("div#dtree_menubar_"+e.obj[0].id).unbind(),e.obj.closest("body").find("*[dtree-id='"+e.obj[0].id+"'][dtree-menu]").length>0&&e.obj.closest("body").find("*[dtree-id='"+e.obj[0].id+"'][dtree-menu]").unbind()),e.toolbar&&"contextmenu"==e.toolbarWay&&(e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id).unbind(),e.obj.closest(e.toolbarScroll).length>0&&e.obj.closest(e.toolbarScroll).unbind())};var ce={render:function(e){var t=null,a=ae.getElemId(e);return""==a?o.msg("页面中未找到绑定id",{icon:5}):(t=C[a],"object"===_typeof(t)?(t.reloadSetting(e),t.initTreePlus(),t.openTreePlus(),t.initNodeParam(),t.init(),t.unbindBrowserEvent(),t.bindBrowserEvent()):(t=new le(e),C[a]=t,t.initTreePlus(),t.openTreePlus(),t.init(),t.bindBrowserEvent())),t},reload:function(e,t){return"string"==typeof e&&(e=C[e]),"undefined"==typeof e?void o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2}):(e.reloadSetting(t),e.initTreePlus(),e.openTreePlus(),e.initNodeParam(),e.init(),e.unbindBrowserEvent(),void e.bindBrowserEvent())},on:function(e,t){return e.indexOf("'")>0&&(e=e.replace(/'/g,"")),e.indexOf('"')>0&&(e=e.replace(/"/g,"")),layui.onevent.call(this,D,e,t)},click:function(e,a){return"string"==typeof e&&(e=C[e]),"undefined"==typeof e?void o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2}):void t("div[dtree-click='"+ee.itemNodeClick+"'][dtree-id='"+e.obj[0].id+"'][data-id='"+a+"']").click()},getNowParam:function(e){return"string"==typeof e&&(e=C[e]),"undefined"==typeof e?void o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2}):e.getNowParam()},getParam:function(e,t){return"string"==typeof e&&(e=C[e]),"undefined"==typeof e?void o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2}):e.getParam(t)},getParentParam:function(e,t){return"string"==typeof e&&(e=C[e]),"undefined"==typeof e?void o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2}):e.getParentParam(t)},getAllParentParam:function(e,t){return"string"==typeof e&&(e=C[e]),"undefined"==typeof e?void o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2}):e.getAllParentParam(t)},getChildParam:function(e,t){return"string"==typeof e&&(e=C[e]),"undefined"==typeof e?void o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2}):e.getChildParam(t)},getCheckbarNodesParam:function(e){return"string"==typeof e&&(e=C[e]),"undefined"==typeof e?(o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2}),{}):e.getCheckbarNodesParam()},dataInit:function(e,t){return"string"==typeof e&&(e=C[e]),"undefined"==typeof e?void o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2}):t?e.dataInit(t):void 0},chooseDataInit:function(e,t){return"string"==typeof e&&(e=C[e]),"undefined"==typeof e?void o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2}):t?e.chooseDataInit(t):void 0},changeCheckbarNodes:function(e){return"string"==typeof e&&(e=C[e]),"undefined"==typeof e?void o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2}):e.changeCheckbarNodes()},initNoAllCheck:function(e){return"string"==typeof e&&(e=C[e]),"undefined"==typeof e?void o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2}):e.initNoAllCheck()},initAllCheck:function(e){return"string"==typeof e&&(e=C[e]),"undefined"==typeof e?void o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2}):e.initAllCheck()},escape:function(e){return ae.escape(e)},unescape:function(e){return ae.unescape(e)},version:function(){return N}};e("dtree",ce)});